/*! jQuery v2.2.3 | (c) jQuery Foundation | jquery.org/license */
function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function n(t){var e=!!t&&"length"in t&&t.length,n=ot.type(t);return"function"===n||ot.isWindow(t)?!1:"array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t}function i(t,e,n){if(ot.isFunction(e))return ot.grep(t,function(t,i){return!!e.call(t,i,t)!==n});if(e.nodeType)return ot.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(vt.test(e))return ot.filter(e,t,n);e=ot.filter(e,t)}return ot.grep(t,function(t){return J.call(e,t)>-1!==n})}function r(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function o(t){var e={};return ot.each(t.match(wt)||[],function(t,n){e[n]=!0}),e}function a(){X.removeEventListener("DOMContentLoaded",a),t.removeEventListener("load",a),ot.ready()}function s(){this.expando=ot.expando+s.uid++}function u(t,e,n){var i;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(St,"-$&").toLowerCase(),n=t.getAttribute(i),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:Et.test(n)?ot.parseJSON(n):n}catch(r){}kt.set(t,e,n)}else n=void 0;return n}function l(t,e,n,i){var r,o=1,a=20,s=i?function(){return i.cur()}:function(){return ot.css(t,e,"")},u=s(),l=n&&n[3]||(ot.cssNumber[e]?"":"px"),c=(ot.cssNumber[e]||"px"!==l&&+u)&&Ft.exec(ot.css(t,e));if(c&&c[3]!==l){l=l||c[3],n=n||[],c=+u||1;do o=o||".5",c/=o,ot.style(t,e,c+l);while(o!==(o=s()/u)&&1!==o&&--a)}return n&&(c=+c||+u||0,r=n[1]?c+(n[1]+1)*n[2]:+n[2],i&&(i.unit=l,i.start=c,i.end=r)),r}function c(t,e){var n="undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e||"*"):"undefined"!=typeof t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&ot.nodeName(t,e)?ot.merge([t],n):n}function h(t,e){for(var n=0,i=t.length;i>n;n++)Mt.set(t[n],"globalEval",!e||Mt.get(e[n],"globalEval"))}function f(t,e,n,i,r){for(var o,a,s,u,l,f,d=e.createDocumentFragment(),p=[],v=0,g=t.length;g>v;v++)if(o=t[v],o||0===o)if("object"===ot.type(o))ot.merge(p,o.nodeType?[o]:o);else if(Ot.test(o)){for(a=a||d.appendChild(e.createElement("div")),s=($t.exec(o)||["",""])[1].toLowerCase(),u=Pt[s]||Pt._default,a.innerHTML=u[1]+ot.htmlPrefilter(o)+u[2],f=u[0];f--;)a=a.lastChild;ot.merge(p,a.childNodes),a=d.firstChild,a.textContent=""}else p.push(e.createTextNode(o));for(d.textContent="",v=0;o=p[v++];)if(i&&ot.inArray(o,i)>-1)r&&r.push(o);else if(l=ot.contains(o.ownerDocument,o),a=c(d.appendChild(o),"script"),l&&h(a),n)for(f=0;o=a[f++];)zt.test(o.type||"")&&n.push(o);return d}function d(){return!0}function p(){return!1}function v(){try{return X.activeElement}catch(t){}}function g(t,e,n,i,r,o){var a,s;if("object"==typeof e){"string"!=typeof n&&(i=i||n,n=void 0);for(s in e)g(t,s,n,i,e[s],o);return t}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),r===!1)r=p;else if(!r)return t;return 1===o&&(a=r,r=function(t){return ot().off(t),a.apply(this,arguments)},r.guid=a.guid||(a.guid=ot.guid++)),t.each(function(){ot.event.add(this,e,r,i,n)})}function m(t,e){return ot.nodeName(t,"table")&&ot.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function _(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function y(t){var e=Vt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function b(t,e){var n,i,r,o,a,s,u,l;if(1===e.nodeType){if(Mt.hasData(t)&&(o=Mt.access(t),a=Mt.set(e,o),l=o.events)){delete a.handle,a.events={};for(r in l)for(n=0,i=l[r].length;i>n;n++)ot.event.add(e,r,l[r][n])}kt.hasData(t)&&(s=kt.access(t),u=ot.extend({},s),kt.set(e,u))}}function w(t,e){var n=e.nodeName.toLowerCase();"input"===n&&Dt.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function x(t,e,n,i){e=Q.apply([],e);var r,o,a,s,u,l,h=0,d=t.length,p=d-1,v=e[0],g=ot.isFunction(v);if(g||d>1&&"string"==typeof v&&!it.checkClone&&Bt.test(v))return t.each(function(r){var o=t.eq(r);g&&(e[0]=v.call(this,r,o.html())),x(o,e,n,i)});if(d&&(r=f(e,t[0].ownerDocument,!1,t,i),o=r.firstChild,1===r.childNodes.length&&(r=o),o||i)){for(a=ot.map(c(r,"script"),_),s=a.length;d>h;h++)u=r,h!==p&&(u=ot.clone(u,!0,!0),s&&ot.merge(a,c(u,"script"))),n.call(t[h],u,h);if(s)for(l=a[a.length-1].ownerDocument,ot.map(a,y),h=0;s>h;h++)u=a[h],zt.test(u.type||"")&&!Mt.access(u,"globalEval")&&ot.contains(l,u)&&(u.src?ot._evalUrl&&ot._evalUrl(u.src):ot.globalEval(u.textContent.replace(Ut,"")))}return t}function C(t,e,n){for(var i,r=e?ot.filter(e,t):t,o=0;null!=(i=r[o]);o++)n||1!==i.nodeType||ot.cleanData(c(i)),i.parentNode&&(n&&ot.contains(i.ownerDocument,i)&&h(c(i,"script")),i.parentNode.removeChild(i));return t}function A(t,e){var n=ot(e.createElement(t)).appendTo(e.body),i=ot.css(n[0],"display");return n.detach(),i}function M(t){var e=X,n=Gt[t];return n||(n=A(t,e),"none"!==n&&n||(Wt=(Wt||ot("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=Wt[0].contentDocument,e.write(),e.close(),n=A(t,e),Wt.detach()),Gt[t]=n),n}function k(t,e,n){var i,r,o,a,s=t.style;return n=n||Kt(t),a=n?n.getPropertyValue(e)||n[e]:void 0,""!==a&&void 0!==a||ot.contains(t.ownerDocument,t)||(a=ot.style(t,e)),n&&!it.pixelMarginRight()&&Xt.test(a)&&Yt.test(e)&&(i=s.width,r=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=i,s.minWidth=r,s.maxWidth=o),void 0!==a?a+"":a}function E(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function S(t){if(t in ie)return t;for(var e=t[0].toUpperCase()+t.slice(1),n=ne.length;n--;)if(t=ne[n]+e,t in ie)return t}function T(t,e,n){var i=Ft.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function F(t,e,n,i,r){for(var o=n===(i?"border":"content")?4:"width"===e?1:0,a=0;4>o;o+=2)"margin"===n&&(a+=ot.css(t,n+Rt[o],!0,r)),i?("content"===n&&(a-=ot.css(t,"padding"+Rt[o],!0,r)),"margin"!==n&&(a-=ot.css(t,"border"+Rt[o]+"Width",!0,r))):(a+=ot.css(t,"padding"+Rt[o],!0,r),"padding"!==n&&(a+=ot.css(t,"border"+Rt[o]+"Width",!0,r)));return a}function R(e,n,i){var r=!0,o="width"===n?e.offsetWidth:e.offsetHeight,a=Kt(e),s="border-box"===ot.css(e,"boxSizing",!1,a);if(X.msFullscreenElement&&t.top!==t&&e.getClientRects().length&&(o=Math.round(100*e.getBoundingClientRect()[n])),0>=o||null==o){if(o=k(e,n,a),(0>o||null==o)&&(o=e.style[n]),Xt.test(o))return o;r=s&&(it.boxSizingReliable()||o===e.style[n]),o=parseFloat(o)||0}return o+F(e,n,i||(s?"border":"content"),r,a)+"px"}function N(t,e){for(var n,i,r,o=[],a=0,s=t.length;s>a;a++)i=t[a],i.style&&(o[a]=Mt.get(i,"olddisplay"),n=i.style.display,e?(o[a]||"none"!==n||(i.style.display=""),""===i.style.display&&Nt(i)&&(o[a]=Mt.access(i,"olddisplay",M(i.nodeName)))):(r=Nt(i),"none"===n&&r||Mt.set(i,"olddisplay",r?n:ot.css(i,"display"))));for(a=0;s>a;a++)i=t[a],i.style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?o[a]||"":"none"));return t}function D(t,e,n,i,r){return new D.prototype.init(t,e,n,i,r)}function $(){return t.setTimeout(function(){re=void 0}),re=ot.now()}function z(t,e){var n,i=0,r={height:t};for(e=e?1:0;4>i;i+=2-e)n=Rt[i],r["margin"+n]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function P(t,e,n){for(var i,r=(I.tweeners[e]||[]).concat(I.tweeners["*"]),o=0,a=r.length;a>o;o++)if(i=r[o].call(n,e,t))return i}function O(t,e,n){var i,r,o,a,s,u,l,c,h=this,f={},d=t.style,p=t.nodeType&&Nt(t),v=Mt.get(t,"fxshow");n.queue||(s=ot._queueHooks(t,"fx"),null==s.unqueued&&(s.unqueued=0,u=s.empty.fire,s.empty.fire=function(){s.unqueued||u()}),s.unqueued++,h.always(function(){h.always(function(){s.unqueued--,ot.queue(t,"fx").length||s.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],l=ot.css(t,"display"),c="none"===l?Mt.get(t,"olddisplay")||M(t.nodeName):l,"inline"===c&&"none"===ot.css(t,"float")&&(d.display="inline-block")),n.overflow&&(d.overflow="hidden",h.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(i in e)if(r=e[i],ae.exec(r)){if(delete e[i],o=o||"toggle"===r,r===(p?"hide":"show")){if("show"!==r||!v||void 0===v[i])continue;p=!0}f[i]=v&&v[i]||ot.style(t,i)}else l=void 0;if(ot.isEmptyObject(f))"inline"===("none"===l?M(t.nodeName):l)&&(d.display=l);else{v?"hidden"in v&&(p=v.hidden):v=Mt.access(t,"fxshow",{}),o&&(v.hidden=!p),p?ot(t).show():h.done(function(){ot(t).hide()}),h.done(function(){var e;Mt.remove(t,"fxshow");for(e in f)ot.style(t,e,f[e])});for(i in f)a=P(p?v[i]:0,i,h),i in v||(v[i]=a.start,p&&(a.end=a.start,a.start="width"===i||"height"===i?1:0))}}function L(t,e){var n,i,r,o,a;for(n in t)if(i=ot.camelCase(n),r=e[i],o=t[n],ot.isArray(o)&&(r=o[1],o=t[n]=o[0]),n!==i&&(t[i]=o,delete t[n]),a=ot.cssHooks[i],a&&"expand"in a){o=a.expand(o),delete t[i];for(n in o)n in t||(t[n]=o[n],e[n]=r)}else e[i]=r}function I(t,e,n){var i,r,o=0,a=I.prefilters.length,s=ot.Deferred().always(function(){delete u.elem}),u=function(){if(r)return!1;for(var e=re||$(),n=Math.max(0,l.startTime+l.duration-e),i=n/l.duration||0,o=1-i,a=0,u=l.tweens.length;u>a;a++)l.tweens[a].run(o);return s.notifyWith(t,[l,o,n]),1>o&&u?n:(s.resolveWith(t,[l]),!1)},l=s.promise({elem:t,props:ot.extend({},e),opts:ot.extend(!0,{specialEasing:{},easing:ot.easing._default},n),originalProperties:e,originalOptions:n,startTime:re||$(),duration:n.duration,tweens:[],createTween:function(e,n){var i=ot.Tween(t,l.opts,e,n,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(i),i},stop:function(e){var n=0,i=e?l.tweens.length:0;if(r)return this;for(r=!0;i>n;n++)l.tweens[n].run(1);return e?(s.notifyWith(t,[l,1,0]),s.resolveWith(t,[l,e])):s.rejectWith(t,[l,e]),this}}),c=l.props;for(L(c,l.opts.specialEasing);a>o;o++)if(i=I.prefilters[o].call(l,t,c,l.opts))return ot.isFunction(i.stop)&&(ot._queueHooks(l.elem,l.opts.queue).stop=ot.proxy(i.stop,i)),i;return ot.map(c,P,l),ot.isFunction(l.opts.start)&&l.opts.start.call(t,l),ot.fx.timer(ot.extend(u,{elem:t,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function q(t){return t.getAttribute&&t.getAttribute("class")||""}function j(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,r=0,o=e.toLowerCase().match(wt)||[];if(ot.isFunction(n))for(;i=o[r++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function H(t,e,n,i){function r(s){var u;return o[s]=!0,ot.each(t[s]||[],function(t,s){var l=s(e,n,i);return"string"!=typeof l||a||o[l]?a?!(u=l):void 0:(e.dataTypes.unshift(l),r(l),!1)}),u}var o={},a=t===ke;return r(e.dataTypes[0])||!o["*"]&&r("*")}function B(t,e){var n,i,r=ot.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((r[n]?t:i||(i={}))[n]=e[n]);return i&&ot.extend(!0,t,i),t}function V(t,e,n){for(var i,r,o,a,s=t.contents,u=t.dataTypes;"*"===u[0];)u.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(r in s)if(s[r]&&s[r].test(i)){u.unshift(r);break}if(u[0]in n)o=u[0];else{for(r in n){if(!u[0]||t.converters[r+" "+u[0]]){o=r;break}a||(a=r)}o=o||a}return o?(o!==u[0]&&u.unshift(o),n[o]):void 0}function U(t,e,n,i){var r,o,a,s,u,l={},c=t.dataTypes.slice();if(c[1])for(a in t.converters)l[a.toLowerCase()]=t.converters[a];for(o=c.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!u&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(a=l[u+" "+o]||l["* "+o],!a)for(r in l)if(s=r.split(" "),s[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){a===!0?a=l[r]:l[r]!==!0&&(o=s[0],c.unshift(s[1]));break}if(a!==!0)if(a&&t["throws"])e=a(e);else try{e=a(e)}catch(h){return{state:"parsererror",error:a?h:"No conversion from "+u+" to "+o}}}return{state:"success",data:e}}function W(t,e,n,i){var r;if(ot.isArray(e))ot.each(e,function(e,r){n||Fe.test(t)?i(t,r):W(t+"["+("object"==typeof r&&null!=r?e:"")+"]",r,n,i)});else if(n||"object"!==ot.type(e))i(t,e);else for(r in e)W(t+"["+r+"]",e[r],n,i)}function G(t){return ot.isWindow(t)?t:9===t.nodeType&&t.defaultView}var Y=[],X=t.document,K=Y.slice,Q=Y.concat,Z=Y.push,J=Y.indexOf,tt={},et=tt.toString,nt=tt.hasOwnProperty,it={},rt="2.2.3",ot=function(t,e){return new ot.fn.init(t,e)},at=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,st=/^-ms-/,ut=/-([\da-z])/gi,lt=function(t,e){return e.toUpperCase()};ot.fn=ot.prototype={jquery:rt,constructor:ot,selector:"",length:0,toArray:function(){return K.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:K.call(this)},pushStack:function(t){var e=ot.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t){return ot.each(this,t)},map:function(t){return this.pushStack(ot.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(K.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:Z,sort:Y.sort,splice:Y.splice},ot.extend=ot.fn.extend=function(){var t,e,n,i,r,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||ot.isFunction(a)||(a={}),s===u&&(a=this,s--);u>s;s++)if(null!=(t=arguments[s]))for(e in t)n=a[e],i=t[e],a!==i&&(l&&i&&(ot.isPlainObject(i)||(r=ot.isArray(i)))?(r?(r=!1,o=n&&ot.isArray(n)?n:[]):o=n&&ot.isPlainObject(n)?n:{},a[e]=ot.extend(l,o,i)):void 0!==i&&(a[e]=i));return a},ot.extend({expando:"jQuery"+(rt+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===ot.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){var e=t&&t.toString();return!ot.isArray(t)&&e-parseFloat(e)+1>=0},isPlainObject:function(t){var e;if("object"!==ot.type(t)||t.nodeType||ot.isWindow(t))return!1;if(t.constructor&&!nt.call(t,"constructor")&&!nt.call(t.constructor.prototype||{},"isPrototypeOf"))return!1;for(e in t);return void 0===e||nt.call(t,e)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?tt[et.call(t)]||"object":typeof t},globalEval:function(t){var e,n=eval;t=ot.trim(t),t&&(1===t.indexOf("use strict")?(e=X.createElement("script"),e.text=t,X.head.appendChild(e).parentNode.removeChild(e)):n(t))},camelCase:function(t){return t.replace(st,"ms-").replace(ut,lt)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e){var i,r=0;if(n(t))for(i=t.length;i>r&&e.call(t[r],r,t[r])!==!1;r++);else for(r in t)if(e.call(t[r],r,t[r])===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(at,"")},makeArray:function(t,e){var i=e||[];return null!=t&&(n(Object(t))?ot.merge(i,"string"==typeof t?[t]:t):Z.call(i,t)),i},inArray:function(t,e,n){return null==e?-1:J.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,r=t.length;n>i;i++)t[r++]=e[i];return t.length=r,t},grep:function(t,e,n){for(var i,r=[],o=0,a=t.length,s=!n;a>o;o++)i=!e(t[o],o),i!==s&&r.push(t[o]);return r},map:function(t,e,i){var r,o,a=0,s=[];if(n(t))for(r=t.length;r>a;a++)o=e(t[a],a,i),null!=o&&s.push(o);else for(a in t)o=e(t[a],a,i),null!=o&&s.push(o);return Q.apply([],s)},guid:1,proxy:function(t,e){var n,i,r;return"string"==typeof e&&(n=t[e],e=t,t=n),ot.isFunction(t)?(i=K.call(arguments,2),r=function(){return t.apply(e||this,i.concat(K.call(arguments)))},r.guid=t.guid=t.guid||ot.guid++,r):void 0},now:Date.now,support:it}),"function"==typeof Symbol&&(ot.fn[Symbol.iterator]=Y[Symbol.iterator]),ot.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){tt["[object "+e+"]"]=e.toLowerCase()});var ct=function(t){function e(t,e,n,i){var r,o,a,s,u,l,h,d,p=e&&e.ownerDocument,v=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==v&&9!==v&&11!==v)return n;if(!i&&((e?e.ownerDocument||e:q)!==N&&R(e),e=e||N,$)){if(11!==v&&(l=mt.exec(t)))if(r=l[1]){if(9===v){if(!(a=e.getElementById(r)))return n;if(a.id===r)return n.push(a),n}else if(p&&(a=p.getElementById(r))&&L(e,a)&&a.id===r)return n.push(a),n}else{if(l[2])return Z.apply(n,e.getElementsByTagName(t)),n;if((r=l[3])&&w.getElementsByClassName&&e.getElementsByClassName)return Z.apply(n,e.getElementsByClassName(r)),n}if(w.qsa&&!U[t+" "]&&(!z||!z.test(t))){if(1!==v)p=e,d=t;else if("object"!==e.nodeName.toLowerCase()){for((s=e.getAttribute("id"))?s=s.replace(yt,"\\$&"):e.setAttribute("id",s=I),h=M(t),o=h.length,u=ft.test(s)?"#"+s:"[id='"+s+"']";o--;)h[o]=u+" "+f(h[o]);d=h.join(","),p=_t.test(t)&&c(e.parentNode)||e}if(d)try{return Z.apply(n,p.querySelectorAll(d)),n}catch(g){}finally{s===I&&e.removeAttribute("id")}}}return E(t.replace(st,"$1"),e,n,i)}function n(){function t(n,i){return e.push(n+" ")>x.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function i(t){return t[I]=!0,t}function r(t){var e=N.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function o(t,e){for(var n=t.split("|"),i=n.length;i--;)x.attrHandle[n[i]]=e}function a(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||G)-(~t.sourceIndex||G);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function s(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function u(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function l(t){return i(function(e){return e=+e,i(function(n,i){for(var r,o=t([],n.length,e),a=o.length;a--;)n[r=o[a]]&&(n[r]=!(i[r]=n[r]))})})}function c(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function h(){}function f(t){for(var e=0,n=t.length,i="";n>e;e++)i+=t[e].value;return i}function d(t,e,n){var i=e.dir,r=n&&"parentNode"===i,o=H++;return e.first?function(e,n,o){for(;e=e[i];)if(1===e.nodeType||r)return t(e,n,o)}:function(e,n,a){var s,u,l,c=[j,o];if(a){for(;e=e[i];)if((1===e.nodeType||r)&&t(e,n,a))return!0}else for(;e=e[i];)if(1===e.nodeType||r){if(l=e[I]||(e[I]={}),u=l[e.uniqueID]||(l[e.uniqueID]={}),(s=u[i])&&s[0]===j&&s[1]===o)return c[2]=s[2];if(u[i]=c,c[2]=t(e,n,a))return!0}}}function p(t){return t.length>1?function(e,n,i){for(var r=t.length;r--;)if(!t[r](e,n,i))return!1;return!0}:t[0]}function v(t,n,i){for(var r=0,o=n.length;o>r;r++)e(t,n[r],i);return i}function g(t,e,n,i,r){for(var o,a=[],s=0,u=t.length,l=null!=e;u>s;s++)(o=t[s])&&(n&&!n(o,i,r)||(a.push(o),l&&e.push(s)));return a}function m(t,e,n,r,o,a){return r&&!r[I]&&(r=m(r)),o&&!o[I]&&(o=m(o,a)),i(function(i,a,s,u){var l,c,h,f=[],d=[],p=a.length,m=i||v(e||"*",s.nodeType?[s]:s,[]),_=!t||!i&&e?m:g(m,f,t,s,u),y=n?o||(i?t:p||r)?[]:a:_;if(n&&n(_,y,s,u),r)for(l=g(y,d),r(l,[],s,u),c=l.length;c--;)(h=l[c])&&(y[d[c]]=!(_[d[c]]=h));if(i){if(o||t){if(o){for(l=[],c=y.length;c--;)(h=y[c])&&l.push(_[c]=h);o(null,y=[],l,u)}for(c=y.length;c--;)(h=y[c])&&(l=o?tt(i,h):f[c])>-1&&(i[l]=!(a[l]=h))}}else y=g(y===a?y.splice(p,y.length):y),o?o(null,a,y,u):Z.apply(a,y)})}function _(t){for(var e,n,i,r=t.length,o=x.relative[t[0].type],a=o||x.relative[" "],s=o?1:0,u=d(function(t){return t===e},a,!0),l=d(function(t){return tt(e,t)>-1},a,!0),c=[function(t,n,i){var r=!o&&(i||n!==S)||((e=n).nodeType?u(t,n,i):l(t,n,i));return e=null,r}];r>s;s++)if(n=x.relative[t[s].type])c=[d(p(c),n)];else{if(n=x.filter[t[s].type].apply(null,t[s].matches),n[I]){for(i=++s;r>i&&!x.relative[t[i].type];i++);return m(s>1&&p(c),s>1&&f(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(st,"$1"),n,i>s&&_(t.slice(s,i)),r>i&&_(t=t.slice(i)),r>i&&f(t))}c.push(n)}return p(c)}function y(t,n){var r=n.length>0,o=t.length>0,a=function(i,a,s,u,l){var c,h,f,d=0,p="0",v=i&&[],m=[],_=S,y=i||o&&x.find.TAG("*",l),b=j+=null==_?1:Math.random()||.1,w=y.length;for(l&&(S=a===N||a||l);p!==w&&null!=(c=y[p]);p++){if(o&&c){for(h=0,a||c.ownerDocument===N||(R(c),s=!$);f=t[h++];)if(f(c,a||N,s)){u.push(c);break}l&&(j=b)}r&&((c=!f&&c)&&d--,i&&v.push(c))}if(d+=p,r&&p!==d){for(h=0;f=n[h++];)f(v,m,a,s);if(i){if(d>0)for(;p--;)v[p]||m[p]||(m[p]=K.call(u));m=g(m)}Z.apply(u,m),l&&!i&&m.length>0&&d+n.length>1&&e.uniqueSort(u)}return l&&(j=b,S=_),v};return r?i(a):a}var b,w,x,C,A,M,k,E,S,T,F,R,N,D,$,z,P,O,L,I="sizzle"+1*new Date,q=t.document,j=0,H=0,B=n(),V=n(),U=n(),W=function(t,e){return t===e&&(F=!0),0},G=1<<31,Y={}.hasOwnProperty,X=[],K=X.pop,Q=X.push,Z=X.push,J=X.slice,tt=function(t,e){for(var n=0,i=t.length;i>n;n++)if(t[n]===e)return n;return-1},et="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",nt="[\\x20\\t\\r\\n\\f]",it="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",rt="\\["+nt+"*("+it+")(?:"+nt+"*([*^$|!~]?=)"+nt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+it+"))|)"+nt+"*\\]",ot=":("+it+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+rt+")*)|.*)\\)|)",at=new RegExp(nt+"+","g"),st=new RegExp("^"+nt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+nt+"+$","g"),ut=new RegExp("^"+nt+"*,"+nt+"*"),lt=new RegExp("^"+nt+"*([>+~]|"+nt+")"+nt+"*"),ct=new RegExp("="+nt+"*([^\\]'\"]*?)"+nt+"*\\]","g"),ht=new RegExp(ot),ft=new RegExp("^"+it+"$"),dt={ID:new RegExp("^#("+it+")"),CLASS:new RegExp("^\\.("+it+")"),TAG:new RegExp("^("+it+"|[*])"),ATTR:new RegExp("^"+rt),PSEUDO:new RegExp("^"+ot),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+nt+"*(even|odd|(([+-]|)(\\d*)n|)"+nt+"*(?:([+-]|)"+nt+"*(\\d+)|))"+nt+"*\\)|)","i"),bool:new RegExp("^(?:"+et+")$","i"),needsContext:new RegExp("^"+nt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+nt+"*((?:-\\d)?\\d*)"+nt+"*\\)|)(?=[^-]|$)","i")},pt=/^(?:input|select|textarea|button)$/i,vt=/^h\d$/i,gt=/^[^{]+\{\s*\[native \w/,mt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_t=/[+~]/,yt=/'|\\/g,bt=new RegExp("\\\\([\\da-f]{1,6}"+nt+"?|("+nt+")|.)","ig"),wt=function(t,e,n){var i="0x"+e-65536;return i!==i||n?e:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},xt=function(){R()};try{Z.apply(X=J.call(q.childNodes),q.childNodes),X[q.childNodes.length].nodeType}catch(Ct){Z={apply:X.length?function(t,e){Q.apply(t,J.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}w=e.support={},A=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},R=e.setDocument=function(t){var e,n,i=t?t.ownerDocument||t:q;return i!==N&&9===i.nodeType&&i.documentElement?(N=i,D=N.documentElement,$=!A(N),(n=N.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",xt,!1):n.attachEvent&&n.attachEvent("onunload",xt)),w.attributes=r(function(t){return t.className="i",!t.getAttribute("className")}),w.getElementsByTagName=r(function(t){return t.appendChild(N.createComment("")),!t.getElementsByTagName("*").length}),w.getElementsByClassName=gt.test(N.getElementsByClassName),w.getById=r(function(t){return D.appendChild(t).id=I,!N.getElementsByName||!N.getElementsByName(I).length}),w.getById?(x.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&$){var n=e.getElementById(t);return n?[n]:[]}},x.filter.ID=function(t){var e=t.replace(bt,wt);return function(t){return t.getAttribute("id")===e}}):(delete x.find.ID,x.filter.ID=function(t){var e=t.replace(bt,wt);return function(t){var n="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}}),x.find.TAG=w.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):w.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],r=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},x.find.CLASS=w.getElementsByClassName&&function(t,e){return"undefined"!=typeof e.getElementsByClassName&&$?e.getElementsByClassName(t):void 0},P=[],z=[],(w.qsa=gt.test(N.querySelectorAll))&&(r(function(t){D.appendChild(t).innerHTML="<a id='"+I+"'></a><select id='"+I+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&z.push("[*^$]="+nt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||z.push("\\["+nt+"*(?:value|"+et+")"),t.querySelectorAll("[id~="+I+"-]").length||z.push("~="),t.querySelectorAll(":checked").length||z.push(":checked"),t.querySelectorAll("a#"+I+"+*").length||z.push(".#.+[+~]")}),r(function(t){var e=N.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&z.push("name"+nt+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||z.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),z.push(",.*:")})),(w.matchesSelector=gt.test(O=D.matches||D.webkitMatchesSelector||D.mozMatchesSelector||D.oMatchesSelector||D.msMatchesSelector))&&r(function(t){w.disconnectedMatch=O.call(t,"div"),O.call(t,"[s!='']:x"),P.push("!=",ot)}),z=z.length&&new RegExp(z.join("|")),P=P.length&&new RegExp(P.join("|")),e=gt.test(D.compareDocumentPosition),L=e||gt.test(D.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},W=e?function(t,e){if(t===e)return F=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n?n:(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!w.sortDetached&&e.compareDocumentPosition(t)===n?t===N||t.ownerDocument===q&&L(q,t)?-1:e===N||e.ownerDocument===q&&L(q,e)?1:T?tt(T,t)-tt(T,e):0:4&n?-1:1)}:function(t,e){if(t===e)return F=!0,0;var n,i=0,r=t.parentNode,o=e.parentNode,s=[t],u=[e];if(!r||!o)return t===N?-1:e===N?1:r?-1:o?1:T?tt(T,t)-tt(T,e):0;if(r===o)return a(t,e);for(n=t;n=n.parentNode;)s.unshift(n);for(n=e;n=n.parentNode;)u.unshift(n);for(;s[i]===u[i];)i++;return i?a(s[i],u[i]):s[i]===q?-1:u[i]===q?1:0},N):N},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==N&&R(t),n=n.replace(ct,"='$1']"),w.matchesSelector&&$&&!U[n+" "]&&(!P||!P.test(n))&&(!z||!z.test(n)))try{var i=O.call(t,n);if(i||w.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(r){}return e(n,N,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==N&&R(t),L(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==N&&R(t);var n=x.attrHandle[e.toLowerCase()],i=n&&Y.call(x.attrHandle,e.toLowerCase())?n(t,e,!$):void 0;return void 0!==i?i:w.attributes||!$?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],i=0,r=0;if(F=!w.detectDuplicates,T=!w.sortStable&&t.slice(0),t.sort(W),F){for(;e=t[r++];)e===t[r]&&(i=n.push(r));for(;i--;)t.splice(n[i],1)}return T=null,t},C=e.getText=function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=C(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i++];)n+=C(e);return n},x=e.selectors={cacheLength:50,createPseudo:i,match:dt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(bt,wt),t[3]=(t[3]||t[4]||t[5]||"").replace(bt,wt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return dt.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&ht.test(n)&&(e=M(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(bt,wt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=B[t+" "];return e||(e=new RegExp("(^|"+nt+")"+t+"("+nt+"|$)"))&&B(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,n,i){return function(r){var o=e.attr(r,t);return null==o?"!="===n:n?(o+="","="===n?o===i:"!="===n?o!==i:"^="===n?i&&0===o.indexOf(i):"*="===n?i&&o.indexOf(i)>-1:"$="===n?i&&o.slice(-i.length)===i:"~="===n?(" "+o.replace(at," ")+" ").indexOf(i)>-1:"|="===n?o===i||o.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(t,e,n,i,r){var o="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===i&&0===r?function(t){return!!t.parentNode}:function(e,n,u){var l,c,h,f,d,p,v=o!==a?"nextSibling":"previousSibling",g=e.parentNode,m=s&&e.nodeName.toLowerCase(),_=!u&&!s,y=!1;if(g){if(o){for(;v;){for(f=e;f=f[v];)if(s?f.nodeName.toLowerCase()===m:1===f.nodeType)return!1;p=v="only"===t&&!p&&"nextSibling"}return!0}if(p=[a?g.firstChild:g.lastChild],a&&_){for(f=g,h=f[I]||(f[I]={}),c=h[f.uniqueID]||(h[f.uniqueID]={}),l=c[t]||[],d=l[0]===j&&l[1],y=d&&l[2],f=d&&g.childNodes[d];f=++d&&f&&f[v]||(y=d=0)||p.pop();)if(1===f.nodeType&&++y&&f===e){c[t]=[j,d,y];break}}else if(_&&(f=e,h=f[I]||(f[I]={}),c=h[f.uniqueID]||(h[f.uniqueID]={}),l=c[t]||[],d=l[0]===j&&l[1],y=d),y===!1)for(;(f=++d&&f&&f[v]||(y=d=0)||p.pop())&&((s?f.nodeName.toLowerCase()!==m:1!==f.nodeType)||!++y||(_&&(h=f[I]||(f[I]={}),c=h[f.uniqueID]||(h[f.uniqueID]={}),c[t]=[j,y]),f!==e)););return y-=r,y===i||y%i===0&&y/i>=0}}},PSEUDO:function(t,n){var r,o=x.pseudos[t]||x.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return o[I]?o(n):o.length>1?(r=[t,t,"",n],x.setFilters.hasOwnProperty(t.toLowerCase())?i(function(t,e){for(var i,r=o(t,n),a=r.length;a--;)i=tt(t,r[a]),t[i]=!(e[i]=r[a])}):function(t){return o(t,0,r)}):o}},pseudos:{not:i(function(t){var e=[],n=[],r=k(t.replace(st,"$1"));return r[I]?i(function(t,e,n,i){for(var o,a=r(t,null,i,[]),s=t.length;s--;)(o=a[s])&&(t[s]=!(e[s]=o))}):function(t,i,o){return e[0]=t,r(e,null,o,n),e[0]=null,!n.pop()}}),has:i(function(t){return function(n){return e(t,n).length>0}}),contains:i(function(t){return t=t.replace(bt,wt),function(e){return(e.textContent||e.innerText||C(e)).indexOf(t)>-1}}),lang:i(function(t){return ft.test(t||"")||e.error("unsupported lang: "+t),
t=t.replace(bt,wt).toLowerCase(),function(e){var n;do if(n=$?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===D},focus:function(t){return t===N.activeElement&&(!N.hasFocus||N.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!x.pseudos.empty(t)},header:function(t){return vt.test(t.nodeName)},input:function(t){return pt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:l(function(){return[0]}),last:l(function(t,e){return[e-1]}),eq:l(function(t,e,n){return[0>n?n+e:n]}),even:l(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:l(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:l(function(t,e,n){for(var i=0>n?n+e:n;--i>=0;)t.push(i);return t}),gt:l(function(t,e,n){for(var i=0>n?n+e:n;++i<e;)t.push(i);return t})}},x.pseudos.nth=x.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[b]=s(b);for(b in{submit:!0,reset:!0})x.pseudos[b]=u(b);return h.prototype=x.filters=x.pseudos,x.setFilters=new h,M=e.tokenize=function(t,n){var i,r,o,a,s,u,l,c=V[t+" "];if(c)return n?0:c.slice(0);for(s=t,u=[],l=x.preFilter;s;){i&&!(r=ut.exec(s))||(r&&(s=s.slice(r[0].length)||s),u.push(o=[])),i=!1,(r=lt.exec(s))&&(i=r.shift(),o.push({value:i,type:r[0].replace(st," ")}),s=s.slice(i.length));for(a in x.filter)!(r=dt[a].exec(s))||l[a]&&!(r=l[a](r))||(i=r.shift(),o.push({value:i,type:a,matches:r}),s=s.slice(i.length));if(!i)break}return n?s.length:s?e.error(t):V(t,u).slice(0)},k=e.compile=function(t,e){var n,i=[],r=[],o=U[t+" "];if(!o){for(e||(e=M(t)),n=e.length;n--;)o=_(e[n]),o[I]?i.push(o):r.push(o);o=U(t,y(r,i)),o.selector=t}return o},E=e.select=function(t,e,n,i){var r,o,a,s,u,l="function"==typeof t&&t,h=!i&&M(t=l.selector||t);if(n=n||[],1===h.length){if(o=h[0]=h[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&w.getById&&9===e.nodeType&&$&&x.relative[o[1].type]){if(e=(x.find.ID(a.matches[0].replace(bt,wt),e)||[])[0],!e)return n;l&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(r=dt.needsContext.test(t)?0:o.length;r--&&(a=o[r],!x.relative[s=a.type]);)if((u=x.find[s])&&(i=u(a.matches[0].replace(bt,wt),_t.test(o[0].type)&&c(e.parentNode)||e))){if(o.splice(r,1),t=i.length&&f(o),!t)return Z.apply(n,i),n;break}}return(l||k(t,h))(i,e,!$,n,!e||_t.test(t)&&c(e.parentNode)||e),n},w.sortStable=I.split("").sort(W).join("")===I,w.detectDuplicates=!!F,R(),w.sortDetached=r(function(t){return 1&t.compareDocumentPosition(N.createElement("div"))}),r(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||o("type|href|height|width",function(t,e,n){return n?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),w.attributes&&r(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||o("value",function(t,e,n){return n||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),r(function(t){return null==t.getAttribute("disabled")})||o(et,function(t,e,n){var i;return n?void 0:t[e]===!0?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),e}(t);ot.find=ct,ot.expr=ct.selectors,ot.expr[":"]=ot.expr.pseudos,ot.uniqueSort=ot.unique=ct.uniqueSort,ot.text=ct.getText,ot.isXMLDoc=ct.isXML,ot.contains=ct.contains;var ht=function(t,e,n){for(var i=[],r=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&ot(t).is(n))break;i.push(t)}return i},ft=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},dt=ot.expr.match.needsContext,pt=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,vt=/^.[^:#\[\.,]*$/;ot.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?ot.find.matchesSelector(i,t)?[i]:[]:ot.find.matches(t,ot.grep(e,function(t){return 1===t.nodeType}))},ot.fn.extend({find:function(t){var e,n=this.length,i=[],r=this;if("string"!=typeof t)return this.pushStack(ot(t).filter(function(){for(e=0;n>e;e++)if(ot.contains(r[e],this))return!0}));for(e=0;n>e;e++)ot.find(t,r[e],i);return i=this.pushStack(n>1?ot.unique(i):i),i.selector=this.selector?this.selector+" "+t:t,i},filter:function(t){return this.pushStack(i(this,t||[],!1))},not:function(t){return this.pushStack(i(this,t||[],!0))},is:function(t){return!!i(this,"string"==typeof t&&dt.test(t)?ot(t):t||[],!1).length}});var gt,mt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,_t=ot.fn.init=function(t,e,n){var i,r;if(!t)return this;if(n=n||gt,"string"==typeof t){if(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:mt.exec(t),!i||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof ot?e[0]:e,ot.merge(this,ot.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:X,!0)),pt.test(i[1])&&ot.isPlainObject(e))for(i in e)ot.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return r=X.getElementById(i[2]),r&&r.parentNode&&(this.length=1,this[0]=r),this.context=X,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):ot.isFunction(t)?void 0!==n.ready?n.ready(t):t(ot):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),ot.makeArray(t,this))};_t.prototype=ot.fn,gt=ot(X);var yt=/^(?:parents|prev(?:Until|All))/,bt={children:!0,contents:!0,next:!0,prev:!0};ot.fn.extend({has:function(t){var e=ot(t,this),n=e.length;return this.filter(function(){for(var t=0;n>t;t++)if(ot.contains(this,e[t]))return!0})},closest:function(t,e){for(var n,i=0,r=this.length,o=[],a=dt.test(t)||"string"!=typeof t?ot(t,e||this.context):0;r>i;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&ot.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?ot.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?J.call(ot(t),this[0]):J.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(ot.uniqueSort(ot.merge(this.get(),ot(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),ot.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return ht(t,"parentNode")},parentsUntil:function(t,e,n){return ht(t,"parentNode",n)},next:function(t){return r(t,"nextSibling")},prev:function(t){return r(t,"previousSibling")},nextAll:function(t){return ht(t,"nextSibling")},prevAll:function(t){return ht(t,"previousSibling")},nextUntil:function(t,e,n){return ht(t,"nextSibling",n)},prevUntil:function(t,e,n){return ht(t,"previousSibling",n)},siblings:function(t){return ft((t.parentNode||{}).firstChild,t)},children:function(t){return ft(t.firstChild)},contents:function(t){return t.contentDocument||ot.merge([],t.childNodes)}},function(t,e){ot.fn[t]=function(n,i){var r=ot.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=ot.filter(i,r)),this.length>1&&(bt[t]||ot.uniqueSort(r),yt.test(t)&&r.reverse()),this.pushStack(r)}});var wt=/\S+/g;ot.Callbacks=function(t){t="string"==typeof t?o(t):ot.extend({},t);var e,n,i,r,a=[],s=[],u=-1,l=function(){for(r=t.once,i=e=!0;s.length;u=-1)for(n=s.shift();++u<a.length;)a[u].apply(n[0],n[1])===!1&&t.stopOnFalse&&(u=a.length,n=!1);t.memory||(n=!1),e=!1,r&&(a=n?[]:"")},c={add:function(){return a&&(n&&!e&&(u=a.length-1,s.push(n)),function i(e){ot.each(e,function(e,n){ot.isFunction(n)?t.unique&&c.has(n)||a.push(n):n&&n.length&&"string"!==ot.type(n)&&i(n)})}(arguments),n&&!e&&l()),this},remove:function(){return ot.each(arguments,function(t,e){for(var n;(n=ot.inArray(e,a,n))>-1;)a.splice(n,1),u>=n&&u--}),this},has:function(t){return t?ot.inArray(t,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return r=s=[],a=n="",this},disabled:function(){return!a},lock:function(){return r=s=[],n||(a=n=""),this},locked:function(){return!!r},fireWith:function(t,n){return r||(n=n||[],n=[t,n.slice?n.slice():n],s.push(n),e||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},ot.extend({Deferred:function(t){var e=[["resolve","done",ot.Callbacks("once memory"),"resolved"],["reject","fail",ot.Callbacks("once memory"),"rejected"],["notify","progress",ot.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var t=arguments;return ot.Deferred(function(n){ot.each(e,function(e,o){var a=ot.isFunction(t[e])&&t[e];r[o[1]](function(){var t=a&&a.apply(this,arguments);t&&ot.isFunction(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[o[0]+"With"](this===i?n.promise():this,a?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?ot.extend(t,i):i}},r={};return i.pipe=i.then,ot.each(e,function(t,o){var a=o[2],s=o[3];i[o[1]]=a.add,s&&a.add(function(){n=s},e[1^t][2].disable,e[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?i:this,arguments),this},r[o[0]+"With"]=a.fireWith}),i.promise(r),t&&t.call(r,r),r},when:function(t){var e,n,i,r=0,o=K.call(arguments),a=o.length,s=1!==a||t&&ot.isFunction(t.promise)?a:0,u=1===s?t:ot.Deferred(),l=function(t,n,i){return function(r){n[t]=this,i[t]=arguments.length>1?K.call(arguments):r,i===e?u.notifyWith(n,i):--s||u.resolveWith(n,i)}};if(a>1)for(e=new Array(a),n=new Array(a),i=new Array(a);a>r;r++)o[r]&&ot.isFunction(o[r].promise)?o[r].promise().progress(l(r,n,e)).done(l(r,i,o)).fail(u.reject):--s;return s||u.resolveWith(i,o),u.promise()}});var xt;ot.fn.ready=function(t){return ot.ready.promise().done(t),this},ot.extend({isReady:!1,readyWait:1,holdReady:function(t){t?ot.readyWait++:ot.ready(!0)},ready:function(t){(t===!0?--ot.readyWait:ot.isReady)||(ot.isReady=!0,t!==!0&&--ot.readyWait>0||(xt.resolveWith(X,[ot]),ot.fn.triggerHandler&&(ot(X).triggerHandler("ready"),ot(X).off("ready"))))}}),ot.ready.promise=function(e){return xt||(xt=ot.Deferred(),"complete"===X.readyState||"loading"!==X.readyState&&!X.documentElement.doScroll?t.setTimeout(ot.ready):(X.addEventListener("DOMContentLoaded",a),t.addEventListener("load",a))),xt.promise(e)},ot.ready.promise();var Ct=function(t,e,n,i,r,o,a){var s=0,u=t.length,l=null==n;if("object"===ot.type(n)){r=!0;for(s in n)Ct(t,e,s,n[s],!0,o,a)}else if(void 0!==i&&(r=!0,ot.isFunction(i)||(a=!0),l&&(a?(e.call(t,i),e=null):(l=e,e=function(t,e,n){return l.call(ot(t),n)})),e))for(;u>s;s++)e(t[s],n,a?i:i.call(t[s],s,e(t[s],n)));return r?t:l?e.call(t):u?e(t[0],n):o},At=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};s.uid=1,s.prototype={register:function(t,e){var n=e||{};return t.nodeType?t[this.expando]=n:Object.defineProperty(t,this.expando,{value:n,writable:!0,configurable:!0}),t[this.expando]},cache:function(t){if(!At(t))return{};var e=t[this.expando];return e||(e={},At(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var i,r=this.cache(t);if("string"==typeof e)r[e]=n;else for(i in e)r[i]=e[i];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][e]},access:function(t,e,n){var i;return void 0===e||e&&"string"==typeof e&&void 0===n?(i=this.get(t,e),void 0!==i?i:this.get(t,ot.camelCase(e))):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i,r,o=t[this.expando];if(void 0!==o){if(void 0===e)this.register(t);else{ot.isArray(e)?i=e.concat(e.map(ot.camelCase)):(r=ot.camelCase(e),e in o?i=[e,r]:(i=r,i=i in o?[i]:i.match(wt)||[])),n=i.length;for(;n--;)delete o[i[n]]}(void 0===e||ot.isEmptyObject(o))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!ot.isEmptyObject(e)}};var Mt=new s,kt=new s,Et=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,St=/[A-Z]/g;ot.extend({hasData:function(t){return kt.hasData(t)||Mt.hasData(t)},data:function(t,e,n){return kt.access(t,e,n)},removeData:function(t,e){kt.remove(t,e)},_data:function(t,e,n){return Mt.access(t,e,n)},_removeData:function(t,e){Mt.remove(t,e)}}),ot.fn.extend({data:function(t,e){var n,i,r,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(r=kt.get(o),1===o.nodeType&&!Mt.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&(i=a[n].name,0===i.indexOf("data-")&&(i=ot.camelCase(i.slice(5)),u(o,i,r[i])));Mt.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each(function(){kt.set(this,t)}):Ct(this,function(e){var n,i;if(o&&void 0===e){if(n=kt.get(o,t)||kt.get(o,t.replace(St,"-$&").toLowerCase()),void 0!==n)return n;if(i=ot.camelCase(t),n=kt.get(o,i),void 0!==n)return n;if(n=u(o,i,void 0),void 0!==n)return n}else i=ot.camelCase(t),this.each(function(){var n=kt.get(this,i);kt.set(this,i,e),t.indexOf("-")>-1&&void 0!==n&&kt.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){kt.remove(this,t)})}}),ot.extend({queue:function(t,e,n){var i;return t?(e=(e||"fx")+"queue",i=Mt.get(t,e),n&&(!i||ot.isArray(n)?i=Mt.access(t,e,ot.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(t,e){e=e||"fx";var n=ot.queue(t,e),i=n.length,r=n.shift(),o=ot._queueHooks(t,e),a=function(){ot.dequeue(t,e)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete o.stop,r.call(t,a,o)),!i&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return Mt.get(t,n)||Mt.access(t,n,{empty:ot.Callbacks("once memory").add(function(){Mt.remove(t,[e+"queue",n])})})}}),ot.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?ot.queue(this[0],t):void 0===e?this:this.each(function(){var n=ot.queue(this,t,e);ot._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&ot.dequeue(this,t)})},dequeue:function(t){return this.each(function(){ot.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,r=ot.Deferred(),o=this,a=this.length,s=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)n=Mt.get(o[a],t+"queueHooks"),n&&n.empty&&(i++,n.empty.add(s));return s(),r.promise(e)}});var Tt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ft=new RegExp("^(?:([+-])=|)("+Tt+")([a-z%]*)$","i"),Rt=["Top","Right","Bottom","Left"],Nt=function(t,e){return t=e||t,"none"===ot.css(t,"display")||!ot.contains(t.ownerDocument,t)},Dt=/^(?:checkbox|radio)$/i,$t=/<([\w:-]+)/,zt=/^$|\/(?:java|ecma)script/i,Pt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Pt.optgroup=Pt.option,Pt.tbody=Pt.tfoot=Pt.colgroup=Pt.caption=Pt.thead,Pt.th=Pt.td;var Ot=/<|&#?\w+;/;!function(){var t=X.createDocumentFragment(),e=t.appendChild(X.createElement("div")),n=X.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),e.appendChild(n),it.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",it.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var Lt=/^key/,It=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,qt=/^([^.]*)(?:\.(.+)|)/;ot.event={global:{},add:function(t,e,n,i,r){var o,a,s,u,l,c,h,f,d,p,v,g=Mt.get(t);if(g)for(n.handler&&(o=n,n=o.handler,r=o.selector),n.guid||(n.guid=ot.guid++),(u=g.events)||(u=g.events={}),(a=g.handle)||(a=g.handle=function(e){return"undefined"!=typeof ot&&ot.event.triggered!==e.type?ot.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(wt)||[""],l=e.length;l--;)s=qt.exec(e[l])||[],d=v=s[1],p=(s[2]||"").split(".").sort(),d&&(h=ot.event.special[d]||{},d=(r?h.delegateType:h.bindType)||d,h=ot.event.special[d]||{},c=ot.extend({type:d,origType:v,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&ot.expr.match.needsContext.test(r),namespace:p.join(".")},o),(f=u[d])||(f=u[d]=[],f.delegateCount=0,h.setup&&h.setup.call(t,i,p,a)!==!1||t.addEventListener&&t.addEventListener(d,a)),h.add&&(h.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),r?f.splice(f.delegateCount++,0,c):f.push(c),ot.event.global[d]=!0)},remove:function(t,e,n,i,r){var o,a,s,u,l,c,h,f,d,p,v,g=Mt.hasData(t)&&Mt.get(t);if(g&&(u=g.events)){for(e=(e||"").match(wt)||[""],l=e.length;l--;)if(s=qt.exec(e[l])||[],d=v=s[1],p=(s[2]||"").split(".").sort(),d){for(h=ot.event.special[d]||{},d=(i?h.delegateType:h.bindType)||d,f=u[d]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=f.length;o--;)c=f[o],!r&&v!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(f.splice(o,1),c.selector&&f.delegateCount--,h.remove&&h.remove.call(t,c));a&&!f.length&&(h.teardown&&h.teardown.call(t,p,g.handle)!==!1||ot.removeEvent(t,d,g.handle),delete u[d])}else for(d in u)ot.event.remove(t,d+e[l],n,i,!0);ot.isEmptyObject(u)&&Mt.remove(t,"handle events")}},dispatch:function(t){t=ot.event.fix(t);var e,n,i,r,o,a=[],s=K.call(arguments),u=(Mt.get(this,"events")||{})[t.type]||[],l=ot.event.special[t.type]||{};if(s[0]=t,t.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,t)!==!1){for(a=ot.event.handlers.call(this,t,u),e=0;(r=a[e++])&&!t.isPropagationStopped();)for(t.currentTarget=r.elem,n=0;(o=r.handlers[n++])&&!t.isImmediatePropagationStopped();)t.rnamespace&&!t.rnamespace.test(o.namespace)||(t.handleObj=o,t.data=o.data,i=((ot.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,s),void 0!==i&&(t.result=i)===!1&&(t.preventDefault(),t.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,i,r,o,a=[],s=e.delegateCount,u=t.target;if(s&&u.nodeType&&("click"!==t.type||isNaN(t.button)||t.button<1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&(u.disabled!==!0||"click"!==t.type)){for(i=[],n=0;s>n;n++)o=e[n],r=o.selector+" ",void 0===i[r]&&(i[r]=o.needsContext?ot(r,this).index(u)>-1:ot.find(r,this,null,[u]).length),i[r]&&i.push(o);i.length&&a.push({elem:u,handlers:i})}return s<e.length&&a.push({elem:this,handlers:e.slice(s)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,i,r,o=e.button;return null==t.pageX&&null!=e.clientX&&(n=t.target.ownerDocument||X,i=n.documentElement,r=n.body,t.pageX=e.clientX+(i&&i.scrollLeft||r&&r.scrollLeft||0)-(i&&i.clientLeft||r&&r.clientLeft||0),t.pageY=e.clientY+(i&&i.scrollTop||r&&r.scrollTop||0)-(i&&i.clientTop||r&&r.clientTop||0)),t.which||void 0===o||(t.which=1&o?1:2&o?3:4&o?2:0),t}},fix:function(t){if(t[ot.expando])return t;var e,n,i,r=t.type,o=t,a=this.fixHooks[r];for(a||(this.fixHooks[r]=a=It.test(r)?this.mouseHooks:Lt.test(r)?this.keyHooks:{}),i=a.props?this.props.concat(a.props):this.props,t=new ot.Event(o),e=i.length;e--;)n=i[e],t[n]=o[n];return t.target||(t.target=X),3===t.target.nodeType&&(t.target=t.target.parentNode),a.filter?a.filter(t,o):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==v()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===v()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&ot.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(t){return ot.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},ot.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},ot.Event=function(t,e){return this instanceof ot.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?d:p):this.type=t,e&&ot.extend(this,e),this.timeStamp=t&&t.timeStamp||ot.now(),void(this[ot.expando]=!0)):new ot.Event(t,e)},ot.Event.prototype={constructor:ot.Event,isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=d,t&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=d,t&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=d,t&&t.stopImmediatePropagation(),this.stopPropagation()}},ot.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){ot.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,r=t.relatedTarget,o=t.handleObj;return r&&(r===i||ot.contains(i,r))||(t.type=o.origType,n=o.handler.apply(this,arguments),t.type=e),n}}}),ot.fn.extend({on:function(t,e,n,i){return g(this,t,e,n,i)},one:function(t,e,n,i){return g(this,t,e,n,i,1)},off:function(t,e,n){var i,r;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,ot(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return e!==!1&&"function"!=typeof e||(n=e,e=void 0),n===!1&&(n=p),this.each(function(){ot.event.remove(this,t,n,e)})}});var jt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,Ht=/<script|<style|<link/i,Bt=/checked\s*(?:[^=]|=\s*.checked.)/i,Vt=/^true\/(.*)/,Ut=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;ot.extend({htmlPrefilter:function(t){return t.replace(jt,"<$1></$2>")},clone:function(t,e,n){var i,r,o,a,s=t.cloneNode(!0),u=ot.contains(t.ownerDocument,t);if(!(it.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||ot.isXMLDoc(t)))for(a=c(s),o=c(t),i=0,r=o.length;r>i;i++)w(o[i],a[i]);if(e)if(n)for(o=o||c(t),a=a||c(s),i=0,r=o.length;r>i;i++)b(o[i],a[i]);else b(t,s);return a=c(s,"script"),a.length>0&&h(a,!u&&c(t,"script")),s},cleanData:function(t){for(var e,n,i,r=ot.event.special,o=0;void 0!==(n=t[o]);o++)if(At(n)){if(e=n[Mt.expando]){if(e.events)for(i in e.events)r[i]?ot.event.remove(n,i):ot.removeEvent(n,i,e.handle);n[Mt.expando]=void 0}n[kt.expando]&&(n[kt.expando]=void 0)}}}),ot.fn.extend({domManip:x,detach:function(t){return C(this,t,!0)},remove:function(t){return C(this,t)},text:function(t){return Ct(this,function(t){return void 0===t?ot.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return x(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=m(this,t);e.appendChild(t)}})},prepend:function(){return x(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=m(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return x(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return x(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(ot.cleanData(c(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return ot.clone(this,t,e)})},html:function(t){return Ct(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Ht.test(t)&&!Pt[($t.exec(t)||["",""])[1].toLowerCase()]){t=ot.htmlPrefilter(t);try{for(;i>n;n++)e=this[n]||{},1===e.nodeType&&(ot.cleanData(c(e,!1)),e.innerHTML=t);e=0}catch(r){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return x(this,arguments,function(e){var n=this.parentNode;ot.inArray(this,t)<0&&(ot.cleanData(c(this)),n&&n.replaceChild(e,this))},t)}}),ot.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){ot.fn[t]=function(t){for(var n,i=[],r=ot(t),o=r.length-1,a=0;o>=a;a++)n=a===o?this:this.clone(!0),ot(r[a])[e](n),Z.apply(i,n.get());return this.pushStack(i)}});var Wt,Gt={HTML:"block",BODY:"block"},Yt=/^margin/,Xt=new RegExp("^("+Tt+")(?!px)[a-z%]+$","i"),Kt=function(e){var n=e.ownerDocument.defaultView;return n&&n.opener||(n=t),n.getComputedStyle(e)},Qt=function(t,e,n,i){var r,o,a={};for(o in e)a[o]=t.style[o],t.style[o]=e[o];r=n.apply(t,i||[]);for(o in e)t.style[o]=a[o];return r},Zt=X.documentElement;!function(){function e(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",s.innerHTML="",Zt.appendChild(a);var e=t.getComputedStyle(s);n="1%"!==e.top,o="2px"===e.marginLeft,i="4px"===e.width,s.style.marginRight="50%",r="4px"===e.marginRight,Zt.removeChild(a)}var n,i,r,o,a=X.createElement("div"),s=X.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",it.clearCloneStyle="content-box"===s.style.backgroundClip,a.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",a.appendChild(s),ot.extend(it,{pixelPosition:function(){return e(),n},boxSizingReliable:function(){return null==i&&e(),i},pixelMarginRight:function(){return null==i&&e(),r},reliableMarginLeft:function(){return null==i&&e(),o},reliableMarginRight:function(){var e,n=s.appendChild(X.createElement("div"));return n.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",s.style.width="1px",Zt.appendChild(a),e=!parseFloat(t.getComputedStyle(n).marginRight),Zt.removeChild(a),s.removeChild(n),e}}))}();var Jt=/^(none|table(?!-c[ea]).+)/,te={position:"absolute",visibility:"hidden",display:"block"},ee={letterSpacing:"0",fontWeight:"400"},ne=["Webkit","O","Moz","ms"],ie=X.createElement("div").style;ot.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=k(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,o,a,s=ot.camelCase(e),u=t.style;return e=ot.cssProps[s]||(ot.cssProps[s]=S(s)||s),a=ot.cssHooks[e]||ot.cssHooks[s],void 0===n?a&&"get"in a&&void 0!==(r=a.get(t,!1,i))?r:u[e]:(o=typeof n,"string"===o&&(r=Ft.exec(n))&&r[1]&&(n=l(t,e,r),o="number"),void(null!=n&&n===n&&("number"===o&&(n+=r&&r[3]||(ot.cssNumber[s]?"":"px")),it.clearCloneStyle||""!==n||0!==e.indexOf("background")||(u[e]="inherit"),a&&"set"in a&&void 0===(n=a.set(t,n,i))||(u[e]=n))))}},css:function(t,e,n,i){var r,o,a,s=ot.camelCase(e);return e=ot.cssProps[s]||(ot.cssProps[s]=S(s)||s),a=ot.cssHooks[e]||ot.cssHooks[s],a&&"get"in a&&(r=a.get(t,!0,n)),void 0===r&&(r=k(t,e,i)),"normal"===r&&e in ee&&(r=ee[e]),""===n||n?(o=parseFloat(r),n===!0||isFinite(o)?o||0:r):r}}),ot.each(["height","width"],function(t,e){ot.cssHooks[e]={get:function(t,n,i){return n?Jt.test(ot.css(t,"display"))&&0===t.offsetWidth?Qt(t,te,function(){return R(t,e,i)}):R(t,e,i):void 0},set:function(t,n,i){var r,o=i&&Kt(t),a=i&&F(t,e,i,"border-box"===ot.css(t,"boxSizing",!1,o),o);return a&&(r=Ft.exec(n))&&"px"!==(r[3]||"px")&&(t.style[e]=n,n=ot.css(t,e)),T(t,n,a)}}}),ot.cssHooks.marginLeft=E(it.reliableMarginLeft,function(t,e){return e?(parseFloat(k(t,"marginLeft"))||t.getBoundingClientRect().left-Qt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px":void 0}),ot.cssHooks.marginRight=E(it.reliableMarginRight,function(t,e){return e?Qt(t,{display:"inline-block"},k,[t,"marginRight"]):void 0}),ot.each({margin:"",padding:"",border:"Width"},function(t,e){ot.cssHooks[t+e]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];4>i;i++)r[t+Rt[i]+e]=o[i]||o[i-2]||o[0];return r}},Yt.test(t)||(ot.cssHooks[t+e].set=T)}),ot.fn.extend({css:function(t,e){return Ct(this,function(t,e,n){var i,r,o={},a=0;if(ot.isArray(e)){for(i=Kt(t),r=e.length;r>a;a++)o[e[a]]=ot.css(t,e[a],!1,i);return o}return void 0!==n?ot.style(t,e,n):ot.css(t,e)},t,e,arguments.length>1)},show:function(){return N(this,!0)},hide:function(){return N(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Nt(this)?ot(this).show():ot(this).hide()})}}),ot.Tween=D,D.prototype={constructor:D,init:function(t,e,n,i,r,o){this.elem=t,this.prop=n,this.easing=r||ot.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=o||(ot.cssNumber[n]?"":"px")},cur:function(){var t=D.propHooks[this.prop];return t&&t.get?t.get(this):D.propHooks._default.get(this)},run:function(t){var e,n=D.propHooks[this.prop];return this.options.duration?this.pos=e=ot.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):D.propHooks._default.set(this),this}},D.prototype.init.prototype=D.prototype,D.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=ot.css(t.elem,t.prop,""),e&&"auto"!==e?e:0)},set:function(t){ot.fx.step[t.prop]?ot.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[ot.cssProps[t.prop]]&&!ot.cssHooks[t.prop]?t.elem[t.prop]=t.now:ot.style(t.elem,t.prop,t.now+t.unit)}}},D.propHooks.scrollTop=D.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},ot.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},ot.fx=D.prototype.init,ot.fx.step={};var re,oe,ae=/^(?:toggle|show|hide)$/,se=/queueHooks$/;ot.Animation=ot.extend(I,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return l(n.elem,t,Ft.exec(e),n),n}]},tweener:function(t,e){ot.isFunction(t)?(e=t,t=["*"]):t=t.match(wt);for(var n,i=0,r=t.length;r>i;i++)n=t[i],I.tweeners[n]=I.tweeners[n]||[],I.tweeners[n].unshift(e)},prefilters:[O],prefilter:function(t,e){e?I.prefilters.unshift(t):I.prefilters.push(t)}}),ot.speed=function(t,e,n){var i=t&&"object"==typeof t?ot.extend({},t):{complete:n||!n&&e||ot.isFunction(t)&&t,duration:t,easing:n&&e||e&&!ot.isFunction(e)&&e};return i.duration=ot.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in ot.fx.speeds?ot.fx.speeds[i.duration]:ot.fx.speeds._default,null!=i.queue&&i.queue!==!0||(i.queue="fx"),i.old=i.complete,i.complete=function(){ot.isFunction(i.old)&&i.old.call(this),i.queue&&ot.dequeue(this,i.queue)},i},ot.fn.extend({fadeTo:function(t,e,n,i){return this.filter(Nt).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var r=ot.isEmptyObject(t),o=ot.speed(e,n,i),a=function(){var e=I(this,ot.extend({},t),o);(r||Mt.get(this,"finish"))&&e.stop(!0)};return a.finish=a,r||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,r=null!=t&&t+"queueHooks",o=ot.timers,a=Mt.get(this);if(r)a[r]&&a[r].stop&&i(a[r]);else for(r in a)a[r]&&a[r].stop&&se.test(r)&&i(a[r]);for(r=o.length;r--;)o[r].elem!==this||null!=t&&o[r].queue!==t||(o[r].anim.stop(n),e=!1,o.splice(r,1));!e&&n||ot.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=Mt.get(this),i=n[t+"queue"],r=n[t+"queueHooks"],o=ot.timers,a=i?i.length:0;for(n.finish=!0,ot.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;a>e;e++)i[e]&&i[e].finish&&i[e].finish.call(this);
delete n.finish})}}),ot.each(["toggle","show","hide"],function(t,e){var n=ot.fn[e];ot.fn[e]=function(t,i,r){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(z(e,!0),t,i,r)}}),ot.each({slideDown:z("show"),slideUp:z("hide"),slideToggle:z("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){ot.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),ot.timers=[],ot.fx.tick=function(){var t,e=0,n=ot.timers;for(re=ot.now();e<n.length;e++)t=n[e],t()||n[e]!==t||n.splice(e--,1);n.length||ot.fx.stop(),re=void 0},ot.fx.timer=function(t){ot.timers.push(t),t()?ot.fx.start():ot.timers.pop()},ot.fx.interval=13,ot.fx.start=function(){oe||(oe=t.setInterval(ot.fx.tick,ot.fx.interval))},ot.fx.stop=function(){t.clearInterval(oe),oe=null},ot.fx.speeds={slow:600,fast:200,_default:400},ot.fn.delay=function(e,n){return e=ot.fx?ot.fx.speeds[e]||e:e,n=n||"fx",this.queue(n,function(n,i){var r=t.setTimeout(n,e);i.stop=function(){t.clearTimeout(r)}})},function(){var t=X.createElement("input"),e=X.createElement("select"),n=e.appendChild(X.createElement("option"));t.type="checkbox",it.checkOn=""!==t.value,it.optSelected=n.selected,e.disabled=!0,it.optDisabled=!n.disabled,t=X.createElement("input"),t.value="t",t.type="radio",it.radioValue="t"===t.value}();var ue,le=ot.expr.attrHandle;ot.fn.extend({attr:function(t,e){return Ct(this,ot.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){ot.removeAttr(this,t)})}}),ot.extend({attr:function(t,e,n){var i,r,o=t.nodeType;return 3!==o&&8!==o&&2!==o?"undefined"==typeof t.getAttribute?ot.prop(t,e,n):(1===o&&ot.isXMLDoc(t)||(e=e.toLowerCase(),r=ot.attrHooks[e]||(ot.expr.match.bool.test(e)?ue:void 0)),void 0!==n?null===n?void ot.removeAttr(t,e):r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:(t.setAttribute(e,n+""),n):r&&"get"in r&&null!==(i=r.get(t,e))?i:(i=ot.find.attr(t,e),null==i?void 0:i)):void 0},attrHooks:{type:{set:function(t,e){if(!it.radioValue&&"radio"===e&&ot.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i,r=0,o=e&&e.match(wt);if(o&&1===t.nodeType)for(;n=o[r++];)i=ot.propFix[n]||n,ot.expr.match.bool.test(n)&&(t[i]=!1),t.removeAttribute(n)}}),ue={set:function(t,e,n){return e===!1?ot.removeAttr(t,n):t.setAttribute(n,n),n}},ot.each(ot.expr.match.bool.source.match(/\w+/g),function(t,e){var n=le[e]||ot.find.attr;le[e]=function(t,e,i){var r,o;return i||(o=le[e],le[e]=r,r=null!=n(t,e,i)?e.toLowerCase():null,le[e]=o),r}});var ce=/^(?:input|select|textarea|button)$/i,he=/^(?:a|area)$/i;ot.fn.extend({prop:function(t,e){return Ct(this,ot.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[ot.propFix[t]||t]})}}),ot.extend({prop:function(t,e,n){var i,r,o=t.nodeType;return 3!==o&&8!==o&&2!==o?(1===o&&ot.isXMLDoc(t)||(e=ot.propFix[e]||e,r=ot.propHooks[e]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:t[e]=n:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]):void 0},propHooks:{tabIndex:{get:function(t){var e=ot.find.attr(t,"tabindex");return e?parseInt(e,10):ce.test(t.nodeName)||he.test(t.nodeName)&&t.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),it.optSelected||(ot.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),ot.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ot.propFix[this.toLowerCase()]=this});var fe=/[\t\r\n\f]/g;ot.fn.extend({addClass:function(t){var e,n,i,r,o,a,s,u=0;if(ot.isFunction(t))return this.each(function(e){ot(this).addClass(t.call(this,e,q(this)))});if("string"==typeof t&&t)for(e=t.match(wt)||[];n=this[u++];)if(r=q(n),i=1===n.nodeType&&(" "+r+" ").replace(fe," ")){for(a=0;o=e[a++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");s=ot.trim(i),r!==s&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,i,r,o,a,s,u=0;if(ot.isFunction(t))return this.each(function(e){ot(this).removeClass(t.call(this,e,q(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(wt)||[];n=this[u++];)if(r=q(n),i=1===n.nodeType&&(" "+r+" ").replace(fe," ")){for(a=0;o=e[a++];)for(;i.indexOf(" "+o+" ")>-1;)i=i.replace(" "+o+" "," ");s=ot.trim(i),r!==s&&n.setAttribute("class",s)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):ot.isFunction(t)?this.each(function(n){ot(this).toggleClass(t.call(this,n,q(this),e),e)}):this.each(function(){var e,i,r,o;if("string"===n)for(i=0,r=ot(this),o=t.match(wt)||[];e=o[i++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else void 0!==t&&"boolean"!==n||(e=q(this),e&&Mt.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||t===!1?"":Mt.get(this,"__className__")||""))})},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&(" "+q(n)+" ").replace(fe," ").indexOf(e)>-1)return!0;return!1}});var de=/\r/g,pe=/[\x20\t\r\n\f]+/g;ot.fn.extend({val:function(t){var e,n,i,r=this[0];return arguments.length?(i=ot.isFunction(t),this.each(function(n){var r;1===this.nodeType&&(r=i?t.call(this,n,ot(this).val()):t,null==r?r="":"number"==typeof r?r+="":ot.isArray(r)&&(r=ot.map(r,function(t){return null==t?"":t+""})),e=ot.valHooks[this.type]||ot.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))})):r?(e=ot.valHooks[r.type]||ot.valHooks[r.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(n=e.get(r,"value"))?n:(n=r.value,"string"==typeof n?n.replace(de,""):null==n?"":n)):void 0}}),ot.extend({valHooks:{option:{get:function(t){var e=ot.find.attr(t,"value");return null!=e?e:ot.trim(ot.text(t)).replace(pe," ")}},select:{get:function(t){for(var e,n,i=t.options,r=t.selectedIndex,o="select-one"===t.type||0>r,a=o?null:[],s=o?r+1:i.length,u=0>r?s:o?r:0;s>u;u++)if(n=i[u],(n.selected||u===r)&&(it.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!ot.nodeName(n.parentNode,"optgroup"))){if(e=ot(n).val(),o)return e;a.push(e)}return a},set:function(t,e){for(var n,i,r=t.options,o=ot.makeArray(e),a=r.length;a--;)i=r[a],(i.selected=ot.inArray(ot.valHooks.option.get(i),o)>-1)&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),ot.each(["radio","checkbox"],function(){ot.valHooks[this]={set:function(t,e){return ot.isArray(e)?t.checked=ot.inArray(ot(t).val(),e)>-1:void 0}},it.checkOn||(ot.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var ve=/^(?:focusinfocus|focusoutblur)$/;ot.extend(ot.event,{trigger:function(e,n,i,r){var o,a,s,u,l,c,h,f=[i||X],d=nt.call(e,"type")?e.type:e,p=nt.call(e,"namespace")?e.namespace.split("."):[];if(a=s=i=i||X,3!==i.nodeType&&8!==i.nodeType&&!ve.test(d+ot.event.triggered)&&(d.indexOf(".")>-1&&(p=d.split("."),d=p.shift(),p.sort()),l=d.indexOf(":")<0&&"on"+d,e=e[ot.expando]?e:new ot.Event(d,"object"==typeof e&&e),e.isTrigger=r?2:3,e.namespace=p.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),n=null==n?[e]:ot.makeArray(n,[e]),h=ot.event.special[d]||{},r||!h.trigger||h.trigger.apply(i,n)!==!1)){if(!r&&!h.noBubble&&!ot.isWindow(i)){for(u=h.delegateType||d,ve.test(u+d)||(a=a.parentNode);a;a=a.parentNode)f.push(a),s=a;s===(i.ownerDocument||X)&&f.push(s.defaultView||s.parentWindow||t)}for(o=0;(a=f[o++])&&!e.isPropagationStopped();)e.type=o>1?u:h.bindType||d,c=(Mt.get(a,"events")||{})[e.type]&&Mt.get(a,"handle"),c&&c.apply(a,n),c=l&&a[l],c&&c.apply&&At(a)&&(e.result=c.apply(a,n),e.result===!1&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||h._default&&h._default.apply(f.pop(),n)!==!1||!At(i)||l&&ot.isFunction(i[d])&&!ot.isWindow(i)&&(s=i[l],s&&(i[l]=null),ot.event.triggered=d,i[d](),ot.event.triggered=void 0,s&&(i[l]=s)),e.result}},simulate:function(t,e,n){var i=ot.extend(new ot.Event,n,{type:t,isSimulated:!0});ot.event.trigger(i,null,e),i.isDefaultPrevented()&&n.preventDefault()}}),ot.fn.extend({trigger:function(t,e){return this.each(function(){ot.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];return n?ot.event.trigger(t,e,n,!0):void 0}}),ot.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){ot.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),ot.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),it.focusin="onfocusin"in t,it.focusin||ot.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){ot.event.simulate(e,t.target,ot.event.fix(t))};ot.event.special[e]={setup:function(){var i=this.ownerDocument||this,r=Mt.access(i,e);r||i.addEventListener(t,n,!0),Mt.access(i,e,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=Mt.access(i,e)-1;r?Mt.access(i,e,r):(i.removeEventListener(t,n,!0),Mt.remove(i,e))}}});var ge=t.location,me=ot.now(),_e=/\?/;ot.parseJSON=function(t){return JSON.parse(t+"")},ot.parseXML=function(e){var n;if(!e||"string"!=typeof e)return null;try{n=(new t.DOMParser).parseFromString(e,"text/xml")}catch(i){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||ot.error("Invalid XML: "+e),n};var ye=/#.*$/,be=/([?&])_=[^&]*/,we=/^(.*?):[ \t]*([^\r\n]*)$/gm,xe=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ce=/^(?:GET|HEAD)$/,Ae=/^\/\//,Me={},ke={},Ee="*/".concat("*"),Se=X.createElement("a");Se.href=ge.href,ot.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ge.href,type:"GET",isLocal:xe.test(ge.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ee,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ot.parseJSON,"text xml":ot.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?B(B(t,ot.ajaxSettings),e):B(ot.ajaxSettings,t)},ajaxPrefilter:j(Me),ajaxTransport:j(ke),ajax:function(e,n){function i(e,n,i,s){var l,h,_,y,w,C=n;2!==b&&(b=2,u&&t.clearTimeout(u),r=void 0,a=s||"",x.readyState=e>0?4:0,l=e>=200&&300>e||304===e,i&&(y=V(f,x,i)),y=U(f,y,x,l),l?(f.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(ot.lastModified[o]=w),w=x.getResponseHeader("etag"),w&&(ot.etag[o]=w)),204===e||"HEAD"===f.type?C="nocontent":304===e?C="notmodified":(C=y.state,h=y.data,_=y.error,l=!_)):(_=C,!e&&C||(C="error",0>e&&(e=0))),x.status=e,x.statusText=(n||C)+"",l?v.resolveWith(d,[h,C,x]):v.rejectWith(d,[x,C,_]),x.statusCode(m),m=void 0,c&&p.trigger(l?"ajaxSuccess":"ajaxError",[x,f,l?h:_]),g.fireWith(d,[x,C]),c&&(p.trigger("ajaxComplete",[x,f]),--ot.active||ot.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=void 0),n=n||{};var r,o,a,s,u,l,c,h,f=ot.ajaxSetup({},n),d=f.context||f,p=f.context&&(d.nodeType||d.jquery)?ot(d):ot.event,v=ot.Deferred(),g=ot.Callbacks("once memory"),m=f.statusCode||{},_={},y={},b=0,w="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(2===b){if(!s)for(s={};e=we.exec(a);)s[e[1].toLowerCase()]=e[2];e=s[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===b?a:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return b||(t=y[n]=y[n]||t,_[t]=e),this},overrideMimeType:function(t){return b||(f.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>b)for(e in t)m[e]=[m[e],t[e]];else x.always(t[x.status]);return this},abort:function(t){var e=t||w;return r&&r.abort(e),i(0,e),this}};if(v.promise(x).complete=g.add,x.success=x.done,x.error=x.fail,f.url=((e||f.url||ge.href)+"").replace(ye,"").replace(Ae,ge.protocol+"//"),f.type=n.method||n.type||f.method||f.type,f.dataTypes=ot.trim(f.dataType||"*").toLowerCase().match(wt)||[""],null==f.crossDomain){l=X.createElement("a");try{l.href=f.url,l.href=l.href,f.crossDomain=Se.protocol+"//"+Se.host!=l.protocol+"//"+l.host}catch(C){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=ot.param(f.data,f.traditional)),H(Me,f,n,x),2===b)return x;c=ot.event&&f.global,c&&0===ot.active++&&ot.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Ce.test(f.type),o=f.url,f.hasContent||(f.data&&(o=f.url+=(_e.test(o)?"&":"?")+f.data,delete f.data),f.cache===!1&&(f.url=be.test(o)?o.replace(be,"$1_="+me++):o+(_e.test(o)?"&":"?")+"_="+me++)),f.ifModified&&(ot.lastModified[o]&&x.setRequestHeader("If-Modified-Since",ot.lastModified[o]),ot.etag[o]&&x.setRequestHeader("If-None-Match",ot.etag[o])),(f.data&&f.hasContent&&f.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",f.contentType),x.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Ee+"; q=0.01":""):f.accepts["*"]);for(h in f.headers)x.setRequestHeader(h,f.headers[h]);if(f.beforeSend&&(f.beforeSend.call(d,x,f)===!1||2===b))return x.abort();w="abort";for(h in{success:1,error:1,complete:1})x[h](f[h]);if(r=H(ke,f,n,x)){if(x.readyState=1,c&&p.trigger("ajaxSend",[x,f]),2===b)return x;f.async&&f.timeout>0&&(u=t.setTimeout(function(){x.abort("timeout")},f.timeout));try{b=1,r.send(_,i)}catch(C){if(!(2>b))throw C;i(-1,C)}}else i(-1,"No Transport");return x},getJSON:function(t,e,n){return ot.get(t,e,n,"json")},getScript:function(t,e){return ot.get(t,void 0,e,"script")}}),ot.each(["get","post"],function(t,e){ot[e]=function(t,n,i,r){return ot.isFunction(n)&&(r=r||i,i=n,n=void 0),ot.ajax(ot.extend({url:t,type:e,dataType:r,data:n,success:i},ot.isPlainObject(t)&&t))}}),ot._evalUrl=function(t){return ot.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},ot.fn.extend({wrapAll:function(t){var e;return ot.isFunction(t)?this.each(function(e){ot(this).wrapAll(t.call(this,e))}):(this[0]&&(e=ot(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return ot.isFunction(t)?this.each(function(e){ot(this).wrapInner(t.call(this,e))}):this.each(function(){var e=ot(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=ot.isFunction(t);return this.each(function(n){ot(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){ot.nodeName(this,"body")||ot(this).replaceWith(this.childNodes)}).end()}}),ot.expr.filters.hidden=function(t){return!ot.expr.filters.visible(t)},ot.expr.filters.visible=function(t){return t.offsetWidth>0||t.offsetHeight>0||t.getClientRects().length>0};var Te=/%20/g,Fe=/\[\]$/,Re=/\r?\n/g,Ne=/^(?:submit|button|image|reset|file)$/i,De=/^(?:input|select|textarea|keygen)/i;ot.param=function(t,e){var n,i=[],r=function(t,e){e=ot.isFunction(e)?e():null==e?"":e,i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=ot.ajaxSettings&&ot.ajaxSettings.traditional),ot.isArray(t)||t.jquery&&!ot.isPlainObject(t))ot.each(t,function(){r(this.name,this.value)});else for(n in t)W(n,t[n],e,r);return i.join("&").replace(Te,"+")},ot.fn.extend({serialize:function(){return ot.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=ot.prop(this,"elements");return t?ot.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!ot(this).is(":disabled")&&De.test(this.nodeName)&&!Ne.test(t)&&(this.checked||!Dt.test(t))}).map(function(t,e){var n=ot(this).val();return null==n?null:ot.isArray(n)?ot.map(n,function(t){return{name:e.name,value:t.replace(Re,"\r\n")}}):{name:e.name,value:n.replace(Re,"\r\n")}}).get()}}),ot.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(e){}};var $e={0:200,1223:204},ze=ot.ajaxSettings.xhr();it.cors=!!ze&&"withCredentials"in ze,it.ajax=ze=!!ze,ot.ajaxTransport(function(e){var n,i;return it.cors||ze&&!e.crossDomain?{send:function(r,o){var a,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(a in r)s.setRequestHeader(a,r[a]);n=function(t){return function(){n&&(n=i=s.onload=s.onerror=s.onabort=s.onreadystatechange=null,"abort"===t?s.abort():"error"===t?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o($e[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),i=s.onerror=n("error"),void 0!==s.onabort?s.onabort=i:s.onreadystatechange=function(){4===s.readyState&&t.setTimeout(function(){n&&i()})},n=n("abort");try{s.send(e.hasContent&&e.data||null)}catch(u){if(n)throw u}},abort:function(){n&&n()}}:void 0}),ot.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return ot.globalEval(t),t}}}),ot.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),ot.ajaxTransport("script",function(t){if(t.crossDomain){var e,n;return{send:function(i,r){e=ot("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&r("error"===t.type?404:200,t.type)}),X.head.appendChild(e[0])},abort:function(){n&&n()}}}});var Pe=[],Oe=/(=)\?(?=&|$)|\?\?/;ot.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Pe.pop()||ot.expando+"_"+me++;return this[t]=!0,t}}),ot.ajaxPrefilter("json jsonp",function(e,n,i){var r,o,a,s=e.jsonp!==!1&&(Oe.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Oe.test(e.data)&&"data");return s||"jsonp"===e.dataTypes[0]?(r=e.jsonpCallback=ot.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Oe,"$1"+r):e.jsonp!==!1&&(e.url+=(_e.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return a||ot.error(r+" was not called"),a[0]},e.dataTypes[0]="json",o=t[r],t[r]=function(){a=arguments},i.always(function(){void 0===o?ot(t).removeProp(r):t[r]=o,e[r]&&(e.jsonpCallback=n.jsonpCallback,Pe.push(r)),a&&ot.isFunction(o)&&o(a[0]),a=o=void 0}),"script"):void 0}),ot.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||X;var i=pt.exec(t),r=!n&&[];return i?[e.createElement(i[1])]:(i=f([t],e,r),r&&r.length&&ot(r).remove(),ot.merge([],i.childNodes))};var Le=ot.fn.load;ot.fn.load=function(t,e,n){if("string"!=typeof t&&Le)return Le.apply(this,arguments);var i,r,o,a=this,s=t.indexOf(" ");return s>-1&&(i=ot.trim(t.slice(s)),t=t.slice(0,s)),ot.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(r="POST"),a.length>0&&ot.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done(function(t){o=arguments,a.html(i?ot("<div>").append(ot.parseHTML(t)).find(i):t)}).always(n&&function(t,e){a.each(function(){n.apply(this,o||[t.responseText,e,t])})}),this},ot.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){ot.fn[e]=function(t){return this.on(e,t)}}),ot.expr.filters.animated=function(t){return ot.grep(ot.timers,function(e){return t===e.elem}).length},ot.offset={setOffset:function(t,e,n){var i,r,o,a,s,u,l,c=ot.css(t,"position"),h=ot(t),f={};"static"===c&&(t.style.position="relative"),s=h.offset(),o=ot.css(t,"top"),u=ot.css(t,"left"),l=("absolute"===c||"fixed"===c)&&(o+u).indexOf("auto")>-1,l?(i=h.position(),a=i.top,r=i.left):(a=parseFloat(o)||0,r=parseFloat(u)||0),ot.isFunction(e)&&(e=e.call(t,n,ot.extend({},s))),null!=e.top&&(f.top=e.top-s.top+a),null!=e.left&&(f.left=e.left-s.left+r),"using"in e?e.using.call(t,f):h.css(f)}},ot.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){ot.offset.setOffset(this,t,e)});var e,n,i=this[0],r={top:0,left:0},o=i&&i.ownerDocument;return o?(e=o.documentElement,ot.contains(e,i)?(r=i.getBoundingClientRect(),n=G(o),{top:r.top+n.pageYOffset-e.clientTop,left:r.left+n.pageXOffset-e.clientLeft}):r):void 0},position:function(){if(this[0]){var t,e,n=this[0],i={top:0,left:0};return"fixed"===ot.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),ot.nodeName(t[0],"html")||(i=t.offset()),i.top+=ot.css(t[0],"borderTopWidth",!0),i.left+=ot.css(t[0],"borderLeftWidth",!0)),{top:e.top-i.top-ot.css(n,"marginTop",!0),left:e.left-i.left-ot.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===ot.css(t,"position");)t=t.offsetParent;return t||Zt})}}),ot.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n="pageYOffset"===e;ot.fn[t]=function(i){return Ct(this,function(t,i,r){var o=G(t);return void 0===r?o?o[e]:t[i]:void(o?o.scrollTo(n?o.pageXOffset:r,n?r:o.pageYOffset):t[i]=r)},t,i,arguments.length)}}),ot.each(["top","left"],function(t,e){ot.cssHooks[e]=E(it.pixelPosition,function(t,n){return n?(n=k(t,e),Xt.test(n)?ot(t).position()[e]+"px":n):void 0})}),ot.each({Height:"height",Width:"width"},function(t,e){ot.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,i){ot.fn[i]=function(i,r){var o=arguments.length&&(n||"boolean"!=typeof i),a=n||(i===!0||r===!0?"margin":"border");return Ct(this,function(e,n,i){var r;return ot.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+t],r["scroll"+t],e.body["offset"+t],r["offset"+t],r["client"+t])):void 0===i?ot.css(e,n,a):ot.style(e,n,i,a)},e,o?i:void 0,o,null)}})}),ot.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},size:function(){return this.length}}),ot.fn.andSelf=ot.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ot});var Ie=t.jQuery,qe=t.$;return ot.noConflict=function(e){return t.$===ot&&(t.$=qe),e&&t.jQuery===ot&&(t.jQuery=Ie),ot},e||(t.jQuery=t.$=ot),ot}),!function(){function t(t){return t&&(t.ownerDocument||t.document||t).documentElement}function e(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}function n(t,e){return e>t?-1:t>e?1:t>=e?0:NaN}function i(t){return null===t?NaN:+t}function r(t){return!isNaN(t)}function o(t){return{left:function(e,n,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=e.length);r>i;){var o=i+r>>>1;t(e[o],n)<0?i=o+1:r=o}return i},right:function(e,n,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=e.length);r>i;){var o=i+r>>>1;t(e[o],n)>0?r=o:i=o+1}return i}}}function a(t){return t.length}function s(t){for(var e=1;t*e%1;)e*=10;return e}function u(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function l(){this._=Object.create(null)}function c(t){return(t+="")===wa||t[0]===xa?xa+t:t}function h(t){return(t+="")[0]===xa?t.slice(1):t}function f(t){return c(t)in this._}function d(t){return(t=c(t))in this._&&delete this._[t]}function p(){var t=[];for(var e in this._)t.push(h(e));return t}function v(){var t=0;for(var e in this._)++t;return t}function g(){for(var t in this._)return!1;return!0}function m(){this._=Object.create(null)}function _(t){return t}function y(t,e,n){return function(){var i=n.apply(e,arguments);return i===e?t:i}}function b(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,i=Ca.length;i>n;++n){var r=Ca[n]+e;if(r in t)return r}}function w(){}function x(){}function C(t){function e(){for(var e,i=n,r=-1,o=i.length;++r<o;)(e=i[r].on)&&e.apply(this,arguments);return t}var n=[],i=new l;return e.on=function(e,r){var o,a=i.get(e);return arguments.length<2?a&&a.on:(a&&(a.on=null,n=n.slice(0,o=n.indexOf(a)).concat(n.slice(o+1)),i.remove(e)),r&&n.push(i.set(e,{on:r})),t)},e}function A(){ua.event.preventDefault()}function M(){for(var t,e=ua.event;t=e.sourceEvent;)e=t;return e}function k(t){for(var e=new x,n=0,i=arguments.length;++n<i;)e[arguments[n]]=C(e);return e.of=function(n,i){return function(r){try{var o=r.sourceEvent=ua.event;r.target=t,ua.event=r,e[r.type].apply(n,i)}finally{ua.event=o}}},e}function E(t){return Ma(t,Ta),t}function S(t){return"function"==typeof t?t:function(){return ka(t,this)}}function T(t){return"function"==typeof t?t:function(){return Ea(t,this)}}function F(t,e){function n(){this.removeAttribute(t)}function i(){this.removeAttributeNS(t.space,t.local)}function r(){this.setAttribute(t,e)}function o(){this.setAttributeNS(t.space,t.local,e)}function a(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}function s(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}return t=ua.ns.qualify(t),null==e?t.local?i:n:"function"==typeof e?t.local?s:a:t.local?o:r}function R(t){return t.trim().replace(/\s+/g," ")}function N(t){return new RegExp("(?:^|\\s+)"+ua.requote(t)+"(?:\\s+|$)","g")}function D(t){return(t+"").trim().split(/^|\s+/)}function $(t,e){function n(){for(var n=-1;++n<r;)t[n](this,e)}function i(){for(var n=-1,i=e.apply(this,arguments);++n<r;)t[n](this,i)}t=D(t).map(z);var r=t.length;return"function"==typeof e?i:n}function z(t){var e=N(t);return function(n,i){if(r=n.classList)return i?r.add(t):r.remove(t);var r=n.getAttribute("class")||"";i?(e.lastIndex=0,e.test(r)||n.setAttribute("class",R(r+" "+t))):n.setAttribute("class",R(r.replace(e," ")))}}function P(t,e,n){function i(){this.style.removeProperty(t)}function r(){this.style.setProperty(t,e,n)}function o(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}return null==e?i:"function"==typeof e?o:r}function O(t,e){function n(){delete this[t]}function i(){this[t]=e}function r(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}return null==e?n:"function"==typeof e?r:i}function L(t){function e(){var e=this.ownerDocument,n=this.namespaceURI;return n===Fa&&e.documentElement.namespaceURI===Fa?e.createElement(t):e.createElementNS(n,t)}function n(){return this.ownerDocument.createElementNS(t.space,t.local)}return"function"==typeof t?t:(t=ua.ns.qualify(t)).local?n:e}function I(){var t=this.parentNode;t&&t.removeChild(this)}function q(t){return{__data__:t}}function j(t){return function(){return Sa(this,t)}}function H(t){return arguments.length||(t=n),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}function B(t,e){for(var n=0,i=t.length;i>n;n++)for(var r,o=t[n],a=0,s=o.length;s>a;a++)(r=o[a])&&e(r,a,n);return t}function V(t){return Ma(t,Na),t}function U(t){var e,n;return function(i,r,o){var a,s=t[o].update,u=s.length;for(o!=n&&(n=o,e=0),r>=e&&(e=r+1);!(a=s[e])&&++e<u;);return a}}function W(t,e,n){function i(){var e=this[a];e&&(this.removeEventListener(t,e,e.$),delete this[a])}function r(){var r=u(e,ca(arguments));i.call(this),this.addEventListener(t,this[a]=r,r.$=n),r._=e}function o(){var e,n=new RegExp("^__on([^.]+)"+ua.requote(t)+"$");for(var i in this)if(e=i.match(n)){var r=this[i];this.removeEventListener(e[1],r,r.$),delete this[i]}}var a="__on"+t,s=t.indexOf("."),u=G;s>0&&(t=t.slice(0,s));var l=Da.get(t);return l&&(t=l,u=Y),s?e?r:i:e?w:o}function G(t,e){return function(n){var i=ua.event;ua.event=n,e[0]=this.__data__;try{t.apply(this,e)}finally{ua.event=i}}}function Y(t,e){var n=G(t,e);return function(t){var e=this,i=t.relatedTarget;i&&(i===e||8&i.compareDocumentPosition(e))||n.call(e,t)}}function X(n){var i=".dragsuppress-"+ ++za,r="click"+i,o=ua.select(e(n)).on("touchmove"+i,A).on("dragstart"+i,A).on("selectstart"+i,A);if(null==$a&&($a="onselectstart"in n?!1:b(n.style,"userSelect")),$a){var a=t(n).style,s=a[$a];a[$a]="none"}return function(t){if(o.on(i,null),$a&&(a[$a]=s),t){var e=function(){o.on(r,null)};o.on(r,function(){A(),e()},!0),setTimeout(e,0)}}}function K(t,n){n.changedTouches&&(n=n.changedTouches[0]);var i=t.ownerSVGElement||t;if(i.createSVGPoint){var r=i.createSVGPoint();if(0>Pa){var o=e(t);if(o.scrollX||o.scrollY){i=ua.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var a=i[0][0].getScreenCTM();Pa=!(a.f||a.e),i.remove()}}return Pa?(r.x=n.pageX,r.y=n.pageY):(r.x=n.clientX,r.y=n.clientY),r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var s=t.getBoundingClientRect();return[n.clientX-s.left-t.clientLeft,n.clientY-s.top-t.clientTop]}function Q(){return ua.event.changedTouches[0].identifier}function Z(t){return t>0?1:0>t?-1:0}function J(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function tt(t){return t>1?0:-1>t?Ia:Math.acos(t)}function et(t){return t>1?Ha:-1>t?-Ha:Math.asin(t)}function nt(t){return((t=Math.exp(t))-1/t)/2}function it(t){return((t=Math.exp(t))+1/t)/2}function rt(t){return((t=Math.exp(2*t))-1)/(t+1)}function ot(t){return(t=Math.sin(t/2))*t}function at(){}function st(t,e,n){return this instanceof st?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof st?new st(t.h,t.s,t.l):wt(""+t,xt,st):new st(t,e,n)}function ut(t,e,n){function i(t){return t>360?t-=360:0>t&&(t+=360),60>t?o+(a-o)*t/60:180>t?a:240>t?o+(a-o)*(240-t)/60:o}function r(t){return Math.round(255*i(t))}var o,a;return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:0>e?0:e>1?1:e,n=0>n?0:n>1?1:n,a=.5>=n?n*(1+e):n+e-n*e,o=2*n-a,new mt(r(t+120),r(t),r(t-120))}function lt(t,e,n){return this instanceof lt?(this.h=+t,this.c=+e,void(this.l=+n)):arguments.length<2?t instanceof lt?new lt(t.h,t.c,t.l):t instanceof ht?dt(t.l,t.a,t.b):dt((t=Ct((t=ua.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new lt(t,e,n)}function ct(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new ht(n,Math.cos(t*=Ba)*e,Math.sin(t)*e)}function ht(t,e,n){return this instanceof ht?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof ht?new ht(t.l,t.a,t.b):t instanceof lt?ct(t.h,t.c,t.l):Ct((t=mt(t)).r,t.g,t.b):new ht(t,e,n)}function ft(t,e,n){var i=(t+16)/116,r=i+e/500,o=i-n/200;return r=pt(r)*ts,i=pt(i)*es,o=pt(o)*ns,new mt(gt(3.2404542*r-1.5371385*i-.4985314*o),gt(-.969266*r+1.8760108*i+.041556*o),gt(.0556434*r-.2040259*i+1.0572252*o))}function dt(t,e,n){return t>0?new lt(Math.atan2(n,e)*Va,Math.sqrt(e*e+n*n),t):new lt(NaN,NaN,t)}function pt(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function vt(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function gt(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function mt(t,e,n){return this instanceof mt?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof mt?new mt(t.r,t.g,t.b):wt(""+t,mt,ut):new mt(t,e,n)}function _t(t){return new mt(t>>16,t>>8&255,255&t)}function yt(t){return _t(t)+""}function bt(t){return 16>t?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function wt(t,e,n){var i,r,o,a=0,s=0,u=0;if(i=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(r=i[2].split(","),i[1]){case"hsl":return n(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case"rgb":return e(Mt(r[0]),Mt(r[1]),Mt(r[2]))}return(o=os.get(t))?e(o.r,o.g,o.b):(null==t||"#"!==t.charAt(0)||isNaN(o=parseInt(t.slice(1),16))||(4===t.length?(a=(3840&o)>>4,a=a>>4|a,s=240&o,s=s>>4|s,u=15&o,u=u<<4|u):7===t.length&&(a=(16711680&o)>>16,s=(65280&o)>>8,u=255&o)),e(a,s,u))}function xt(t,e,n){var i,r,o=Math.min(t/=255,e/=255,n/=255),a=Math.max(t,e,n),s=a-o,u=(a+o)/2;return s?(r=.5>u?s/(a+o):s/(2-a-o),i=t==a?(e-n)/s+(n>e?6:0):e==a?(n-t)/s+2:(t-e)/s+4,i*=60):(i=NaN,r=u>0&&1>u?0:i),new st(i,r,u)}function Ct(t,e,n){t=At(t),e=At(e),n=At(n);var i=vt((.4124564*t+.3575761*e+.1804375*n)/ts),r=vt((.2126729*t+.7151522*e+.072175*n)/es),o=vt((.0193339*t+.119192*e+.9503041*n)/ns);return ht(116*r-16,500*(i-r),200*(r-o))}function At(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Mt(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function kt(t){return"function"==typeof t?t:function(){return t}}function Et(t){return function(e,n,i){return 2===arguments.length&&"function"==typeof n&&(i=n,n=null),St(e,n,t,i)}}function St(t,e,n,i){function r(){var t,e=u.status;if(!e&&Ft(u)||e>=200&&300>e||304===e){try{t=n.call(o,u)}catch(i){return void a.error.call(o,i);
}a.load.call(o,t)}else a.error.call(o,u)}var o={},a=ua.dispatch("beforesend","progress","load","error"),s={},u=new XMLHttpRequest,l=null;return!this.XDomainRequest||"withCredentials"in u||!/^(http(s)?:)?\/\//.test(t)||(u=new XDomainRequest),"onload"in u?u.onload=u.onerror=r:u.onreadystatechange=function(){u.readyState>3&&r()},u.onprogress=function(t){var e=ua.event;ua.event=t;try{a.progress.call(o,u)}finally{ua.event=e}},o.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?s[t]:(null==e?delete s[t]:s[t]=e+"",o)},o.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",o):e},o.responseType=function(t){return arguments.length?(l=t,o):l},o.response=function(t){return n=t,o},["get","post"].forEach(function(t){o[t]=function(){return o.send.apply(o,[t].concat(ca(arguments)))}}),o.send=function(n,i,r){if(2===arguments.length&&"function"==typeof i&&(r=i,i=null),u.open(n,t,!0),null==e||"accept"in s||(s.accept=e+",*/*"),u.setRequestHeader)for(var c in s)u.setRequestHeader(c,s[c]);return null!=e&&u.overrideMimeType&&u.overrideMimeType(e),null!=l&&(u.responseType=l),null!=r&&o.on("error",r).on("load",function(t){r(null,t)}),a.beforesend.call(o,u),u.send(null==i?null:i),o},o.abort=function(){return u.abort(),o},ua.rebind(o,a,"on"),null==i?o:o.get(Tt(i))}function Tt(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}function Ft(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}function Rt(t,e,n){var i=arguments.length;2>i&&(e=0),3>i&&(n=Date.now());var r=n+e,o={c:t,t:r,n:null};return ss?ss.n=o:as=o,ss=o,us||(ls=clearTimeout(ls),us=1,cs(Nt)),o}function Nt(){var t=Dt(),e=$t()-t;e>24?(isFinite(e)&&(clearTimeout(ls),ls=setTimeout(Nt,e)),us=0):(us=1,cs(Nt))}function Dt(){for(var t=Date.now(),e=as;e;)t>=e.t&&e.c(t-e.t)&&(e.c=null),e=e.n;return t}function $t(){for(var t,e=as,n=1/0;e;)e.c?(e.t<n&&(n=e.t),e=(t=e).n):e=t?t.n=e.n:as=e.n;return ss=t,n}function zt(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function Pt(t,e){var n=Math.pow(10,3*ba(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}}function Ot(t){var e=t.decimal,n=t.thousands,i=t.grouping,r=t.currency,o=i&&n?function(t,e){for(var r=t.length,o=[],a=0,s=i[0],u=0;r>0&&s>0&&(u+s+1>e&&(s=Math.max(1,e-u)),o.push(t.substring(r-=s,r+s)),!((u+=s+1)>e));)s=i[a=(a+1)%i.length];return o.reverse().join(n)}:_;return function(t){var n=fs.exec(t),i=n[1]||" ",a=n[2]||">",s=n[3]||"-",u=n[4]||"",l=n[5],c=+n[6],h=n[7],f=n[8],d=n[9],p=1,v="",g="",m=!1,_=!0;switch(f&&(f=+f.substring(1)),(l||"0"===i&&"="===a)&&(l=i="0",a="="),d){case"n":h=!0,d="g";break;case"%":p=100,g="%",d="f";break;case"p":p=100,g="%",d="r";break;case"b":case"o":case"x":case"X":"#"===u&&(v="0"+d.toLowerCase());case"c":_=!1;case"d":m=!0,f=0;break;case"s":p=-1,d="r"}"$"===u&&(v=r[0],g=r[1]),"r"!=d||f||(d="g"),null!=f&&("g"==d?f=Math.max(1,Math.min(21,f)):("e"==d||"f"==d)&&(f=Math.max(0,Math.min(20,f)))),d=ds.get(d)||Lt;var y=l&&h;return function(t){var n=g;if(m&&t%1)return"";var r=0>t||0===t&&0>1/t?(t=-t,"-"):"-"===s?"":s;if(0>p){var u=ua.formatPrefix(t,f);t=u.scale(t),n=u.symbol+g}else t*=p;t=d(t,f);var b,w,x=t.lastIndexOf(".");if(0>x){var C=_?t.lastIndexOf("e"):-1;0>C?(b=t,w=""):(b=t.substring(0,C),w=t.substring(C))}else b=t.substring(0,x),w=e+t.substring(x+1);!l&&h&&(b=o(b,1/0));var A=v.length+b.length+w.length+(y?0:r.length),M=c>A?new Array(A=c-A+1).join(i):"";return y&&(b=o(M+b,M.length?c-w.length:1/0)),r+=v,t=b+w,("<"===a?r+t+M:">"===a?M+r+t:"^"===a?M.substring(0,A>>=1)+r+t+M.substring(A):r+(y?t:M+t))+n}}}function Lt(t){return t+""}function It(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function qt(t,e,n){function i(e){var n=t(e),i=o(n,1);return i-e>e-n?n:i}function r(n){return e(n=t(new vs(n-1)),1),n}function o(t,n){return e(t=new vs(+t),n),t}function a(t,i,o){var a=r(t),s=[];if(o>1)for(;i>a;)n(a)%o||s.push(new Date(+a)),e(a,1);else for(;i>a;)s.push(new Date(+a)),e(a,1);return s}function s(t,e,n){try{vs=It;var i=new It;return i._=t,a(i,e,n)}finally{vs=Date}}t.floor=t,t.round=i,t.ceil=r,t.offset=o,t.range=a;var u=t.utc=jt(t);return u.floor=u,u.round=jt(i),u.ceil=jt(r),u.offset=jt(o),u.range=s,t}function jt(t){return function(e,n){try{vs=It;var i=new It;return i._=e,t(i,n)._}finally{vs=Date}}}function Ht(t){function e(t){function e(e){for(var n,r,o,a=[],s=-1,u=0;++s<i;)37===t.charCodeAt(s)&&(a.push(t.slice(u,s)),null!=(r=ms[n=t.charAt(++s)])&&(n=t.charAt(++s)),(o=S[n])&&(n=o(e,null==r?"e"===n?" ":"0":r)),a.push(n),u=s+1);return a.push(t.slice(u,s)),a.join("")}var i=t.length;return e.parse=function(e){var i={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},r=n(i,t,e,0);if(r!=e.length)return null;"p"in i&&(i.H=i.H%12+12*i.p);var o=null!=i.Z&&vs!==It,a=new(o?It:vs);return"j"in i?a.setFullYear(i.y,0,i.j):"W"in i||"U"in i?("w"in i||(i.w="W"in i?1:0),a.setFullYear(i.y,0,1),a.setFullYear(i.y,0,"W"in i?(i.w+6)%7+7*i.W-(a.getDay()+5)%7:i.w+7*i.U-(a.getDay()+6)%7)):a.setFullYear(i.y,i.m,i.d),a.setHours(i.H+(i.Z/100|0),i.M+i.Z%100,i.S,i.L),o?a._:a},e.toString=function(){return t},e}function n(t,e,n,i){for(var r,o,a,s=0,u=e.length,l=n.length;u>s;){if(i>=l)return-1;if(r=e.charCodeAt(s++),37===r){if(a=e.charAt(s++),o=T[a in ms?e.charAt(s++):a],!o||(i=o(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}function i(t,e,n){x.lastIndex=0;var i=x.exec(e.slice(n));return i?(t.w=C.get(i[0].toLowerCase()),n+i[0].length):-1}function r(t,e,n){b.lastIndex=0;var i=b.exec(e.slice(n));return i?(t.w=w.get(i[0].toLowerCase()),n+i[0].length):-1}function o(t,e,n){k.lastIndex=0;var i=k.exec(e.slice(n));return i?(t.m=E.get(i[0].toLowerCase()),n+i[0].length):-1}function a(t,e,n){A.lastIndex=0;var i=A.exec(e.slice(n));return i?(t.m=M.get(i[0].toLowerCase()),n+i[0].length):-1}function s(t,e,i){return n(t,S.c.toString(),e,i)}function u(t,e,i){return n(t,S.x.toString(),e,i)}function l(t,e,i){return n(t,S.X.toString(),e,i)}function c(t,e,n){var i=y.get(e.slice(n,n+=2).toLowerCase());return null==i?-1:(t.p=i,n)}var h=t.dateTime,f=t.date,d=t.time,p=t.periods,v=t.days,g=t.shortDays,m=t.months,_=t.shortMonths;e.utc=function(t){function n(t){try{vs=It;var e=new vs;return e._=t,i(e)}finally{vs=Date}}var i=e(t);return n.parse=function(t){try{vs=It;var e=i.parse(t);return e&&e._}finally{vs=Date}},n.toString=i.toString,n},e.multi=e.utc.multi=ue;var y=ua.map(),b=Vt(v),w=Ut(v),x=Vt(g),C=Ut(g),A=Vt(m),M=Ut(m),k=Vt(_),E=Ut(_);p.forEach(function(t,e){y.set(t.toLowerCase(),e)});var S={a:function(t){return g[t.getDay()]},A:function(t){return v[t.getDay()]},b:function(t){return _[t.getMonth()]},B:function(t){return m[t.getMonth()]},c:e(h),d:function(t,e){return Bt(t.getDate(),e,2)},e:function(t,e){return Bt(t.getDate(),e,2)},H:function(t,e){return Bt(t.getHours(),e,2)},I:function(t,e){return Bt(t.getHours()%12||12,e,2)},j:function(t,e){return Bt(1+ps.dayOfYear(t),e,3)},L:function(t,e){return Bt(t.getMilliseconds(),e,3)},m:function(t,e){return Bt(t.getMonth()+1,e,2)},M:function(t,e){return Bt(t.getMinutes(),e,2)},p:function(t){return p[+(t.getHours()>=12)]},S:function(t,e){return Bt(t.getSeconds(),e,2)},U:function(t,e){return Bt(ps.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return Bt(ps.mondayOfYear(t),e,2)},x:e(f),X:e(d),y:function(t,e){return Bt(t.getFullYear()%100,e,2)},Y:function(t,e){return Bt(t.getFullYear()%1e4,e,4)},Z:ae,"%":function(){return"%"}},T={a:i,A:r,b:o,B:a,c:s,d:te,e:te,H:ne,I:ne,j:ee,L:oe,m:Jt,M:ie,p:c,S:re,U:Gt,w:Wt,W:Yt,x:u,X:l,y:Kt,Y:Xt,Z:Qt,"%":se};return e}function Bt(t,e,n){var i=0>t?"-":"",r=(i?-t:t)+"",o=r.length;return i+(n>o?new Array(n-o+1).join(e)+r:r)}function Vt(t){return new RegExp("^(?:"+t.map(ua.requote).join("|")+")","i")}function Ut(t){for(var e=new l,n=-1,i=t.length;++n<i;)e.set(t[n].toLowerCase(),n);return e}function Wt(t,e,n){_s.lastIndex=0;var i=_s.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function Gt(t,e,n){_s.lastIndex=0;var i=_s.exec(e.slice(n));return i?(t.U=+i[0],n+i[0].length):-1}function Yt(t,e,n){_s.lastIndex=0;var i=_s.exec(e.slice(n));return i?(t.W=+i[0],n+i[0].length):-1}function Xt(t,e,n){_s.lastIndex=0;var i=_s.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function Kt(t,e,n){_s.lastIndex=0;var i=_s.exec(e.slice(n,n+2));return i?(t.y=Zt(+i[0]),n+i[0].length):-1}function Qt(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function Zt(t){return t+(t>68?1900:2e3)}function Jt(t,e,n){_s.lastIndex=0;var i=_s.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function te(t,e,n){_s.lastIndex=0;var i=_s.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function ee(t,e,n){_s.lastIndex=0;var i=_s.exec(e.slice(n,n+3));return i?(t.j=+i[0],n+i[0].length):-1}function ne(t,e,n){_s.lastIndex=0;var i=_s.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function ie(t,e,n){_s.lastIndex=0;var i=_s.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function re(t,e,n){_s.lastIndex=0;var i=_s.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function oe(t,e,n){_s.lastIndex=0;var i=_s.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function ae(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",i=ba(e)/60|0,r=ba(e)%60;return n+Bt(i,"0",2)+Bt(r,"0",2)}function se(t,e,n){ys.lastIndex=0;var i=ys.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function ue(t){for(var e=t.length,n=-1;++n<e;)t[n][0]=this(t[n][0]);return function(e){for(var n=0,i=t[n];!i[1](e);)i=t[++n];return i[0](e)}}function le(){}function ce(t,e,n){var i=n.s=t+e,r=i-t,o=i-r;n.t=t-o+(e-r)}function he(t,e){t&&Cs.hasOwnProperty(t.type)&&Cs[t.type](t,e)}function fe(t,e,n){var i,r=-1,o=t.length-n;for(e.lineStart();++r<o;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function de(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)fe(t[n],e,1);e.polygonEnd()}function pe(){function t(t,e){t*=Ba,e=e*Ba/2+Ia/4;var n=t-i,a=n>=0?1:-1,s=a*n,u=Math.cos(e),l=Math.sin(e),c=o*l,h=r*u+c*Math.cos(s),f=c*a*Math.sin(s);Ms.add(Math.atan2(f,h)),i=t,r=u,o=l}var e,n,i,r,o;ks.point=function(a,s){ks.point=t,i=(e=a)*Ba,r=Math.cos(s=(n=s)*Ba/2+Ia/4),o=Math.sin(s)},ks.lineEnd=function(){t(e,n)}}function ve(t){var e=t[0],n=t[1],i=Math.cos(n);return[i*Math.cos(e),i*Math.sin(e),Math.sin(n)]}function ge(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function me(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function _e(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function ye(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function be(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function we(t){return[Math.atan2(t[1],t[0]),et(t[2])]}function xe(t,e){return ba(t[0]-e[0])<Oa&&ba(t[1]-e[1])<Oa}function Ce(t,e){t*=Ba;var n=Math.cos(e*=Ba);Ae(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function Ae(t,e,n){++Es,Ts+=(t-Ts)/Es,Fs+=(e-Fs)/Es,Rs+=(n-Rs)/Es}function Me(){function t(t,r){t*=Ba;var o=Math.cos(r*=Ba),a=o*Math.cos(t),s=o*Math.sin(t),u=Math.sin(r),l=Math.atan2(Math.sqrt((l=n*u-i*s)*l+(l=i*a-e*u)*l+(l=e*s-n*a)*l),e*a+n*s+i*u);Ss+=l,Ns+=l*(e+(e=a)),Ds+=l*(n+(n=s)),$s+=l*(i+(i=u)),Ae(e,n,i)}var e,n,i;Ls.point=function(r,o){r*=Ba;var a=Math.cos(o*=Ba);e=a*Math.cos(r),n=a*Math.sin(r),i=Math.sin(o),Ls.point=t,Ae(e,n,i)}}function ke(){Ls.point=Ce}function Ee(){function t(t,e){t*=Ba;var n=Math.cos(e*=Ba),a=n*Math.cos(t),s=n*Math.sin(t),u=Math.sin(e),l=r*u-o*s,c=o*a-i*u,h=i*s-r*a,f=Math.sqrt(l*l+c*c+h*h),d=i*a+r*s+o*u,p=f&&-tt(d)/f,v=Math.atan2(f,d);zs+=p*l,Ps+=p*c,Os+=p*h,Ss+=v,Ns+=v*(i+(i=a)),Ds+=v*(r+(r=s)),$s+=v*(o+(o=u)),Ae(i,r,o)}var e,n,i,r,o;Ls.point=function(a,s){e=a,n=s,Ls.point=t,a*=Ba;var u=Math.cos(s*=Ba);i=u*Math.cos(a),r=u*Math.sin(a),o=Math.sin(s),Ae(i,r,o)},Ls.lineEnd=function(){t(e,n),Ls.lineEnd=ke,Ls.point=Ce}}function Se(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return n=e.invert(n,i),n&&t.invert(n[0],n[1])}),n}function Te(){return!0}function Fe(t,e,n,i,r){var o=[],a=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],i=t[e];if(xe(n,i)){r.lineStart();for(var s=0;e>s;++s)r.point((n=t[s])[0],n[1]);return void r.lineEnd()}var u=new Ne(n,t,null,!0),l=new Ne(n,null,u,!1);u.o=l,o.push(u),a.push(l),u=new Ne(i,t,null,!1),l=new Ne(i,null,u,!0),u.o=l,o.push(u),a.push(l)}}),a.sort(e),Re(o),Re(a),o.length){for(var s=0,u=n,l=a.length;l>s;++s)a[s].e=u=!u;for(var c,h,f=o[0];;){for(var d=f,p=!0;d.v;)if((d=d.n)===f)return;c=d.z,r.lineStart();do{if(d.v=d.o.v=!0,d.e){if(p)for(var s=0,l=c.length;l>s;++s)r.point((h=c[s])[0],h[1]);else i(d.x,d.n.x,1,r);d=d.n}else{if(p){c=d.p.z;for(var s=c.length-1;s>=0;--s)r.point((h=c[s])[0],h[1])}else i(d.x,d.p.x,-1,r);d=d.p}d=d.o,c=d.z,p=!p}while(!d.v);r.lineEnd()}}}function Re(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}function Ne(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function De(t,e,n,i){return function(r,o){function a(e,n){var i=r(e,n);t(e=i[0],n=i[1])&&o.point(e,n)}function s(t,e){var n=r(t,e);g.point(n[0],n[1])}function u(){_.point=s,g.lineStart()}function l(){_.point=a,g.lineEnd()}function c(t,e){v.push([t,e]);var n=r(t,e);b.point(n[0],n[1])}function h(){b.lineStart(),v=[]}function f(){c(v[0][0],v[0][1]),b.lineEnd();var t,e=b.clean(),n=y.buffer(),i=n.length;if(v.pop(),p.push(v),v=null,i)if(1&e){t=n[0];var r,i=t.length-1,a=-1;if(i>0){for(w||(o.polygonStart(),w=!0),o.lineStart();++a<i;)o.point((r=t[a])[0],r[1]);o.lineEnd()}}else i>1&&2&e&&n.push(n.pop().concat(n.shift())),d.push(n.filter($e))}var d,p,v,g=e(o),m=r.invert(i[0],i[1]),_={point:a,lineStart:u,lineEnd:l,polygonStart:function(){_.point=c,_.lineStart=h,_.lineEnd=f,d=[],p=[]},polygonEnd:function(){_.point=a,_.lineStart=u,_.lineEnd=l,d=ua.merge(d);var t=qe(m,p);d.length?(w||(o.polygonStart(),w=!0),Fe(d,Pe,t,n,o)):t&&(w||(o.polygonStart(),w=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),w&&(o.polygonEnd(),w=!1),d=p=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}},y=ze(),b=e(y),w=!1;return _}}function $e(t){return t.length>1}function ze(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:w,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function Pe(t,e){return((t=t.x)[0]<0?t[1]-Ha-Oa:Ha-t[1])-((e=e.x)[0]<0?e[1]-Ha-Oa:Ha-e[1])}function Oe(t){var e,n=NaN,i=NaN,r=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?Ia:-Ia,u=ba(o-n);ba(u-Ia)<Oa?(t.point(n,i=(i+a)/2>0?Ha:-Ha),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(s,i),t.point(o,i),e=0):r!==s&&u>=Ia&&(ba(n-r)<Oa&&(n-=r*Oa),ba(o-s)<Oa&&(o-=s*Oa),i=Le(n,i,o,a),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(s,i),e=0),t.point(n=o,i=a),r=s},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}}function Le(t,e,n,i){var r,o,a=Math.sin(t-n);return ba(a)>Oa?Math.atan((Math.sin(e)*(o=Math.cos(i))*Math.sin(n)-Math.sin(i)*(r=Math.cos(e))*Math.sin(t))/(r*o*a)):(e+i)/2}function Ie(t,e,n,i){var r;if(null==t)r=n*Ha,i.point(-Ia,r),i.point(0,r),i.point(Ia,r),i.point(Ia,0),i.point(Ia,-r),i.point(0,-r),i.point(-Ia,-r),i.point(-Ia,0),i.point(-Ia,r);else if(ba(t[0]-e[0])>Oa){var o=t[0]<e[0]?Ia:-Ia;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(e[0],e[1])}function qe(t,e){var n=t[0],i=t[1],r=[Math.sin(n),-Math.cos(n),0],o=0,a=0;Ms.reset();for(var s=0,u=e.length;u>s;++s){var l=e[s],c=l.length;if(c)for(var h=l[0],f=h[0],d=h[1]/2+Ia/4,p=Math.sin(d),v=Math.cos(d),g=1;;){g===c&&(g=0),t=l[g];var m=t[0],_=t[1]/2+Ia/4,y=Math.sin(_),b=Math.cos(_),w=m-f,x=w>=0?1:-1,C=x*w,A=C>Ia,M=p*y;if(Ms.add(Math.atan2(M*x*Math.sin(C),v*b+M*Math.cos(C))),o+=A?w+x*qa:w,A^f>=n^m>=n){var k=me(ve(h),ve(t));be(k);var E=me(r,k);be(E);var S=(A^w>=0?-1:1)*et(E[2]);(i>S||i===S&&(k[0]||k[1]))&&(a+=A^w>=0?1:-1)}if(!g++)break;f=m,p=y,v=b,h=t}}return(-Oa>o||Oa>o&&0>Ms)^1&a}function je(t){function e(t,e){return Math.cos(t)*Math.cos(e)>o}function n(t){var n,o,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(h,f){var d,p=[h,f],v=e(h,f),g=a?v?0:r(h,f):v?r(h+(0>h?Ia:-Ia),f):0;if(!n&&(l=u=v)&&t.lineStart(),v!==u&&(d=i(n,p),(xe(n,d)||xe(p,d))&&(p[0]+=Oa,p[1]+=Oa,v=e(p[0],p[1]))),v!==u)c=0,v?(t.lineStart(),d=i(p,n),t.point(d[0],d[1])):(d=i(n,p),t.point(d[0],d[1]),t.lineEnd()),n=d;else if(s&&n&&a^v){var m;g&o||!(m=i(p,n,!0))||(c=0,a?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1])))}!v||n&&xe(n,p)||t.point(p[0],p[1]),n=p,u=v,o=g},lineEnd:function(){u&&t.lineEnd(),n=null},clean:function(){return c|(l&&u)<<1}}}function i(t,e,n){var i=ve(t),r=ve(e),a=[1,0,0],s=me(i,r),u=ge(s,s),l=s[0],c=u-l*l;if(!c)return!n&&t;var h=o*u/c,f=-o*l/c,d=me(a,s),p=ye(a,h),v=ye(s,f);_e(p,v);var g=d,m=ge(p,g),_=ge(g,g),y=m*m-_*(ge(p,p)-1);if(!(0>y)){var b=Math.sqrt(y),w=ye(g,(-m-b)/_);if(_e(w,p),w=we(w),!n)return w;var x,C=t[0],A=e[0],M=t[1],k=e[1];C>A&&(x=C,C=A,A=x);var E=A-C,S=ba(E-Ia)<Oa,T=S||Oa>E;if(!S&&M>k&&(x=M,M=k,k=x),T?S?M+k>0^w[1]<(ba(w[0]-C)<Oa?M:k):M<=w[1]&&w[1]<=k:E>Ia^(C<=w[0]&&w[0]<=A)){var F=ye(g,(-m+b)/_);return _e(F,p),[w,we(F)]}}}function r(e,n){var i=a?t:Ia-t,r=0;return-i>e?r|=1:e>i&&(r|=2),-i>n?r|=4:n>i&&(r|=8),r}var o=Math.cos(t),a=o>0,s=ba(o)>Oa,u=vn(t,6*Ba);return De(e,n,u,a?[0,-t]:[-Ia,t-Ia])}function He(t,e,n,i){return function(r){var o,a=r.a,s=r.b,u=a.x,l=a.y,c=s.x,h=s.y,f=0,d=1,p=c-u,v=h-l;if(o=t-u,p||!(o>0)){if(o/=p,0>p){if(f>o)return;d>o&&(d=o)}else if(p>0){if(o>d)return;o>f&&(f=o)}if(o=n-u,p||!(0>o)){if(o/=p,0>p){if(o>d)return;o>f&&(f=o)}else if(p>0){if(f>o)return;d>o&&(d=o)}if(o=e-l,v||!(o>0)){if(o/=v,0>v){if(f>o)return;d>o&&(d=o)}else if(v>0){if(o>d)return;o>f&&(f=o)}if(o=i-l,v||!(0>o)){if(o/=v,0>v){if(o>d)return;o>f&&(f=o)}else if(v>0){if(f>o)return;d>o&&(d=o)}return f>0&&(r.a={x:u+f*p,y:l+f*v}),1>d&&(r.b={x:u+d*p,y:l+d*v}),r}}}}}}function Be(t,e,n,i){function r(i,r){return ba(i[0]-t)<Oa?r>0?0:3:ba(i[0]-n)<Oa?r>0?2:1:ba(i[1]-e)<Oa?r>0?1:0:r>0?3:2}function o(t,e){return a(t.x,e.x)}function a(t,e){var n=r(t,1),i=r(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){function u(t){for(var e=0,n=g.length,i=t[1],r=0;n>r;++r)for(var o,a=1,s=g[r],u=s.length,l=s[0];u>a;++a)o=s[a],l[1]<=i?o[1]>i&&J(l,o,t)>0&&++e:o[1]<=i&&J(l,o,t)<0&&--e,l=o;return 0!==e}function l(o,s,u,l){var c=0,h=0;if(null==o||(c=r(o,u))!==(h=r(s,u))||a(o,s)<0^u>0){do l.point(0===c||3===c?t:n,c>1?i:e);while((c=(c+u+4)%4)!==h)}else l.point(s[0],s[1])}function c(r,o){return r>=t&&n>=r&&o>=e&&i>=o}function h(t,e){c(t,e)&&s.point(t,e)}function f(){T.point=p,g&&g.push(m=[]),A=!0,C=!1,w=x=NaN}function d(){v&&(p(_,y),b&&C&&E.rejoin(),v.push(E.buffer())),T.point=h,C&&s.lineEnd()}function p(t,e){t=Math.max(-qs,Math.min(qs,t)),e=Math.max(-qs,Math.min(qs,e));var n=c(t,e);if(g&&m.push([t,e]),A)_=t,y=e,b=n,A=!1,n&&(s.lineStart(),s.point(t,e));else if(n&&C)s.point(t,e);else{var i={a:{x:w,y:x},b:{x:t,y:e}};S(i)?(C||(s.lineStart(),s.point(i.a.x,i.a.y)),s.point(i.b.x,i.b.y),n||s.lineEnd(),M=!1):n&&(s.lineStart(),s.point(t,e),M=!1)}w=t,x=e,C=n}var v,g,m,_,y,b,w,x,C,A,M,k=s,E=ze(),S=He(t,e,n,i),T={point:h,lineStart:f,lineEnd:d,polygonStart:function(){s=E,v=[],g=[],M=!0},polygonEnd:function(){s=k,v=ua.merge(v);var e=u([t,i]),n=M&&e,r=v.length;(n||r)&&(s.polygonStart(),n&&(s.lineStart(),l(null,null,1,s),s.lineEnd()),r&&Fe(v,o,e,l,s),s.polygonEnd()),v=g=m=null}};return T}}function Ve(t){var e=0,n=Ia/3,i=sn(t),r=i(e,n);return r.parallels=function(t){return arguments.length?i(e=t[0]*Ia/180,n=t[1]*Ia/180):[e/Ia*180,n/Ia*180]},r}function Ue(t,e){function n(t,e){var n=Math.sqrt(o-2*r*Math.sin(e))/r;return[n*Math.sin(t*=r),a-n*Math.cos(t)]}var i=Math.sin(t),r=(i+Math.sin(e))/2,o=1+i*(2*r-i),a=Math.sqrt(o)/r;return n.invert=function(t,e){var n=a-e;return[Math.atan2(t,n)/r,et((o-(t*t+n*n)*r*r)/(2*r))]},n}function We(){function t(t,e){Hs+=r*t-i*e,i=t,r=e}var e,n,i,r;Gs.point=function(o,a){Gs.point=t,e=i=o,n=r=a},Gs.lineEnd=function(){t(e,n)}}function Ge(t,e){Bs>t&&(Bs=t),t>Us&&(Us=t),Vs>e&&(Vs=e),e>Ws&&(Ws=e)}function Ye(){function t(t,e){a.push("M",t,",",e,o)}function e(t,e){a.push("M",t,",",e),s.point=n}function n(t,e){a.push("L",t,",",e)}function i(){s.point=t}function r(){a.push("Z")}var o=Xe(4.5),a=[],s={point:t,lineStart:function(){s.point=e},lineEnd:i,polygonStart:function(){s.lineEnd=r},polygonEnd:function(){s.lineEnd=i,s.point=t},pointRadius:function(t){return o=Xe(t),s},result:function(){if(a.length){var t=a.join("");return a=[],t}}};return s}function Xe(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Ke(t,e){Ts+=t,Fs+=e,++Rs}function Qe(){function t(t,i){var r=t-e,o=i-n,a=Math.sqrt(r*r+o*o);Ns+=a*(e+t)/2,Ds+=a*(n+i)/2,$s+=a,Ke(e=t,n=i)}var e,n;Xs.point=function(i,r){Xs.point=t,Ke(e=i,n=r)}}function Ze(){Xs.point=Ke}function Je(){function t(t,e){var n=t-i,o=e-r,a=Math.sqrt(n*n+o*o);Ns+=a*(i+t)/2,Ds+=a*(r+e)/2,$s+=a,a=r*t-i*e,zs+=a*(i+t),Ps+=a*(r+e),Os+=3*a,Ke(i=t,r=e)}var e,n,i,r;Xs.point=function(o,a){Xs.point=t,Ke(e=i=o,n=r=a)},Xs.lineEnd=function(){t(e,n)}}function tn(t){function e(e,n){t.moveTo(e+a,n),t.arc(e,n,a,0,qa)}function n(e,n){t.moveTo(e,n),s.point=i}function i(e,n){t.lineTo(e,n)}function r(){s.point=e}function o(){t.closePath()}var a=4.5,s={point:e,lineStart:function(){s.point=n},lineEnd:r,polygonStart:function(){s.lineEnd=o},polygonEnd:function(){s.lineEnd=r,s.point=e},pointRadius:function(t){return a=t,s},result:w};return s}function en(t){function e(t){return(s?i:n)(t)}function n(e){return on(e,function(n,i){n=t(n,i),e.point(n[0],n[1])})}function i(e){function n(n,i){n=t(n,i),e.point(n[0],n[1])}function i(){y=NaN,A.point=o,e.lineStart()}function o(n,i){var o=ve([n,i]),a=t(n,i);r(y,b,_,w,x,C,y=a[0],b=a[1],_=n,w=o[0],x=o[1],C=o[2],s,e),e.point(y,b)}function a(){A.point=n,e.lineEnd()}function u(){i(),A.point=l,A.lineEnd=c}function l(t,e){o(h=t,f=e),d=y,p=b,v=w,g=x,m=C,A.point=o}function c(){r(y,b,_,w,x,C,d,p,h,v,g,m,s,e),A.lineEnd=a,a()}var h,f,d,p,v,g,m,_,y,b,w,x,C,A={point:n,lineStart:i,lineEnd:a,polygonStart:function(){e.polygonStart(),A.lineStart=u},polygonEnd:function(){e.polygonEnd(),A.lineStart=i}};return A}function r(e,n,i,s,u,l,c,h,f,d,p,v,g,m){var _=c-e,y=h-n,b=_*_+y*y;if(b>4*o&&g--){var w=s+d,x=u+p,C=l+v,A=Math.sqrt(w*w+x*x+C*C),M=Math.asin(C/=A),k=ba(ba(C)-1)<Oa||ba(i-f)<Oa?(i+f)/2:Math.atan2(x,w),E=t(k,M),S=E[0],T=E[1],F=S-e,R=T-n,N=y*F-_*R;(N*N/b>o||ba((_*F+y*R)/b-.5)>.3||a>s*d+u*p+l*v)&&(r(e,n,i,s,u,l,S,T,k,w/=A,x/=A,C,g,m),m.point(S,T),r(S,T,k,w,x,C,c,h,f,d,p,v,g,m))}}var o=.5,a=Math.cos(30*Ba),s=16;return e.precision=function(t){return arguments.length?(s=(o=t*t)>0&&16,e):Math.sqrt(o)},e}function nn(t){var e=en(function(e,n){return t([e*Va,n*Va])});return function(t){return un(e(t))}}function rn(t){this.stream=t}function on(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function an(t){return sn(function(){return t})()}function sn(t){function e(t){return t=s(t[0]*Ba,t[1]*Ba),[t[0]*f+u,l-t[1]*f]}function n(t){return t=s.invert((t[0]-u)/f,(l-t[1])/f),t&&[t[0]*Va,t[1]*Va]}function i(){s=Se(a=hn(m,y,b),o);var t=o(v,g);return u=d-t[0]*f,l=p+t[1]*f,r()}function r(){return c&&(c.valid=!1,c=null),e}var o,a,s,u,l,c,h=en(function(t,e){return t=o(t,e),[t[0]*f+u,l-t[1]*f]}),f=150,d=480,p=250,v=0,g=0,m=0,y=0,b=0,w=Is,x=_,C=null,A=null;return e.stream=function(t){return c&&(c.valid=!1),c=un(w(a,h(x(t)))),c.valid=!0,c},e.clipAngle=function(t){return arguments.length?(w=null==t?(C=t,Is):je((C=+t)*Ba),r()):C},e.clipExtent=function(t){return arguments.length?(A=t,x=t?Be(t[0][0],t[0][1],t[1][0],t[1][1]):_,r()):A},e.scale=function(t){return arguments.length?(f=+t,i()):f},e.translate=function(t){return arguments.length?(d=+t[0],p=+t[1],i()):[d,p]},e.center=function(t){return arguments.length?(v=t[0]%360*Ba,g=t[1]%360*Ba,i()):[v*Va,g*Va]},e.rotate=function(t){return arguments.length?(m=t[0]%360*Ba,y=t[1]%360*Ba,b=t.length>2?t[2]%360*Ba:0,i()):[m*Va,y*Va,b*Va]},ua.rebind(e,h,"precision"),function(){return o=t.apply(this,arguments),e.invert=o.invert&&n,i()}}function un(t){return on(t,function(e,n){t.point(e*Ba,n*Ba)})}function ln(t,e){return[t,e]}function cn(t,e){return[t>Ia?t-qa:-Ia>t?t+qa:t,e]}function hn(t,e,n){return t?e||n?Se(dn(t),pn(e,n)):dn(t):e||n?pn(e,n):cn}function fn(t){return function(e,n){return e+=t,[e>Ia?e-qa:-Ia>e?e+qa:e,n]}}function dn(t){var e=fn(t);return e.invert=fn(-t),e}function pn(t,e){function n(t,e){var n=Math.cos(e),s=Math.cos(t)*n,u=Math.sin(t)*n,l=Math.sin(e),c=l*i+s*r;return[Math.atan2(u*o-c*a,s*i-l*r),et(c*o+u*a)]}var i=Math.cos(t),r=Math.sin(t),o=Math.cos(e),a=Math.sin(e);return n.invert=function(t,e){var n=Math.cos(e),s=Math.cos(t)*n,u=Math.sin(t)*n,l=Math.sin(e),c=l*o-u*a;return[Math.atan2(u*o+l*a,s*i+c*r),et(c*i-s*r)]},n}function vn(t,e){var n=Math.cos(t),i=Math.sin(t);return function(r,o,a,s){var u=a*e;null!=r?(r=gn(n,r),o=gn(n,o),(a>0?o>r:r>o)&&(r+=a*qa)):(r=t+a*qa,o=t-.5*u);for(var l,c=r;a>0?c>o:o>c;c-=u)s.point((l=we([n,-i*Math.cos(c),-i*Math.sin(c)]))[0],l[1])}}function gn(t,e){var n=ve(e);n[0]-=t,be(n);var i=tt(-n[1]);return((-n[2]<0?-i:i)+2*Math.PI-Oa)%(2*Math.PI)}function mn(t,e,n){var i=ua.range(t,e-Oa,n).concat(e);return function(t){return i.map(function(e){return[t,e]})}}function _n(t,e,n){var i=ua.range(t,e-Oa,n).concat(e);return function(t){return i.map(function(e){return[e,t]})}}function yn(t){return t.source}function bn(t){return t.target}function wn(t,e,n,i){var r=Math.cos(e),o=Math.sin(e),a=Math.cos(i),s=Math.sin(i),u=r*Math.cos(t),l=r*Math.sin(t),c=a*Math.cos(n),h=a*Math.sin(n),f=2*Math.asin(Math.sqrt(ot(i-e)+r*a*ot(n-t))),d=1/Math.sin(f),p=f?function(t){var e=Math.sin(t*=f)*d,n=Math.sin(f-t)*d,i=n*u+e*c,r=n*l+e*h,a=n*o+e*s;return[Math.atan2(r,i)*Va,Math.atan2(a,Math.sqrt(i*i+r*r))*Va]}:function(){return[t*Va,e*Va]};return p.distance=f,p}function xn(){function t(t,r){var o=Math.sin(r*=Ba),a=Math.cos(r),s=ba((t*=Ba)-e),u=Math.cos(s);Ks+=Math.atan2(Math.sqrt((s=a*Math.sin(s))*s+(s=i*o-n*a*u)*s),n*o+i*a*u),e=t,n=o,i=a}var e,n,i;Qs.point=function(r,o){e=r*Ba,n=Math.sin(o*=Ba),i=Math.cos(o),Qs.point=t},Qs.lineEnd=function(){Qs.point=Qs.lineEnd=w}}function Cn(t,e){function n(e,n){var i=Math.cos(e),r=Math.cos(n),o=t(i*r);return[o*r*Math.sin(e),o*Math.sin(n)]}return n.invert=function(t,n){var i=Math.sqrt(t*t+n*n),r=e(i),o=Math.sin(r),a=Math.cos(r);return[Math.atan2(t*o,i*a),Math.asin(i&&n*o/i)]},n}function An(t,e){function n(t,e){a>0?-Ha+Oa>e&&(e=-Ha+Oa):e>Ha-Oa&&(e=Ha-Oa);var n=a/Math.pow(r(e),o);return[n*Math.sin(o*t),a-n*Math.cos(o*t)]}var i=Math.cos(t),r=function(t){return Math.tan(Ia/4+t/2)},o=t===e?Math.sin(t):Math.log(i/Math.cos(e))/Math.log(r(e)/r(t)),a=i*Math.pow(r(t),o)/o;return o?(n.invert=function(t,e){var n=a-e,i=Z(o)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/o,2*Math.atan(Math.pow(a/i,1/o))-Ha]},n):kn}function Mn(t,e){function n(t,e){var n=o-e;return[n*Math.sin(r*t),o-n*Math.cos(r*t)]}var i=Math.cos(t),r=t===e?Math.sin(t):(i-Math.cos(e))/(e-t),o=i/r+t;return ba(r)<Oa?ln:(n.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/r,o-Z(r)*Math.sqrt(t*t+n*n)]},n)}function kn(t,e){return[t,Math.log(Math.tan(Ia/4+e/2))]}function En(t){var e,n=an(t),i=n.scale,r=n.translate,o=n.clipExtent;return n.scale=function(){var t=i.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=r.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var a=o.apply(n,arguments);if(a===n){if(e=null==t){var s=Ia*i(),u=r();o([[u[0]-s,u[1]-s],[u[0]+s,u[1]+s]])}}else e&&(a=null);return a},n.clipExtent(null)}function Sn(t,e){return[Math.log(Math.tan(Ia/4+e/2)),-t]}function Tn(t){return t[0]}function Fn(t){return t[1]}function Rn(t){for(var e=t.length,n=[0,1],i=2,r=2;e>r;r++){for(;i>1&&J(t[n[i-2]],t[n[i-1]],t[r])<=0;)--i;n[i++]=r}return n.slice(0,i)}function Nn(t,e){return t[0]-e[0]||t[1]-e[1]}function Dn(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function $n(t,e,n,i){var r=t[0],o=n[0],a=e[0]-r,s=i[0]-o,u=t[1],l=n[1],c=e[1]-u,h=i[1]-l,f=(s*(u-l)-h*(r-o))/(h*a-s*c);return[r+f*a,u+f*c]}function zn(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}function Pn(){ii(this),this.edge=this.site=this.circle=null}function On(t){var e=lu.pop()||new Pn;return e.site=t,e}function Ln(t){Yn(t),au.remove(t),lu.push(t),ii(t)}function In(t){var e=t.circle,n=e.x,i=e.cy,r={x:n,y:i},o=t.P,a=t.N,s=[t];Ln(t);for(var u=o;u.circle&&ba(n-u.circle.x)<Oa&&ba(i-u.circle.cy)<Oa;)o=u.P,s.unshift(u),Ln(u),u=o;s.unshift(u),Yn(u);for(var l=a;l.circle&&ba(n-l.circle.x)<Oa&&ba(i-l.circle.cy)<Oa;)a=l.N,s.push(l),Ln(l),l=a;s.push(l),Yn(l);var c,h=s.length;for(c=1;h>c;++c)l=s[c],u=s[c-1],ti(l.edge,u.site,l.site,r);u=s[0],l=s[h-1],l.edge=Zn(u.site,l.site,null,r),Gn(u),Gn(l)}function qn(t){for(var e,n,i,r,o=t.x,a=t.y,s=au._;s;)if(i=jn(s,a)-o,i>Oa)s=s.L;else{if(r=o-Hn(s,a),!(r>Oa)){i>-Oa?(e=s.P,n=s):r>-Oa?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}var u=On(t);if(au.insert(e,u),e||n){if(e===n)return Yn(e),n=On(e.site),au.insert(u,n),u.edge=n.edge=Zn(e.site,u.site),Gn(e),void Gn(n);if(!n)return void(u.edge=Zn(e.site,u.site));Yn(e),Yn(n);var l=e.site,c=l.x,h=l.y,f=t.x-c,d=t.y-h,p=n.site,v=p.x-c,g=p.y-h,m=2*(f*g-d*v),_=f*f+d*d,y=v*v+g*g,b={x:(g*_-d*y)/m+c,y:(f*y-v*_)/m+h};ti(n.edge,l,p,b),u.edge=Zn(l,t,null,b),n.edge=Zn(t,p,null,b),Gn(e),Gn(n)}}function jn(t,e){var n=t.site,i=n.x,r=n.y,o=r-e;if(!o)return i;var a=t.P;if(!a)return-(1/0);n=a.site;var s=n.x,u=n.y,l=u-e;if(!l)return s;var c=s-i,h=1/o-1/l,f=c/l;return h?(-f+Math.sqrt(f*f-2*h*(c*c/(-2*l)-u+l/2+r-o/2)))/h+i:(i+s)/2}function Hn(t,e){var n=t.N;if(n)return jn(n,e);var i=t.site;return i.y===e?i.x:1/0}function Bn(t){this.site=t,this.edges=[]}function Vn(t){for(var e,n,i,r,o,a,s,u,l,c,h=t[0][0],f=t[1][0],d=t[0][1],p=t[1][1],v=ou,g=v.length;g--;)if(o=v[g],o&&o.prepare())for(s=o.edges,u=s.length,a=0;u>a;)c=s[a].end(),i=c.x,r=c.y,l=s[++a%u].start(),e=l.x,n=l.y,(ba(i-e)>Oa||ba(r-n)>Oa)&&(s.splice(a,0,new ei(Jn(o.site,c,ba(i-h)<Oa&&p-r>Oa?{x:h,y:ba(e-h)<Oa?n:p}:ba(r-p)<Oa&&f-i>Oa?{x:ba(n-p)<Oa?e:f,y:p}:ba(i-f)<Oa&&r-d>Oa?{x:f,y:ba(e-f)<Oa?n:d}:ba(r-d)<Oa&&i-h>Oa?{x:ba(n-d)<Oa?e:h,y:d}:null),o.site,null)),++u)}function Un(t,e){return e.angle-t.angle}function Wn(){ii(this),this.x=this.y=this.arc=this.site=this.cy=null}function Gn(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,r=t.site,o=n.site;if(i!==o){var a=r.x,s=r.y,u=i.x-a,l=i.y-s,c=o.x-a,h=o.y-s,f=2*(u*h-l*c);if(!(f>=-La)){var d=u*u+l*l,p=c*c+h*h,v=(h*d-l*p)/f,g=(u*p-c*d)/f,h=g+s,m=cu.pop()||new Wn;m.arc=t,m.site=r,m.x=v+a,m.y=h+Math.sqrt(v*v+g*g),m.cy=h,t.circle=m;for(var _=null,y=uu._;y;)if(m.y<y.y||m.y===y.y&&m.x<=y.x){if(!y.L){_=y.P;break}y=y.L}else{if(!y.R){_=y;break}y=y.R}uu.insert(_,m),_||(su=m)}}}}function Yn(t){var e=t.circle;e&&(e.P||(su=e.N),uu.remove(e),cu.push(e),ii(e),t.circle=null)}function Xn(t){for(var e,n=ru,i=He(t[0][0],t[0][1],t[1][0],t[1][1]),r=n.length;r--;)e=n[r],(!Kn(e,t)||!i(e)||ba(e.a.x-e.b.x)<Oa&&ba(e.a.y-e.b.y)<Oa)&&(e.a=e.b=null,n.splice(r,1))}function Kn(t,e){var n=t.b;if(n)return!0;var i,r,o=t.a,a=e[0][0],s=e[1][0],u=e[0][1],l=e[1][1],c=t.l,h=t.r,f=c.x,d=c.y,p=h.x,v=h.y,g=(f+p)/2,m=(d+v)/2;if(v===d){if(a>g||g>=s)return;if(f>p){if(o){if(o.y>=l)return}else o={x:g,y:u};n={x:g,y:l}}else{if(o){if(o.y<u)return}else o={x:g,y:l};n={x:g,y:u}}}else if(i=(f-p)/(v-d),r=m-i*g,-1>i||i>1)if(f>p){if(o){if(o.y>=l)return}else o={x:(u-r)/i,y:u};n={x:(l-r)/i,y:l}}else{if(o){if(o.y<u)return}else o={x:(l-r)/i,y:l};n={x:(u-r)/i,y:u}}else if(v>d){if(o){if(o.x>=s)return}else o={x:a,y:i*a+r};n={x:s,y:i*s+r}}else{if(o){if(o.x<a)return}else o={x:s,y:i*s+r};n={x:a,y:i*a+r}}return t.a=o,t.b=n,!0}function Qn(t,e){this.l=t,this.r=e,this.a=this.b=null}function Zn(t,e,n,i){var r=new Qn(t,e);return ru.push(r),n&&ti(r,t,e,n),i&&ti(r,e,t,i),ou[t.i].edges.push(new ei(r,t,e)),ou[e.i].edges.push(new ei(r,e,t)),r}function Jn(t,e,n){var i=new Qn(t,null);return i.a=e,i.b=n,ru.push(i),i}function ti(t,e,n,i){t.a||t.b?t.l===n?t.b=i:t.a=i:(t.a=i,t.l=e,t.r=n)}function ei(t,e,n){var i=t.a,r=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(r.x-i.x,i.y-r.y):Math.atan2(i.x-r.x,r.y-i.y)}function ni(){this._=null}function ii(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function ri(t,e){var n=e,i=e.R,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function oi(t,e){var n=e,i=e.L,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function ai(t){for(;t.L;)t=t.L;return t}function si(t,e){var n,i,r,o=t.sort(ui).pop();for(ru=[],ou=new Array(t.length),au=new ni,uu=new ni;;)if(r=su,o&&(!r||o.y<r.y||o.y===r.y&&o.x<r.x))(o.x!==n||o.y!==i)&&(ou[o.i]=new Bn(o),
qn(o),n=o.x,i=o.y),o=t.pop();else{if(!r)break;In(r.arc)}e&&(Xn(e),Vn(e));var a={cells:ou,edges:ru};return au=uu=ru=ou=null,a}function ui(t,e){return e.y-t.y||e.x-t.x}function li(t,e,n){return(t.x-n.x)*(e.y-t.y)-(t.x-e.x)*(n.y-t.y)}function ci(t){return t.x}function hi(t){return t.y}function fi(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function di(t,e,n,i,r,o){if(!t(e,n,i,r,o)){var a=.5*(n+r),s=.5*(i+o),u=e.nodes;u[0]&&di(t,u[0],n,i,a,s),u[1]&&di(t,u[1],a,i,r,s),u[2]&&di(t,u[2],n,s,a,o),u[3]&&di(t,u[3],a,s,r,o)}}function pi(t,e,n,i,r,o,a){var s,u=1/0;return function l(t,c,h,f,d){if(!(c>o||h>a||i>f||r>d)){if(p=t.point){var p,v=e-t.x,g=n-t.y,m=v*v+g*g;if(u>m){var _=Math.sqrt(u=m);i=e-_,r=n-_,o=e+_,a=n+_,s=p}}for(var y=t.nodes,b=.5*(c+f),w=.5*(h+d),x=e>=b,C=n>=w,A=C<<1|x,M=A+4;M>A;++A)if(t=y[3&A])switch(3&A){case 0:l(t,c,h,b,w);break;case 1:l(t,b,h,f,w);break;case 2:l(t,c,w,b,d);break;case 3:l(t,b,w,f,d)}}}(t,i,r,o,a),s}function vi(t,e){t=ua.rgb(t),e=ua.rgb(e);var n=t.r,i=t.g,r=t.b,o=e.r-n,a=e.g-i,s=e.b-r;return function(t){return"#"+bt(Math.round(n+o*t))+bt(Math.round(i+a*t))+bt(Math.round(r+s*t))}}function gi(t,e){var n,i={},r={};for(n in t)n in e?i[n]=yi(t[n],e[n]):r[n]=t[n];for(n in e)n in t||(r[n]=e[n]);return function(t){for(n in i)r[n]=i[n](t);return r}}function mi(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function _i(t,e){var n,i,r,o=fu.lastIndex=du.lastIndex=0,a=-1,s=[],u=[];for(t+="",e+="";(n=fu.exec(t))&&(i=du.exec(e));)(r=i.index)>o&&(r=e.slice(o,r),s[a]?s[a]+=r:s[++a]=r),(n=n[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,u.push({i:a,x:mi(n,i)})),o=du.lastIndex;return o<e.length&&(r=e.slice(o),s[a]?s[a]+=r:s[++a]=r),s.length<2?u[0]?(e=u[0].x,function(t){return e(t)+""}):function(){return e}:(e=u.length,function(t){for(var n,i=0;e>i;++i)s[(n=u[i]).i]=n.x(t);return s.join("")})}function yi(t,e){for(var n,i=ua.interpolators.length;--i>=0&&!(n=ua.interpolators[i](t,e)););return n}function bi(t,e){var n,i=[],r=[],o=t.length,a=e.length,s=Math.min(t.length,e.length);for(n=0;s>n;++n)i.push(yi(t[n],e[n]));for(;o>n;++n)r[n]=t[n];for(;a>n;++n)r[n]=e[n];return function(t){for(n=0;s>n;++n)r[n]=i[n](t);return r}}function wi(t){return function(e){return 0>=e?0:e>=1?1:t(e)}}function xi(t){return function(e){return 1-t(1-e)}}function Ci(t){return function(e){return.5*(.5>e?t(2*e):2-t(2-2*e))}}function Ai(t){return t*t}function Mi(t){return t*t*t}function ki(t){if(0>=t)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(.5>t?n:3*(t-e)+n-.75)}function Ei(t){return function(e){return Math.pow(e,t)}}function Si(t){return 1-Math.cos(t*Ha)}function Ti(t){return Math.pow(2,10*(t-1))}function Fi(t){return 1-Math.sqrt(1-t*t)}function Ri(t,e){var n;return arguments.length<2&&(e=.45),arguments.length?n=e/qa*Math.asin(1/t):(t=1,n=e/4),function(i){return 1+t*Math.pow(2,-10*i)*Math.sin((i-n)*qa/e)}}function Ni(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}}function Di(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function $i(t,e){t=ua.hcl(t),e=ua.hcl(e);var n=t.h,i=t.c,r=t.l,o=e.h-n,a=e.c-i,s=e.l-r;return isNaN(a)&&(a=0,i=isNaN(i)?e.c:i),isNaN(o)?(o=0,n=isNaN(n)?e.h:n):o>180?o-=360:-180>o&&(o+=360),function(t){return ct(n+o*t,i+a*t,r+s*t)+""}}function zi(t,e){t=ua.hsl(t),e=ua.hsl(e);var n=t.h,i=t.s,r=t.l,o=e.h-n,a=e.s-i,s=e.l-r;return isNaN(a)&&(a=0,i=isNaN(i)?e.s:i),isNaN(o)?(o=0,n=isNaN(n)?e.h:n):o>180?o-=360:-180>o&&(o+=360),function(t){return ut(n+o*t,i+a*t,r+s*t)+""}}function Pi(t,e){t=ua.lab(t),e=ua.lab(e);var n=t.l,i=t.a,r=t.b,o=e.l-n,a=e.a-i,s=e.b-r;return function(t){return ft(n+o*t,i+a*t,r+s*t)+""}}function Oi(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function Li(t){var e=[t.a,t.b],n=[t.c,t.d],i=qi(e),r=Ii(e,n),o=qi(ji(n,e,-r))||0;e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,i*=-1,r*=-1),this.rotate=(i?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*Va,this.translate=[t.e,t.f],this.scale=[i,o],this.skew=o?Math.atan2(r,o)*Va:0}function Ii(t,e){return t[0]*e[0]+t[1]*e[1]}function qi(t){var e=Math.sqrt(Ii(t,t));return e&&(t[0]/=e,t[1]/=e),e}function ji(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}function Hi(t){return t.length?t.pop()+",":""}function Bi(t,e,n,i){if(t[0]!==e[0]||t[1]!==e[1]){var r=n.push("translate(",null,",",null,")");i.push({i:r-4,x:mi(t[0],e[0])},{i:r-2,x:mi(t[1],e[1])})}else(e[0]||e[1])&&n.push("translate("+e+")")}function Vi(t,e,n,i){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),i.push({i:n.push(Hi(n)+"rotate(",null,")")-2,x:mi(t,e)})):e&&n.push(Hi(n)+"rotate("+e+")")}function Ui(t,e,n,i){t!==e?i.push({i:n.push(Hi(n)+"skewX(",null,")")-2,x:mi(t,e)}):e&&n.push(Hi(n)+"skewX("+e+")")}function Wi(t,e,n,i){if(t[0]!==e[0]||t[1]!==e[1]){var r=n.push(Hi(n)+"scale(",null,",",null,")");i.push({i:r-4,x:mi(t[0],e[0])},{i:r-2,x:mi(t[1],e[1])})}else(1!==e[0]||1!==e[1])&&n.push(Hi(n)+"scale("+e+")")}function Gi(t,e){var n=[],i=[];return t=ua.transform(t),e=ua.transform(e),Bi(t.translate,e.translate,n,i),Vi(t.rotate,e.rotate,n,i),Ui(t.skew,e.skew,n,i),Wi(t.scale,e.scale,n,i),t=e=null,function(t){for(var e,r=-1,o=i.length;++r<o;)n[(e=i[r]).i]=e.x(t);return n.join("")}}function Yi(t,e){return e=(e-=t=+t)||1/e,function(n){return(n-t)/e}}function Xi(t,e){return e=(e-=t=+t)||1/e,function(n){return Math.max(0,Math.min(1,(n-t)/e))}}function Ki(t){for(var e=t.source,n=t.target,i=Zi(e,n),r=[e];e!==i;)e=e.parent,r.push(e);for(var o=r.length;n!==i;)r.splice(o,0,n),n=n.parent;return r}function Qi(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function Zi(t,e){if(t===e)return t;for(var n=Qi(t),i=Qi(e),r=n.pop(),o=i.pop(),a=null;r===o;)a=r,r=n.pop(),o=i.pop();return a}function Ji(t){t.fixed|=2}function tr(t){t.fixed&=-7}function er(t){t.fixed|=4,t.px=t.x,t.py=t.y}function nr(t){t.fixed&=-5}function ir(t,e,n){var i=0,r=0;if(t.charge=0,!t.leaf)for(var o,a=t.nodes,s=a.length,u=-1;++u<s;)o=a[u],null!=o&&(ir(o,e,n),t.charge+=o.charge,i+=o.charge*o.cx,r+=o.charge*o.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var l=e*n[t.point.index];t.charge+=t.pointCharge=l,i+=l*t.point.x,r+=l*t.point.y}t.cx=i/t.charge,t.cy=r/t.charge}function rr(t,e){return ua.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=cr,t}function or(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(r=t.children)&&(i=r.length))for(var i,r;--i>=0;)n.push(r[i])}function ar(t,e){for(var n=[t],i=[];null!=(t=n.pop());)if(i.push(t),(o=t.children)&&(r=o.length))for(var r,o,a=-1;++a<r;)n.push(o[a]);for(;null!=(t=i.pop());)e(t)}function sr(t){return t.children}function ur(t){return t.value}function lr(t,e){return e.value-t.value}function cr(t){return ua.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}function hr(t){return t.x}function fr(t){return t.y}function dr(t,e,n){t.y0=e,t.y=n}function pr(t){return ua.range(t.length)}function vr(t){for(var e=-1,n=t[0].length,i=[];++e<n;)i[e]=0;return i}function gr(t){for(var e,n=1,i=0,r=t[0][1],o=t.length;o>n;++n)(e=t[n][1])>r&&(i=n,r=e);return i}function mr(t){return t.reduce(_r,0)}function _r(t,e){return t+e[1]}function yr(t,e){return br(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function br(t,e){for(var n=-1,i=+t[0],r=(t[1]-i)/e,o=[];++n<=e;)o[n]=r*n+i;return o}function wr(t){return[ua.min(t),ua.max(t)]}function xr(t,e){return t.value-e.value}function Cr(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function Ar(t,e){t._pack_next=e,e._pack_prev=t}function Mr(t,e){var n=e.x-t.x,i=e.y-t.y,r=t.r+e.r;return.999*r*r>n*n+i*i}function kr(t){function e(t){c=Math.min(t.x-t.r,c),h=Math.max(t.x+t.r,h),f=Math.min(t.y-t.r,f),d=Math.max(t.y+t.r,d)}if((n=t.children)&&(l=n.length)){var n,i,r,o,a,s,u,l,c=1/0,h=-(1/0),f=1/0,d=-(1/0);if(n.forEach(Er),i=n[0],i.x=-i.r,i.y=0,e(i),l>1&&(r=n[1],r.x=r.r,r.y=0,e(r),l>2))for(o=n[2],Fr(i,r,o),e(o),Cr(i,o),i._pack_prev=o,Cr(o,r),r=i._pack_next,a=3;l>a;a++){Fr(i,r,o=n[a]);var p=0,v=1,g=1;for(s=r._pack_next;s!==r;s=s._pack_next,v++)if(Mr(s,o)){p=1;break}if(1==p)for(u=i._pack_prev;u!==s._pack_prev&&!Mr(u,o);u=u._pack_prev,g++);p?(g>v||v==g&&r.r<i.r?Ar(i,r=s):Ar(i=u,r),a--):(Cr(i,o),r=o,e(o))}var m=(c+h)/2,_=(f+d)/2,y=0;for(a=0;l>a;a++)o=n[a],o.x-=m,o.y-=_,y=Math.max(y,o.r+Math.sqrt(o.x*o.x+o.y*o.y));t.r=y,n.forEach(Sr)}}function Er(t){t._pack_next=t._pack_prev=t}function Sr(t){delete t._pack_next,delete t._pack_prev}function Tr(t,e,n,i){var r=t.children;if(t.x=e+=i*t.x,t.y=n+=i*t.y,t.r*=i,r)for(var o=-1,a=r.length;++o<a;)Tr(r[o],e,n,i)}function Fr(t,e,n){var i=t.r+n.r,r=e.x-t.x,o=e.y-t.y;if(i&&(r||o)){var a=e.r+n.r,s=r*r+o*o;a*=a,i*=i;var u=.5+(i-a)/(2*s),l=Math.sqrt(Math.max(0,2*a*(i+s)-(i-=s)*i-a*a))/(2*s);n.x=t.x+u*r+l*o,n.y=t.y+u*o-l*r}else n.x=t.x+i,n.y=t.y}function Rr(t,e){return t.parent==e.parent?1:2}function Nr(t){var e=t.children;return e.length?e[0]:t.t}function Dr(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function $r(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function zr(t){for(var e,n=0,i=0,r=t.children,o=r.length;--o>=0;)e=r[o],e.z+=n,e.m+=n,n+=e.s+(i+=e.c)}function Pr(t,e,n){return t.a.parent===e.parent?t.a:n}function Or(t){return 1+ua.max(t,function(t){return t.y})}function Lr(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}function Ir(t){var e=t.children;return e&&e.length?Ir(e[0]):t}function qr(t){var e,n=t.children;return n&&(e=n.length)?qr(n[e-1]):t}function jr(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Hr(t,e){var n=t.x+e[3],i=t.y+e[0],r=t.dx-e[1]-e[3],o=t.dy-e[0]-e[2];return 0>r&&(n+=r/2,r=0),0>o&&(i+=o/2,o=0),{x:n,y:i,dx:r,dy:o}}function Br(t){var e=t[0],n=t[t.length-1];return n>e?[e,n]:[n,e]}function Vr(t){return t.rangeExtent?t.rangeExtent():Br(t.range())}function Ur(t,e,n,i){var r=n(t[0],t[1]),o=i(e[0],e[1]);return function(t){return o(r(t))}}function Wr(t,e){var n,i=0,r=t.length-1,o=t[i],a=t[r];return o>a&&(n=i,i=r,r=n,n=o,o=a,a=n),t[i]=e.floor(o),t[r]=e.ceil(a),t}function Gr(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:Au}function Yr(t,e,n,i){var r=[],o=[],a=0,s=Math.min(t.length,e.length)-1;for(t[s]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<=s;)r.push(n(t[a-1],t[a])),o.push(i(e[a-1],e[a]));return function(e){var n=ua.bisect(t,e,1,s)-1;return o[n](r[n](e))}}function Xr(t,e,n,i){function r(){var r=Math.min(t.length,e.length)>2?Yr:Ur,u=i?Xi:Yi;return a=r(t,e,u,n),s=r(e,t,u,yi),o}function o(t){return a(t)}var a,s;return o.invert=function(t){return s(t)},o.domain=function(e){return arguments.length?(t=e.map(Number),r()):t},o.range=function(t){return arguments.length?(e=t,r()):e},o.rangeRound=function(t){return o.range(t).interpolate(Oi)},o.clamp=function(t){return arguments.length?(i=t,r()):i},o.interpolate=function(t){return arguments.length?(n=t,r()):n},o.ticks=function(e){return Jr(t,e)},o.tickFormat=function(e,n){return to(t,e,n)},o.nice=function(e){return Qr(t,e),r()},o.copy=function(){return Xr(t,e,n,i)},r()}function Kr(t,e){return ua.rebind(t,e,"range","rangeRound","interpolate","clamp")}function Qr(t,e){return Wr(t,Gr(Zr(t,e)[2])),Wr(t,Gr(Zr(t,e)[2])),t}function Zr(t,e){null==e&&(e=10);var n=Br(t),i=n[1]-n[0],r=Math.pow(10,Math.floor(Math.log(i/e)/Math.LN10)),o=e/i*r;return.15>=o?r*=10:.35>=o?r*=5:.75>=o&&(r*=2),n[0]=Math.ceil(n[0]/r)*r,n[1]=Math.floor(n[1]/r)*r+.5*r,n[2]=r,n}function Jr(t,e){return ua.range.apply(ua,Zr(t,e))}function to(t,e,n){var i=Zr(t,e);if(n){var r=fs.exec(n);if(r.shift(),"s"===r[8]){var o=ua.formatPrefix(Math.max(ba(i[0]),ba(i[1])));return r[7]||(r[7]="."+eo(o.scale(i[2]))),r[8]="f",n=ua.format(r.join("")),function(t){return n(o.scale(t))+o.symbol}}r[7]||(r[7]="."+no(r[8],i)),n=r.join("")}else n=",."+eo(i[2])+"f";return ua.format(n)}function eo(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function no(t,e){var n=eo(e[2]);return t in Mu?Math.abs(n-eo(Math.max(ba(e[0]),ba(e[1]))))+ +("e"!==t):n-2*("%"===t)}function io(t,e,n,i){function r(t){return(n?Math.log(0>t?0:t):-Math.log(t>0?0:-t))/Math.log(e)}function o(t){return n?Math.pow(e,t):-Math.pow(e,-t)}function a(e){return t(r(e))}return a.invert=function(e){return o(t.invert(e))},a.domain=function(e){return arguments.length?(n=e[0]>=0,t.domain((i=e.map(Number)).map(r)),a):i},a.base=function(n){return arguments.length?(e=+n,t.domain(i.map(r)),a):e},a.nice=function(){var e=Wr(i.map(r),n?Math:Eu);return t.domain(e),i=e.map(o),a},a.ticks=function(){var t=Br(i),a=[],s=t[0],u=t[1],l=Math.floor(r(s)),c=Math.ceil(r(u)),h=e%1?2:e;if(isFinite(c-l)){if(n){for(;c>l;l++)for(var f=1;h>f;f++)a.push(o(l)*f);a.push(o(l))}else for(a.push(o(l));l++<c;)for(var f=h-1;f>0;f--)a.push(o(l)*f);for(l=0;a[l]<s;l++);for(c=a.length;a[c-1]>u;c--);a=a.slice(l,c)}return a},a.tickFormat=function(t,n){if(!arguments.length)return ku;arguments.length<2?n=ku:"function"!=typeof n&&(n=ua.format(n));var i=Math.max(1,e*t/a.ticks().length);return function(t){var a=t/o(Math.round(r(t)));return e-.5>a*e&&(a*=e),i>=a?n(t):""}},a.copy=function(){return io(t.copy(),e,n,i)},Kr(a,t)}function ro(t,e,n){function i(e){return t(r(e))}var r=oo(e),o=oo(1/e);return i.invert=function(e){return o(t.invert(e))},i.domain=function(e){return arguments.length?(t.domain((n=e.map(Number)).map(r)),i):n},i.ticks=function(t){return Jr(n,t)},i.tickFormat=function(t,e){return to(n,t,e)},i.nice=function(t){return i.domain(Qr(n,t))},i.exponent=function(a){return arguments.length?(r=oo(e=a),o=oo(1/e),t.domain(n.map(r)),i):e},i.copy=function(){return ro(t.copy(),e,n)},Kr(i,t)}function oo(t){return function(e){return 0>e?-Math.pow(-e,t):Math.pow(e,t)}}function ao(t,e){function n(n){return o[((r.get(n)||("range"===e.t?r.set(n,t.push(n)):NaN))-1)%o.length]}function i(e,n){return ua.range(t.length).map(function(t){return e+n*t})}var r,o,a;return n.domain=function(i){if(!arguments.length)return t;t=[],r=new l;for(var o,a=-1,s=i.length;++a<s;)r.has(o=i[a])||r.set(o,t.push(o));return n[e.t].apply(n,e.a)},n.range=function(t){return arguments.length?(o=t,a=0,e={t:"range",a:arguments},n):o},n.rangePoints=function(r,s){arguments.length<2&&(s=0);var u=r[0],l=r[1],c=t.length<2?(u=(u+l)/2,0):(l-u)/(t.length-1+s);return o=i(u+c*s/2,c),a=0,e={t:"rangePoints",a:arguments},n},n.rangeRoundPoints=function(r,s){arguments.length<2&&(s=0);var u=r[0],l=r[1],c=t.length<2?(u=l=Math.round((u+l)/2),0):(l-u)/(t.length-1+s)|0;return o=i(u+Math.round(c*s/2+(l-u-(t.length-1+s)*c)/2),c),a=0,e={t:"rangeRoundPoints",a:arguments},n},n.rangeBands=function(r,s,u){arguments.length<2&&(s=0),arguments.length<3&&(u=s);var l=r[1]<r[0],c=r[l-0],h=r[1-l],f=(h-c)/(t.length-s+2*u);return o=i(c+f*u,f),l&&o.reverse(),a=f*(1-s),e={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(r,s,u){arguments.length<2&&(s=0),arguments.length<3&&(u=s);var l=r[1]<r[0],c=r[l-0],h=r[1-l],f=Math.floor((h-c)/(t.length-s+2*u));return o=i(c+Math.round((h-c-(t.length-s)*f)/2),f),l&&o.reverse(),a=Math.round(f*(1-s)),e={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return a},n.rangeExtent=function(){return Br(e.a[0])},n.copy=function(){return ao(t,e)},n.domain(t)}function so(t,e){function o(){var n=0,i=e.length;for(s=[];++n<i;)s[n-1]=ua.quantile(t,n/i);return a}function a(t){return isNaN(t=+t)?void 0:e[ua.bisect(s,t)]}var s;return a.domain=function(e){return arguments.length?(t=e.map(i).filter(r).sort(n),o()):t},a.range=function(t){return arguments.length?(e=t,o()):e},a.quantiles=function(){return s},a.invertExtent=function(n){return n=e.indexOf(n),0>n?[NaN,NaN]:[n>0?s[n-1]:t[0],n<s.length?s[n]:t[t.length-1]]},a.copy=function(){return so(t,e)},o()}function uo(t,e,n){function i(e){return n[Math.max(0,Math.min(a,Math.floor(o*(e-t))))]}function r(){return o=n.length/(e-t),a=n.length-1,i}var o,a;return i.domain=function(n){return arguments.length?(t=+n[0],e=+n[n.length-1],r()):[t,e]},i.range=function(t){return arguments.length?(n=t,r()):n},i.invertExtent=function(e){return e=n.indexOf(e),e=0>e?NaN:e/o+t,[e,e+1/o]},i.copy=function(){return uo(t,e,n)},r()}function lo(t,e){function n(n){return n>=n?e[ua.bisect(t,n)]:void 0}return n.domain=function(e){return arguments.length?(t=e,n):t},n.range=function(t){return arguments.length?(e=t,n):e},n.invertExtent=function(n){return n=e.indexOf(n),[t[n-1],t[n]]},n.copy=function(){return lo(t,e)},n}function co(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=n.map(e),e):t},e.ticks=function(e){return Jr(t,e)},e.tickFormat=function(e,n){return to(t,e,n)},e.copy=function(){return co(t)},e}function ho(){return 0}function fo(t){return t.innerRadius}function po(t){return t.outerRadius}function vo(t){return t.startAngle}function go(t){return t.endAngle}function mo(t){return t&&t.padAngle}function _o(t,e,n,i){return(t-n)*e-(e-i)*t>0?0:1}function yo(t,e,n,i,r){var o=t[0]-e[0],a=t[1]-e[1],s=(r?i:-i)/Math.sqrt(o*o+a*a),u=s*a,l=-s*o,c=t[0]+u,h=t[1]+l,f=e[0]+u,d=e[1]+l,p=(c+f)/2,v=(h+d)/2,g=f-c,m=d-h,_=g*g+m*m,y=n-i,b=c*d-f*h,w=(0>m?-1:1)*Math.sqrt(Math.max(0,y*y*_-b*b)),x=(b*m-g*w)/_,C=(-b*g-m*w)/_,A=(b*m+g*w)/_,M=(-b*g+m*w)/_,k=x-p,E=C-v,S=A-p,T=M-v;return k*k+E*E>S*S+T*T&&(x=A,C=M),[[x-u,C-l],[x*n/y,C*n/y]]}function bo(t){function e(e){function a(){l.push("M",o(t(c),s))}for(var u,l=[],c=[],h=-1,f=e.length,d=kt(n),p=kt(i);++h<f;)r.call(this,u=e[h],h)?c.push([+d.call(this,u,h),+p.call(this,u,h)]):c.length&&(a(),c=[]);return c.length&&a(),l.length?l.join(""):null}var n=Tn,i=Fn,r=Te,o=wo,a=o.key,s=.7;return e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(i=t,e):i},e.defined=function(t){return arguments.length?(r=t,e):r},e.interpolate=function(t){return arguments.length?(a="function"==typeof t?o=t:(o=Du.get(t)||wo).key,e):a},e.tension=function(t){return arguments.length?(s=t,e):s},e}function wo(t){return t.length>1?t.join("L"):t+"Z"}function xo(t){return t.join("L")+"Z"}function Co(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("H",(i[0]+(i=t[e])[0])/2,"V",i[1]);return n>1&&r.push("H",i[0]),r.join("")}function Ao(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("V",(i=t[e])[1],"H",i[0]);return r.join("")}function Mo(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("H",(i=t[e])[0],"V",i[1]);return r.join("")}function ko(t,e){return t.length<4?wo(t):t[1]+To(t.slice(1,-1),Fo(t,e))}function Eo(t,e){return t.length<3?xo(t):t[0]+To((t.push(t[0]),t),Fo([t[t.length-2]].concat(t,[t[1]]),e))}function So(t,e){return t.length<3?wo(t):t[0]+To(t,Fo(t,e))}function To(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return wo(t);var n=t.length!=e.length,i="",r=t[0],o=t[1],a=e[0],s=a,u=1;if(n&&(i+="Q"+(o[0]-2*a[0]/3)+","+(o[1]-2*a[1]/3)+","+o[0]+","+o[1],r=t[1],u=2),e.length>1){s=e[1],o=t[u],u++,i+="C"+(r[0]+a[0])+","+(r[1]+a[1])+","+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1];for(var l=2;l<e.length;l++,u++)o=t[u],s=e[l],i+="S"+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1]}if(n){var c=t[u];i+="Q"+(o[0]+2*s[0]/3)+","+(o[1]+2*s[1]/3)+","+c[0]+","+c[1]}return i}function Fo(t,e){for(var n,i=[],r=(1-e)/2,o=t[0],a=t[1],s=1,u=t.length;++s<u;)n=o,o=a,a=t[s],i.push([r*(a[0]-n[0]),r*(a[1]-n[1])]);return i}function Ro(t){if(t.length<3)return wo(t);var e=1,n=t.length,i=t[0],r=i[0],o=i[1],a=[r,r,r,(i=t[1])[0]],s=[o,o,o,i[1]],u=[r,",",o,"L",zo(Pu,a),",",zo(Pu,s)];for(t.push(t[n-1]);++e<=n;)i=t[e],a.shift(),a.push(i[0]),s.shift(),s.push(i[1]),Po(u,a,s);return t.pop(),u.push("L",i),u.join("")}function No(t){if(t.length<4)return wo(t);for(var e,n=[],i=-1,r=t.length,o=[0],a=[0];++i<3;)e=t[i],o.push(e[0]),a.push(e[1]);for(n.push(zo(Pu,o)+","+zo(Pu,a)),--i;++i<r;)e=t[i],o.shift(),o.push(e[0]),a.shift(),a.push(e[1]),Po(n,o,a);return n.join("")}function Do(t){for(var e,n,i=-1,r=t.length,o=r+4,a=[],s=[];++i<4;)n=t[i%r],a.push(n[0]),s.push(n[1]);for(e=[zo(Pu,a),",",zo(Pu,s)],--i;++i<o;)n=t[i%r],a.shift(),a.push(n[0]),s.shift(),s.push(n[1]),Po(e,a,s);return e.join("")}function $o(t,e){var n=t.length-1;if(n)for(var i,r,o=t[0][0],a=t[0][1],s=t[n][0]-o,u=t[n][1]-a,l=-1;++l<=n;)i=t[l],r=l/n,i[0]=e*i[0]+(1-e)*(o+r*s),i[1]=e*i[1]+(1-e)*(a+r*u);return Ro(t)}function zo(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function Po(t,e,n){t.push("C",zo($u,e),",",zo($u,n),",",zo(zu,e),",",zo(zu,n),",",zo(Pu,e),",",zo(Pu,n))}function Oo(t,e){return(e[1]-t[1])/(e[0]-t[0])}function Lo(t){for(var e=0,n=t.length-1,i=[],r=t[0],o=t[1],a=i[0]=Oo(r,o);++e<n;)i[e]=(a+(a=Oo(r=o,o=t[e+1])))/2;return i[e]=a,i}function Io(t){for(var e,n,i,r,o=[],a=Lo(t),s=-1,u=t.length-1;++s<u;)e=Oo(t[s],t[s+1]),ba(e)<Oa?a[s]=a[s+1]=0:(n=a[s]/e,i=a[s+1]/e,r=n*n+i*i,r>9&&(r=3*e/Math.sqrt(r),a[s]=r*n,a[s+1]=r*i));for(s=-1;++s<=u;)r=(t[Math.min(u,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+a[s]*a[s])),o.push([r||0,a[s]*r||0]);return o}function qo(t){return t.length<3?wo(t):t[0]+To(t,Io(t))}function jo(t){for(var e,n,i,r=-1,o=t.length;++r<o;)e=t[r],n=e[0],i=e[1]-Ha,e[0]=n*Math.cos(i),e[1]=n*Math.sin(i);return t}function Ho(t){function e(e){function u(){v.push("M",s(t(m),h),c,l(t(g.reverse()),h),"Z")}for(var f,d,p,v=[],g=[],m=[],_=-1,y=e.length,b=kt(n),w=kt(r),x=n===i?function(){return d}:kt(i),C=r===o?function(){return p}:kt(o);++_<y;)a.call(this,f=e[_],_)?(g.push([d=+b.call(this,f,_),p=+w.call(this,f,_)]),m.push([+x.call(this,f,_),+C.call(this,f,_)])):g.length&&(u(),g=[],m=[]);return g.length&&u(),v.length?v.join(""):null}var n=Tn,i=Tn,r=0,o=Fn,a=Te,s=wo,u=s.key,l=s,c="L",h=.7;return e.x=function(t){return arguments.length?(n=i=t,e):i},e.x0=function(t){return arguments.length?(n=t,e):n},e.x1=function(t){return arguments.length?(i=t,e):i},e.y=function(t){return arguments.length?(r=o=t,e):o},e.y0=function(t){return arguments.length?(r=t,e):r},e.y1=function(t){return arguments.length?(o=t,e):o},e.defined=function(t){return arguments.length?(a=t,e):a},e.interpolate=function(t){return arguments.length?(u="function"==typeof t?s=t:(s=Du.get(t)||wo).key,l=s.reverse||s,c=s.closed?"M":"L",e):u},e.tension=function(t){return arguments.length?(h=t,e):h},e}function Bo(t){return t.radius}function Vo(t){return[t.x,t.y]}function Uo(t){return function(){var e=t.apply(this,arguments),n=e[0],i=e[1]-Ha;return[n*Math.cos(i),n*Math.sin(i)]}}function Wo(){return 64}function Go(){return"circle"}function Yo(t){var e=Math.sqrt(t/Ia);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function Xo(t){return function(){var e,n,i;(e=this[t])&&(i=e[n=e.active])&&(i.timer.c=null,i.timer.t=NaN,--e.count?delete e[n]:delete this[t],e.active+=.5,i.event&&i.event.interrupt.call(this,this.__data__,i.index))}}function Ko(t,e,n){return Ma(t,Bu),t.namespace=e,t.id=n,t}function Qo(t,e,n,i){var r=t.id,o=t.namespace;return B(t,"function"==typeof n?function(t,a,s){t[o][r].tween.set(e,i(n.call(t,t.__data__,a,s)))}:(n=i(n),function(t){t[o][r].tween.set(e,n)}))}function Zo(t){return null==t&&(t=""),function(){this.textContent=t}}function Jo(t){return null==t?"__transition__":"__transition_"+t+"__"}function ta(t,e,n,i,r){function o(t){var e=v.delay;return c.t=e+u,t>=e?a(t-e):void(c.c=a)}function a(n){var r=p.active,o=p[r];o&&(o.timer.c=null,o.timer.t=NaN,--p.count,delete p[r],o.event&&o.event.interrupt.call(t,t.__data__,o.index));for(var a in p)if(i>+a){var l=p[a];l.timer.c=null,l.timer.t=NaN,--p.count,delete p[a]}c.c=s,Rt(function(){return c.c&&s(n||1)&&(c.c=null,c.t=NaN),1},0,u),p.active=i,v.event&&v.event.start.call(t,t.__data__,e),d=[],v.tween.forEach(function(n,i){(i=i.call(t,t.__data__,e))&&d.push(i)}),f=v.ease,h=v.duration}function s(r){for(var o=r/h,a=f(o),s=d.length;s>0;)d[--s].call(t,a);return o>=1?(v.event&&v.event.end.call(t,t.__data__,e),--p.count?delete p[i]:delete t[n],1):void 0}var u,c,h,f,d,p=t[n]||(t[n]={active:0,count:0}),v=p[i];v||(u=r.time,c=Rt(o,0,u),v=p[i]={tween:new l,time:u,timer:c,delay:r.delay,duration:r.duration,ease:r.ease,index:e},r=null,++p.count)}function ea(t,e,n){t.attr("transform",function(t){var i=e(t);return"translate("+(isFinite(i)?i:n(t))+",0)"})}function na(t,e,n){t.attr("transform",function(t){var i=e(t);return"translate(0,"+(isFinite(i)?i:n(t))+")"})}function ia(t){return t.toISOString()}function ra(t,e,n){function i(e){return t(e)}function r(t,n){var i=t[1]-t[0],r=i/n,o=ua.bisect(Zu,r);return o==Zu.length?[e.year,Zr(t.map(function(t){return t/31536e6}),n)[2]]:o?e[r/Zu[o-1]<Zu[o]/r?o-1:o]:[el,Zr(t,n)[2]]}return i.invert=function(e){return oa(t.invert(e))},i.domain=function(e){return arguments.length?(t.domain(e),i):t.domain().map(oa)},i.nice=function(t,e){function n(n){return!isNaN(n)&&!t.range(n,oa(+n+1),e).length}var o=i.domain(),a=Br(o),s=null==t?r(a,10):"number"==typeof t&&r(a,t);return s&&(t=s[0],e=s[1]),i.domain(Wr(o,e>1?{floor:function(e){for(;n(e=t.floor(e));)e=oa(e-1);return e},ceil:function(e){for(;n(e=t.ceil(e));)e=oa(+e+1);return e}}:t))},i.ticks=function(t,e){var n=Br(i.domain()),o=null==t?r(n,10):"number"==typeof t?r(n,t):!t.range&&[{range:t},e];return o&&(t=o[0],e=o[1]),t.range(n[0],oa(+n[1]+1),1>e?1:e)},i.tickFormat=function(){return n},i.copy=function(){return ra(t.copy(),e,n)},Kr(i,t)}function oa(t){return new Date(t)}function aa(t){return JSON.parse(t.responseText)}function sa(t){var e=ha.createRange();return e.selectNode(ha.body),e.createContextualFragment(t.responseText)}var ua={version:"3.5.16"},la=[].slice,ca=function(t){return la.call(t)},ha=this.document;if(ha)try{ca(ha.documentElement.childNodes)[0].nodeType}catch(fa){ca=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}if(Date.now||(Date.now=function(){return+new Date}),ha)try{ha.createElement("DIV").style.setProperty("opacity",0,"")}catch(da){var pa=this.Element.prototype,va=pa.setAttribute,ga=pa.setAttributeNS,ma=this.CSSStyleDeclaration.prototype,_a=ma.setProperty;pa.setAttribute=function(t,e){va.call(this,t,e+"")},pa.setAttributeNS=function(t,e,n){ga.call(this,t,e,n+"")},ma.setProperty=function(t,e,n){_a.call(this,t,e+"",n)}}ua.ascending=n,ua.descending=function(t,e){return t>e?-1:e>t?1:e>=t?0:NaN},ua.min=function(t,e){var n,i,r=-1,o=t.length;if(1===arguments.length){for(;++r<o;)if(null!=(i=t[r])&&i>=i){n=i;break}for(;++r<o;)null!=(i=t[r])&&n>i&&(n=i)}else{for(;++r<o;)if(null!=(i=e.call(t,t[r],r))&&i>=i){n=i;break}for(;++r<o;)null!=(i=e.call(t,t[r],r))&&n>i&&(n=i)}return n},ua.max=function(t,e){var n,i,r=-1,o=t.length;if(1===arguments.length){for(;++r<o;)if(null!=(i=t[r])&&i>=i){n=i;break}for(;++r<o;)null!=(i=t[r])&&i>n&&(n=i)}else{for(;++r<o;)if(null!=(i=e.call(t,t[r],r))&&i>=i){n=i;break}for(;++r<o;)null!=(i=e.call(t,t[r],r))&&i>n&&(n=i)}return n},ua.extent=function(t,e){var n,i,r,o=-1,a=t.length;if(1===arguments.length){for(;++o<a;)if(null!=(i=t[o])&&i>=i){n=r=i;break}for(;++o<a;)null!=(i=t[o])&&(n>i&&(n=i),i>r&&(r=i))}else{for(;++o<a;)if(null!=(i=e.call(t,t[o],o))&&i>=i){n=r=i;break}for(;++o<a;)null!=(i=e.call(t,t[o],o))&&(n>i&&(n=i),i>r&&(r=i))}return[n,r]},ua.sum=function(t,e){var n,i=0,o=t.length,a=-1;if(1===arguments.length)for(;++a<o;)r(n=+t[a])&&(i+=n);else for(;++a<o;)r(n=+e.call(t,t[a],a))&&(i+=n);return i},ua.mean=function(t,e){var n,o=0,a=t.length,s=-1,u=a;if(1===arguments.length)for(;++s<a;)r(n=i(t[s]))?o+=n:--u;else for(;++s<a;)r(n=i(e.call(t,t[s],s)))?o+=n:--u;return u?o/u:void 0},ua.quantile=function(t,e){var n=(t.length-1)*e+1,i=Math.floor(n),r=+t[i-1],o=n-i;return o?r+o*(t[i]-r):r},ua.median=function(t,e){var o,a=[],s=t.length,u=-1;if(1===arguments.length)for(;++u<s;)r(o=i(t[u]))&&a.push(o);else for(;++u<s;)r(o=i(e.call(t,t[u],u)))&&a.push(o);return a.length?ua.quantile(a.sort(n),.5):void 0},ua.variance=function(t,e){var n,o,a=t.length,s=0,u=0,l=-1,c=0;if(1===arguments.length)for(;++l<a;)r(n=i(t[l]))&&(o=n-s,s+=o/++c,u+=o*(n-s));else for(;++l<a;)r(n=i(e.call(t,t[l],l)))&&(o=n-s,s+=o/++c,u+=o*(n-s));return c>1?u/(c-1):void 0},ua.deviation=function(){var t=ua.variance.apply(this,arguments);return t?Math.sqrt(t):t};var ya=o(n);ua.bisectLeft=ya.left,ua.bisect=ua.bisectRight=ya.right,ua.bisector=function(t){return o(1===t.length?function(e,i){return n(t(e),i)}:t)},ua.shuffle=function(t,e,n){(o=arguments.length)<3&&(n=t.length,2>o&&(e=0));for(var i,r,o=n-e;o;)r=Math.random()*o--|0,i=t[o+e],t[o+e]=t[r+e],t[r+e]=i;return t},ua.permute=function(t,e){for(var n=e.length,i=new Array(n);n--;)i[n]=t[e[n]];return i},ua.pairs=function(t){for(var e,n=0,i=t.length-1,r=t[0],o=new Array(0>i?0:i);i>n;)o[n]=[e=r,r=t[++n]];return o},ua.transpose=function(t){if(!(r=t.length))return[];for(var e=-1,n=ua.min(t,a),i=new Array(n);++e<n;)for(var r,o=-1,s=i[e]=new Array(r);++o<r;)s[o]=t[o][e];return i},ua.zip=function(){return ua.transpose(arguments)},ua.keys=function(t){var e=[];for(var n in t)e.push(n);return e},ua.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},ua.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},ua.merge=function(t){for(var e,n,i,r=t.length,o=-1,a=0;++o<r;)a+=t[o].length;for(n=new Array(a);--r>=0;)for(i=t[r],e=i.length;--e>=0;)n[--a]=i[e];return n};var ba=Math.abs;ua.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n===1/0)throw new Error("infinite range");var i,r=[],o=s(ba(n)),a=-1;if(t*=o,e*=o,n*=o,0>n)for(;(i=t+n*++a)>e;)r.push(i/o);else for(;(i=t+n*++a)<e;)r.push(i/o);return r},ua.map=function(t,e){var n=new l;if(t instanceof l)t.forEach(function(t,e){n.set(t,e)});else if(Array.isArray(t)){var i,r=-1,o=t.length;if(1===arguments.length)for(;++r<o;)n.set(r,t[r]);else for(;++r<o;)n.set(e.call(t,i=t[r],r),i)}else for(var a in t)n.set(a,t[a]);return n};var wa="__proto__",xa="\x00";u(l,{has:f,get:function(t){return this._[c(t)]},set:function(t,e){return this._[c(t)]=e},remove:d,keys:p,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:h(e),value:this._[e]});return t},size:v,empty:g,forEach:function(t){for(var e in this._)t.call(this,h(e),this._[e])}}),ua.nest=function(){function t(e,a,s){if(s>=o.length)return i?i.call(r,a):n?a.sort(n):a;for(var u,c,h,f,d=-1,p=a.length,v=o[s++],g=new l;++d<p;)(f=g.get(u=v(c=a[d])))?f.push(c):g.set(u,[c]);return e?(c=e(),h=function(n,i){c.set(n,t(e,i,s))}):(c={},h=function(n,i){c[n]=t(e,i,s)}),g.forEach(h),c}function e(t,n){if(n>=o.length)return t;var i=[],r=a[n++];return t.forEach(function(t,r){i.push({key:t,values:e(r,n)})}),r?i.sort(function(t,e){return r(t.key,e.key)}):i}var n,i,r={},o=[],a=[];return r.map=function(e,n){return t(n,e,0)},r.entries=function(n){return e(t(ua.map,n,0),0)},r.key=function(t){return o.push(t),r},r.sortKeys=function(t){return a[o.length-1]=t,r},r.sortValues=function(t){return n=t,r},r.rollup=function(t){return i=t,r},r},ua.set=function(t){var e=new m;if(t)for(var n=0,i=t.length;i>n;++n)e.add(t[n]);return e},u(m,{has:f,add:function(t){return this._[c(t+="")]=!0,t},remove:d,values:p,size:v,empty:g,forEach:function(t){for(var e in this._)t.call(this,h(e))}}),ua.behavior={},ua.rebind=function(t,e){for(var n,i=1,r=arguments.length;++i<r;)t[n=arguments[i]]=y(t,e,e[n]);return t};var Ca=["webkit","ms","moz","Moz","o","O"];ua.dispatch=function(){for(var t=new x,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=C(t);return t},x.prototype.on=function(t,e){var n=t.indexOf("."),i="";if(n>=0&&(i=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(i):this[t].on(i,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(i,null);return this}},ua.event=null,ua.requote=function(t){return t.replace(Aa,"\\$&")};var Aa=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Ma={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]},ka=function(t,e){return e.querySelector(t)},Ea=function(t,e){return e.querySelectorAll(t)},Sa=function(t,e){var n=t.matches||t[b(t,"matchesSelector")];return(Sa=function(t,e){return n.call(t,e)})(t,e)};"function"==typeof Sizzle&&(ka=function(t,e){return Sizzle(t,e)[0]||null},Ea=Sizzle,Sa=Sizzle.matchesSelector),ua.selection=function(){return ua.select(ha.documentElement)};var Ta=ua.selection.prototype=[];Ta.select=function(t){var e,n,i,r,o=[];t=S(t);for(var a=-1,s=this.length;++a<s;){o.push(e=[]),e.parentNode=(i=this[a]).parentNode;for(var u=-1,l=i.length;++u<l;)(r=i[u])?(e.push(n=t.call(r,r.__data__,u,a)),n&&"__data__"in r&&(n.__data__=r.__data__)):e.push(null)}return E(o)},Ta.selectAll=function(t){var e,n,i=[];t=T(t);for(var r=-1,o=this.length;++r<o;)for(var a=this[r],s=-1,u=a.length;++s<u;)(n=a[s])&&(i.push(e=ca(t.call(n,n.__data__,s,r))),e.parentNode=n);return E(i)};var Fa="http://www.w3.org/1999/xhtml",Ra={svg:"http://www.w3.org/2000/svg",xhtml:Fa,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};ua.ns={prefix:Ra,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),Ra.hasOwnProperty(n)?{
space:Ra[n],local:t}:t}},Ta.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return t=ua.ns.qualify(t),t.local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(F(e,t[e]));return this}return this.each(F(t,e))},Ta.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),i=(t=D(t)).length,r=-1;if(e=n.classList){for(;++r<i;)if(!e.contains(t[r]))return!1}else for(e=n.getAttribute("class");++r<i;)if(!N(t[r]).test(e))return!1;return!0}for(e in t)this.each($(e,t[e]));return this}return this.each($(t,e))},Ta.style=function(t,n,i){var r=arguments.length;if(3>r){if("string"!=typeof t){2>r&&(n="");for(i in t)this.each(P(i,t[i],n));return this}if(2>r){var o=this.node();return e(o).getComputedStyle(o,null).getPropertyValue(t)}i=""}return this.each(P(t,n,i))},Ta.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(O(e,t[e]));return this}return this.each(O(t,e))},Ta.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},Ta.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},Ta.append=function(t){return t=L(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},Ta.insert=function(t,e){return t=L(t),e=S(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},Ta.remove=function(){return this.each(I)},Ta.data=function(t,e){function n(t,n){var i,r,o,a=t.length,h=n.length,f=Math.min(a,h),d=new Array(h),p=new Array(h),v=new Array(a);if(e){var g,m=new l,_=new Array(a);for(i=-1;++i<a;)(r=t[i])&&(m.has(g=e.call(r,r.__data__,i))?v[i]=r:m.set(g,r),_[i]=g);for(i=-1;++i<h;)(r=m.get(g=e.call(n,o=n[i],i)))?r!==!0&&(d[i]=r,r.__data__=o):p[i]=q(o),m.set(g,!0);for(i=-1;++i<a;)i in _&&m.get(_[i])!==!0&&(v[i]=t[i])}else{for(i=-1;++i<f;)r=t[i],o=n[i],r?(r.__data__=o,d[i]=r):p[i]=q(o);for(;h>i;++i)p[i]=q(n[i]);for(;a>i;++i)v[i]=t[i]}p.update=d,p.parentNode=d.parentNode=v.parentNode=t.parentNode,s.push(p),u.push(d),c.push(v)}var i,r,o=-1,a=this.length;if(!arguments.length){for(t=new Array(a=(i=this[0]).length);++o<a;)(r=i[o])&&(t[o]=r.__data__);return t}var s=V([]),u=E([]),c=E([]);if("function"==typeof t)for(;++o<a;)n(i=this[o],t.call(i,i.parentNode.__data__,o));else for(;++o<a;)n(i=this[o],t);return u.enter=function(){return s},u.exit=function(){return c},u},Ta.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},Ta.filter=function(t){var e,n,i,r=[];"function"!=typeof t&&(t=j(t));for(var o=0,a=this.length;a>o;o++){r.push(e=[]),e.parentNode=(n=this[o]).parentNode;for(var s=0,u=n.length;u>s;s++)(i=n[s])&&t.call(i,i.__data__,s,o)&&e.push(i)}return E(r)},Ta.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,i=this[t],r=i.length-1,o=i[r];--r>=0;)(n=i[r])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},Ta.sort=function(t){t=H.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},Ta.each=function(t){return B(this,function(e,n,i){t.call(e,e.__data__,n,i)})},Ta.call=function(t){var e=ca(arguments);return t.apply(e[0]=this,e),this},Ta.empty=function(){return!this.node()},Ta.node=function(){for(var t=0,e=this.length;e>t;t++)for(var n=this[t],i=0,r=n.length;r>i;i++){var o=n[i];if(o)return o}return null},Ta.size=function(){var t=0;return B(this,function(){++t}),t};var Na=[];ua.selection.enter=V,ua.selection.enter.prototype=Na,Na.append=Ta.append,Na.empty=Ta.empty,Na.node=Ta.node,Na.call=Ta.call,Na.size=Ta.size,Na.select=function(t){for(var e,n,i,r,o,a=[],s=-1,u=this.length;++s<u;){i=(r=this[s]).update,a.push(e=[]),e.parentNode=r.parentNode;for(var l=-1,c=r.length;++l<c;)(o=r[l])?(e.push(i[l]=n=t.call(r.parentNode,o.__data__,l,s)),n.__data__=o.__data__):e.push(null)}return E(a)},Na.insert=function(t,e){return arguments.length<2&&(e=U(this)),Ta.insert.call(this,t,e)},ua.select=function(e){var n;return"string"==typeof e?(n=[ka(e,ha)],n.parentNode=ha.documentElement):(n=[e],n.parentNode=t(e)),E([n])},ua.selectAll=function(t){var e;return"string"==typeof t?(e=ca(Ea(t,ha)),e.parentNode=ha.documentElement):(e=ca(t),e.parentNode=null),E([e])},Ta.on=function(t,e,n){var i=arguments.length;if(3>i){if("string"!=typeof t){2>i&&(e=!1);for(n in t)this.each(W(n,t[n],e));return this}if(2>i)return(i=this.node()["__on"+t])&&i._;n=!1}return this.each(W(t,e,n))};var Da=ua.map({mouseenter:"mouseover",mouseleave:"mouseout"});ha&&Da.forEach(function(t){"on"+t in ha&&Da.remove(t)});var $a,za=0;ua.mouse=function(t){return K(t,M())};var Pa=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;ua.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=M().changedTouches),e)for(var i,r=0,o=e.length;o>r;++r)if((i=e[r]).identifier===n)return K(t,i)},ua.behavior.drag=function(){function t(){this.on("mousedown.drag",o).on("touchstart.drag",a)}function n(t,e,n,o,a){return function(){function s(){var t,n,i=e(f,v);i&&(t=i[0]-y[0],n=i[1]-y[1],p|=t|n,y=i,d({type:"drag",x:i[0]+l[0],y:i[1]+l[1],dx:t,dy:n}))}function u(){e(f,v)&&(m.on(o+g,null).on(a+g,null),_(p),d({type:"dragend"}))}var l,c=this,h=ua.event.target.correspondingElement||ua.event.target,f=c.parentNode,d=i.of(c,arguments),p=0,v=t(),g=".drag"+(null==v?"":"-"+v),m=ua.select(n(h)).on(o+g,s).on(a+g,u),_=X(h),y=e(f,v);r?(l=r.apply(c,arguments),l=[l.x-y[0],l.y-y[1]]):l=[0,0],d({type:"dragstart"})}}var i=k(t,"drag","dragstart","dragend"),r=null,o=n(w,ua.mouse,e,"mousemove","mouseup"),a=n(Q,ua.touch,_,"touchmove","touchend");return t.origin=function(e){return arguments.length?(r=e,t):r},ua.rebind(t,i,"on")},ua.touches=function(t,e){return arguments.length<2&&(e=M().touches),e?ca(e).map(function(e){var n=K(t,e);return n.identifier=e.identifier,n}):[]};var Oa=1e-6,La=Oa*Oa,Ia=Math.PI,qa=2*Ia,ja=qa-Oa,Ha=Ia/2,Ba=Ia/180,Va=180/Ia,Ua=Math.SQRT2,Wa=2,Ga=4;ua.interpolateZoom=function(t,e){var n,i,r=t[0],o=t[1],a=t[2],s=e[0],u=e[1],l=e[2],c=s-r,h=u-o,f=c*c+h*h;if(La>f)i=Math.log(l/a)/Ua,n=function(t){return[r+t*c,o+t*h,a*Math.exp(Ua*t*i)]};else{var d=Math.sqrt(f),p=(l*l-a*a+Ga*f)/(2*a*Wa*d),v=(l*l-a*a-Ga*f)/(2*l*Wa*d),g=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(v*v+1)-v);i=(m-g)/Ua,n=function(t){var e=t*i,n=it(g),s=a/(Wa*d)*(n*rt(Ua*e+g)-nt(g));return[r+s*c,o+s*h,a*n/it(Ua*e+g)]}}return n.duration=1e3*i,n},ua.behavior.zoom=function(){function t(t){t.on(R,h).on(Xa+".zoom",d).on("dblclick.zoom",p).on($,f)}function n(t){return[(t[0]-M.x)/M.k,(t[1]-M.y)/M.k]}function i(t){return[t[0]*M.k+M.x,t[1]*M.k+M.y]}function r(t){M.k=Math.max(S[0],Math.min(S[1],t))}function o(t,e){e=i(e),M.x+=t[0]-e[0],M.y+=t[1]-e[1]}function a(e,n,i,a){e.__chart__={x:M.x,y:M.y,k:M.k},r(Math.pow(2,a)),o(g=n,i),e=ua.select(e),T>0&&(e=e.transition().duration(T)),e.call(t.event)}function s(){w&&w.domain(b.range().map(function(t){return(t-M.x)/M.k}).map(b.invert)),C&&C.domain(x.range().map(function(t){return(t-M.y)/M.k}).map(x.invert))}function u(t){F++||t({type:"zoomstart"})}function l(t){s(),t({type:"zoom",scale:M.k,translate:[M.x,M.y]})}function c(t){--F||(t({type:"zoomend"}),g=null)}function h(){function t(){s=1,o(ua.mouse(r),f),l(a)}function i(){h.on(N,null).on(D,null),d(s),c(a)}var r=this,a=z.of(r,arguments),s=0,h=ua.select(e(r)).on(N,t).on(D,i),f=n(ua.mouse(r)),d=X(r);Hu.call(r),u(a)}function f(){function t(){var t=ua.touches(p);return d=M.k,t.forEach(function(t){t.identifier in g&&(g[t.identifier]=n(t))}),t}function e(){var e=ua.event.target;ua.select(e).on(b,i).on(w,s),x.push(e);for(var n=ua.event.changedTouches,r=0,o=n.length;o>r;++r)g[n[r].identifier]=null;var u=t(),l=Date.now();if(1===u.length){if(500>l-y){var c=u[0];a(p,c,g[c.identifier],Math.floor(Math.log(M.k)/Math.LN2)+1),A()}y=l}else if(u.length>1){var c=u[0],h=u[1],f=c[0]-h[0],d=c[1]-h[1];m=f*f+d*d}}function i(){var t,e,n,i,a=ua.touches(p);Hu.call(p);for(var s=0,u=a.length;u>s;++s,i=null)if(n=a[s],i=g[n.identifier]){if(e)break;t=n,e=i}if(i){var c=(c=n[0]-t[0])*c+(c=n[1]-t[1])*c,h=m&&Math.sqrt(c/m);t=[(t[0]+n[0])/2,(t[1]+n[1])/2],e=[(e[0]+i[0])/2,(e[1]+i[1])/2],r(h*d)}y=null,o(t,e),l(v)}function s(){if(ua.event.touches.length){for(var e=ua.event.changedTouches,n=0,i=e.length;i>n;++n)delete g[e[n].identifier];for(var r in g)return void t()}ua.selectAll(x).on(_,null),C.on(R,h).on($,f),k(),c(v)}var d,p=this,v=z.of(p,arguments),g={},m=0,_=".zoom-"+ua.event.changedTouches[0].identifier,b="touchmove"+_,w="touchend"+_,x=[],C=ua.select(p),k=X(p);e(),u(v),C.on(R,null).on($,e)}function d(){var t=z.of(this,arguments);_?clearTimeout(_):(Hu.call(this),v=n(g=m||ua.mouse(this)),u(t)),_=setTimeout(function(){_=null,c(t)},50),A(),r(Math.pow(2,.002*Ya())*M.k),o(g,v),l(t)}function p(){var t=ua.mouse(this),e=Math.log(M.k)/Math.LN2;a(this,t,n(t),ua.event.shiftKey?Math.ceil(e)-1:Math.floor(e)+1)}var v,g,m,_,y,b,w,x,C,M={x:0,y:0,k:1},E=[960,500],S=Ka,T=250,F=0,R="mousedown.zoom",N="mousemove.zoom",D="mouseup.zoom",$="touchstart.zoom",z=k(t,"zoomstart","zoom","zoomend");return Xa||(Xa="onwheel"in ha?(Ya=function(){return-ua.event.deltaY*(ua.event.deltaMode?120:1)},"wheel"):"onmousewheel"in ha?(Ya=function(){return ua.event.wheelDelta},"mousewheel"):(Ya=function(){return-ua.event.detail},"MozMousePixelScroll")),t.event=function(t){t.each(function(){var t=z.of(this,arguments),e=M;qu?ua.select(this).transition().each("start.zoom",function(){M=this.__chart__||{x:0,y:0,k:1},u(t)}).tween("zoom:zoom",function(){var n=E[0],i=E[1],r=g?g[0]:n/2,o=g?g[1]:i/2,a=ua.interpolateZoom([(r-M.x)/M.k,(o-M.y)/M.k,n/M.k],[(r-e.x)/e.k,(o-e.y)/e.k,n/e.k]);return function(e){var i=a(e),s=n/i[2];this.__chart__=M={x:r-i[0]*s,y:o-i[1]*s,k:s},l(t)}}).each("interrupt.zoom",function(){c(t)}).each("end.zoom",function(){c(t)}):(this.__chart__=M,u(t),l(t),c(t))})},t.translate=function(e){return arguments.length?(M={x:+e[0],y:+e[1],k:M.k},s(),t):[M.x,M.y]},t.scale=function(e){return arguments.length?(M={x:M.x,y:M.y,k:null},r(+e),s(),t):M.k},t.scaleExtent=function(e){return arguments.length?(S=null==e?Ka:[+e[0],+e[1]],t):S},t.center=function(e){return arguments.length?(m=e&&[+e[0],+e[1]],t):m},t.size=function(e){return arguments.length?(E=e&&[+e[0],+e[1]],t):E},t.duration=function(e){return arguments.length?(T=+e,t):T},t.x=function(e){return arguments.length?(w=e,b=e.copy(),M={x:0,y:0,k:1},t):w},t.y=function(e){return arguments.length?(C=e,x=e.copy(),M={x:0,y:0,k:1},t):C},ua.rebind(t,z,"on")};var Ya,Xa,Ka=[0,1/0];ua.color=at,at.prototype.toString=function(){return this.rgb()+""},ua.hsl=st;var Qa=st.prototype=new at;Qa.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new st(this.h,this.s,this.l/t)},Qa.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new st(this.h,this.s,t*this.l)},Qa.rgb=function(){return ut(this.h,this.s,this.l)},ua.hcl=lt;var Za=lt.prototype=new at;Za.brighter=function(t){return new lt(this.h,this.c,Math.min(100,this.l+Ja*(arguments.length?t:1)))},Za.darker=function(t){return new lt(this.h,this.c,Math.max(0,this.l-Ja*(arguments.length?t:1)))},Za.rgb=function(){return ct(this.h,this.c,this.l).rgb()},ua.lab=ht;var Ja=18,ts=.95047,es=1,ns=1.08883,is=ht.prototype=new at;is.brighter=function(t){return new ht(Math.min(100,this.l+Ja*(arguments.length?t:1)),this.a,this.b)},is.darker=function(t){return new ht(Math.max(0,this.l-Ja*(arguments.length?t:1)),this.a,this.b)},is.rgb=function(){return ft(this.l,this.a,this.b)},ua.rgb=mt;var rs=mt.prototype=new at;rs.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,i=this.b,r=30;return e||n||i?(e&&r>e&&(e=r),n&&r>n&&(n=r),i&&r>i&&(i=r),new mt(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,i/t))):new mt(r,r,r)},rs.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new mt(t*this.r,t*this.g,t*this.b)},rs.hsl=function(){return xt(this.r,this.g,this.b)},rs.toString=function(){return"#"+bt(this.r)+bt(this.g)+bt(this.b)};var os=ua.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});os.forEach(function(t,e){os.set(t,_t(e))}),ua.functor=kt,ua.xhr=Et(_),ua.dsv=function(t,e){function n(t,n,o){arguments.length<3&&(o=n,n=null);var a=St(t,e,null==n?i:r(n),o);return a.row=function(t){return arguments.length?a.response(null==(n=t)?i:r(t)):n},a}function i(t){return n.parse(t.responseText)}function r(t){return function(e){return n.parse(e.responseText,t)}}function o(e){return e.map(a).join(t)}function a(t){return s.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var s=new RegExp('["'+t+"\n]"),u=t.charCodeAt(0);return n.parse=function(t,e){var i;return n.parseRows(t,function(t,n){if(i)return i(t,n-1);var r=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");i=e?function(t,n){return e(r(t),n)}:r})},n.parseRows=function(t,e){function n(){if(c>=l)return a;if(r)return r=!1,o;var e=c;if(34===t.charCodeAt(e)){for(var n=e;n++<l;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}c=n+2;var i=t.charCodeAt(n+1);return 13===i?(r=!0,10===t.charCodeAt(n+2)&&++c):10===i&&(r=!0),t.slice(e+1,n).replace(/""/g,'"')}for(;l>c;){var i=t.charCodeAt(c++),s=1;if(10===i)r=!0;else if(13===i)r=!0,10===t.charCodeAt(c)&&(++c,++s);else if(i!==u)continue;return t.slice(e,c-s)}return t.slice(e)}for(var i,r,o={},a={},s=[],l=t.length,c=0,h=0;(i=n())!==a;){for(var f=[];i!==o&&i!==a;)f.push(i),i=n();e&&null==(f=e(f,h++))||s.push(f)}return s},n.format=function(e){if(Array.isArray(e[0]))return n.formatRows(e);var i=new m,r=[];return e.forEach(function(t){for(var e in t)i.has(e)||r.push(i.add(e))}),[r.map(a).join(t)].concat(e.map(function(e){return r.map(function(t){return a(e[t])}).join(t)})).join("\n")},n.formatRows=function(t){return t.map(o).join("\n")},n},ua.csv=ua.dsv(",","text/csv"),ua.tsv=ua.dsv("	","text/tab-separated-values");var as,ss,us,ls,cs=this[b(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};ua.timer=function(){Rt.apply(this,arguments)},ua.timer.flush=function(){Dt(),$t()},ua.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var hs=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"].map(Pt);ua.formatPrefix=function(t,e){var n=0;return(t=+t)&&(0>t&&(t*=-1),e&&(t=ua.round(t,zt(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),hs[8+n/3]};var fs=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,ds=ua.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=ua.round(t,zt(t,e))).toFixed(Math.max(0,Math.min(20,zt(t*(1+1e-15),e))))}}),ps=ua.time={},vs=Date;It.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){gs.setUTCDate.apply(this._,arguments)},setDay:function(){gs.setUTCDay.apply(this._,arguments)},setFullYear:function(){gs.setUTCFullYear.apply(this._,arguments)},setHours:function(){gs.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){gs.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){gs.setUTCMinutes.apply(this._,arguments)},setMonth:function(){gs.setUTCMonth.apply(this._,arguments)},setSeconds:function(){gs.setUTCSeconds.apply(this._,arguments)},setTime:function(){gs.setTime.apply(this._,arguments)}};var gs=Date.prototype;ps.year=qt(function(t){return t=ps.day(t),t.setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),ps.years=ps.year.range,ps.years.utc=ps.year.utc.range,ps.day=qt(function(t){var e=new vs(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),ps.days=ps.day.range,ps.days.utc=ps.day.utc.range,ps.dayOfYear=function(t){var e=ps.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var n=ps[t]=qt(function(t){return(t=ps.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=ps.year(t).getDay();return Math.floor((ps.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});ps[t+"s"]=n.range,ps[t+"s"].utc=n.utc.range,ps[t+"OfYear"]=function(t){var n=ps.year(t).getDay();return Math.floor((ps.dayOfYear(t)+(n+e)%7)/7)}}),ps.week=ps.sunday,ps.weeks=ps.sunday.range,ps.weeks.utc=ps.sunday.utc.range,ps.weekOfYear=ps.sundayOfYear;var ms={"-":"",_:" ",0:"0"},_s=/^\s*\d+/,ys=/^%/;ua.locale=function(t){return{numberFormat:Ot(t),timeFormat:Ht(t)}};var bs=ua.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});ua.format=bs.numberFormat,ua.geo={},le.prototype={s:0,t:0,add:function(t){ce(t,this.t,ws),ce(ws.s,this.s,this),this.s?this.t+=ws.t:this.s=ws.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var ws=new le;ua.geo.stream=function(t,e){t&&xs.hasOwnProperty(t.type)?xs[t.type](t,e):he(t,e)};var xs={Feature:function(t,e){he(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)he(n[i].geometry,e)}},Cs={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){fe(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)fe(n[i],e,0)},Polygon:function(t,e){de(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)de(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)he(n[i],e)}};ua.geo.area=function(t){return As=0,ua.geo.stream(t,ks),As};var As,Ms=new le,ks={sphere:function(){As+=4*Ia},point:w,lineStart:w,lineEnd:w,polygonStart:function(){Ms.reset(),ks.lineStart=pe},polygonEnd:function(){var t=2*Ms;As+=0>t?4*Ia+t:t,ks.lineStart=ks.lineEnd=ks.point=w}};ua.geo.bounds=function(){function t(t,e){y.push(b=[c=t,f=t]),h>e&&(h=e),e>d&&(d=e)}function e(e,n){var i=ve([e*Ba,n*Ba]);if(m){var r=me(m,i),o=[r[1],-r[0],0],a=me(o,r);be(a),a=we(a);var u=e-p,l=u>0?1:-1,v=a[0]*Va*l,g=ba(u)>180;if(g^(v>l*p&&l*e>v)){var _=a[1]*Va;_>d&&(d=_)}else if(v=(v+360)%360-180,g^(v>l*p&&l*e>v)){var _=-a[1]*Va;h>_&&(h=_)}else h>n&&(h=n),n>d&&(d=n);g?p>e?s(c,e)>s(c,f)&&(f=e):s(e,f)>s(c,f)&&(c=e):f>=c?(c>e&&(c=e),e>f&&(f=e)):e>p?s(c,e)>s(c,f)&&(f=e):s(e,f)>s(c,f)&&(c=e)}else t(e,n);m=i,p=e}function n(){w.point=e}function i(){b[0]=c,b[1]=f,w.point=t,m=null}function r(t,n){if(m){var i=t-p;_+=ba(i)>180?i+(i>0?360:-360):i}else v=t,g=n;ks.point(t,n),e(t,n)}function o(){ks.lineStart()}function a(){r(v,g),ks.lineEnd(),ba(_)>Oa&&(c=-(f=180)),b[0]=c,b[1]=f,m=null}function s(t,e){return(e-=t)<0?e+360:e}function u(t,e){return t[0]-e[0]}function l(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var c,h,f,d,p,v,g,m,_,y,b,w={point:t,lineStart:n,lineEnd:i,polygonStart:function(){w.point=r,w.lineStart=o,w.lineEnd=a,_=0,ks.polygonStart()},polygonEnd:function(){ks.polygonEnd(),w.point=t,w.lineStart=n,w.lineEnd=i,0>Ms?(c=-(f=180),h=-(d=90)):_>Oa?d=90:-Oa>_&&(h=-90),b[0]=c,b[1]=f}};return function(t){d=f=-(c=h=1/0),y=[],ua.geo.stream(t,w);var e=y.length;if(e){y.sort(u);for(var n,i=1,r=y[0],o=[r];e>i;++i)n=y[i],l(n[0],r)||l(n[1],r)?(s(r[0],n[1])>s(r[0],r[1])&&(r[1]=n[1]),s(n[0],r[1])>s(r[0],r[1])&&(r[0]=n[0])):o.push(r=n);for(var a,n,p=-(1/0),e=o.length-1,i=0,r=o[e];e>=i;r=n,++i)n=o[i],(a=s(r[1],n[0]))>p&&(p=a,c=n[0],f=r[1])}return y=b=null,c===1/0||h===1/0?[[NaN,NaN],[NaN,NaN]]:[[c,h],[f,d]]}}(),ua.geo.centroid=function(t){Es=Ss=Ts=Fs=Rs=Ns=Ds=$s=zs=Ps=Os=0,ua.geo.stream(t,Ls);var e=zs,n=Ps,i=Os,r=e*e+n*n+i*i;return La>r&&(e=Ns,n=Ds,i=$s,Oa>Ss&&(e=Ts,n=Fs,i=Rs),r=e*e+n*n+i*i,La>r)?[NaN,NaN]:[Math.atan2(n,e)*Va,et(i/Math.sqrt(r))*Va]};var Es,Ss,Ts,Fs,Rs,Ns,Ds,$s,zs,Ps,Os,Ls={sphere:w,point:Ce,lineStart:Me,lineEnd:ke,polygonStart:function(){Ls.lineStart=Ee},polygonEnd:function(){Ls.lineStart=Me}},Is=De(Te,Oe,Ie,[-Ia,-Ia/2]),qs=1e9;ua.geo.clipExtent=function(){var t,e,n,i,r,o,a={stream:function(t){return r&&(r.valid=!1),r=o(t),r.valid=!0,r},extent:function(s){return arguments.length?(o=Be(t=+s[0][0],e=+s[0][1],n=+s[1][0],i=+s[1][1]),r&&(r.valid=!1,r=null),a):[[t,e],[n,i]]}};return a.extent([[0,0],[960,500]])},(ua.geo.conicEqualArea=function(){return Ve(Ue)}).raw=Ue,ua.geo.albers=function(){return ua.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},ua.geo.albersUsa=function(){function t(t){var o=t[0],a=t[1];return e=null,n(o,a),e||(i(o,a),e)||r(o,a),e}var e,n,i,r,o=ua.geo.albers(),a=ua.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=ua.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(t,n){e=[t,n]}};return t.invert=function(t){var e=o.scale(),n=o.translate(),i=(t[0]-n[0])/e,r=(t[1]-n[1])/e;return(r>=.12&&.234>r&&i>=-.425&&-.214>i?a:r>=.166&&.234>r&&i>=-.214&&-.115>i?s:o).invert(t)},t.stream=function(t){var e=o.stream(t),n=a.stream(t),i=s.stream(t);return{point:function(t,r){e.point(t,r),n.point(t,r),i.point(t,r)},sphere:function(){e.sphere(),n.sphere(),i.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),i.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),i.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),i.polygonStart()},polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),i.polygonEnd()}}},t.precision=function(e){return arguments.length?(o.precision(e),a.precision(e),s.precision(e),t):o.precision()},t.scale=function(e){return arguments.length?(o.scale(e),a.scale(.35*e),s.scale(e),t.translate(o.translate())):o.scale()},t.translate=function(e){if(!arguments.length)return o.translate();var l=o.scale(),c=+e[0],h=+e[1];return n=o.translate(e).clipExtent([[c-.455*l,h-.238*l],[c+.455*l,h+.238*l]]).stream(u).point,i=a.translate([c-.307*l,h+.201*l]).clipExtent([[c-.425*l+Oa,h+.12*l+Oa],[c-.214*l-Oa,h+.234*l-Oa]]).stream(u).point,r=s.translate([c-.205*l,h+.212*l]).clipExtent([[c-.214*l+Oa,h+.166*l+Oa],[c-.115*l-Oa,h+.234*l-Oa]]).stream(u).point,t},t.scale(1070)};var js,Hs,Bs,Vs,Us,Ws,Gs={point:w,lineStart:w,lineEnd:w,polygonStart:function(){Hs=0,Gs.lineStart=We},polygonEnd:function(){Gs.lineStart=Gs.lineEnd=Gs.point=w,js+=ba(Hs/2)}},Ys={point:Ge,lineStart:w,lineEnd:w,polygonStart:w,polygonEnd:w},Xs={point:Ke,lineStart:Qe,lineEnd:Ze,polygonStart:function(){Xs.lineStart=Je},polygonEnd:function(){Xs.point=Ke,Xs.lineStart=Qe,Xs.lineEnd=Ze}};ua.geo.path=function(){function t(t){return t&&("function"==typeof s&&o.pointRadius(+s.apply(this,arguments)),a&&a.valid||(a=r(o)),ua.geo.stream(t,a)),o.result()}function e(){return a=null,t}var n,i,r,o,a,s=4.5;return t.area=function(t){return js=0,ua.geo.stream(t,r(Gs)),js},t.centroid=function(t){return Ts=Fs=Rs=Ns=Ds=$s=zs=Ps=Os=0,ua.geo.stream(t,r(Xs)),Os?[zs/Os,Ps/Os]:$s?[Ns/$s,Ds/$s]:Rs?[Ts/Rs,Fs/Rs]:[NaN,NaN]},t.bounds=function(t){return Us=Ws=-(Bs=Vs=1/0),ua.geo.stream(t,r(Ys)),[[Bs,Vs],[Us,Ws]]},t.projection=function(t){return arguments.length?(r=(n=t)?t.stream||nn(t):_,e()):n},t.context=function(t){return arguments.length?(o=null==(i=t)?new Ye:new tn(t),"function"!=typeof s&&o.pointRadius(s),e()):i},t.pointRadius=function(e){return arguments.length?(s="function"==typeof e?e:(o.pointRadius(+e),+e),t):s},t.projection(ua.geo.albersUsa()).context(null)},ua.geo.transform=function(t){return{stream:function(e){var n=new rn(e);for(var i in t)n[i]=t[i];return n}}},rn.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},ua.geo.projection=an,ua.geo.projectionMutator=sn,(ua.geo.equirectangular=function(){return an(ln)}).raw=ln.invert=ln,ua.geo.rotation=function(t){function e(e){return e=t(e[0]*Ba,e[1]*Ba),e[0]*=Va,e[1]*=Va,e}return t=hn(t[0]%360*Ba,t[1]*Ba,t.length>2?t[2]*Ba:0),e.invert=function(e){return e=t.invert(e[0]*Ba,e[1]*Ba),e[0]*=Va,e[1]*=Va,e},e},cn.invert=ln,ua.geo.circle=function(){function t(){var t="function"==typeof i?i.apply(this,arguments):i,e=hn(-t[0]*Ba,-t[1]*Ba,0).invert,r=[];return n(null,null,1,{point:function(t,n){r.push(t=e(t,n)),t[0]*=Va,t[1]*=Va}}),{type:"Polygon",coordinates:[r]}}var e,n,i=[0,0],r=6;return t.origin=function(e){return arguments.length?(i=e,t):i},t.angle=function(i){return arguments.length?(n=vn((e=+i)*Ba,r*Ba),t):e},t.precision=function(i){return arguments.length?(n=vn(e*Ba,(r=+i)*Ba),t):r},t.angle(90)},ua.geo.distance=function(t,e){var n,i=(e[0]-t[0])*Ba,r=t[1]*Ba,o=e[1]*Ba,a=Math.sin(i),s=Math.cos(i),u=Math.sin(r),l=Math.cos(r),c=Math.sin(o),h=Math.cos(o);return Math.atan2(Math.sqrt((n=h*a)*n+(n=l*c-u*h*s)*n),u*c+l*h*s)},ua.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return ua.range(Math.ceil(o/g)*g,r,g).map(f).concat(ua.range(Math.ceil(l/m)*m,u,m).map(d)).concat(ua.range(Math.ceil(i/p)*p,n,p).filter(function(t){return ba(t%g)>Oa}).map(c)).concat(ua.range(Math.ceil(s/v)*v,a,v).filter(function(t){return ba(t%m)>Oa}).map(h))}var n,i,r,o,a,s,u,l,c,h,f,d,p=10,v=p,g=90,m=360,_=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[f(o).concat(d(u).slice(1),f(r).reverse().slice(1),d(l).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.majorExtent(e).minorExtent(e):t.minorExtent()},t.majorExtent=function(e){return arguments.length?(o=+e[0][0],r=+e[1][0],l=+e[0][1],u=+e[1][1],o>r&&(e=o,o=r,r=e),l>u&&(e=l,l=u,u=e),t.precision(_)):[[o,l],[r,u]]},t.minorExtent=function(e){return arguments.length?(i=+e[0][0],n=+e[1][0],s=+e[0][1],a=+e[1][1],i>n&&(e=i,i=n,n=e),s>a&&(e=s,s=a,a=e),t.precision(_)):[[i,s],[n,a]]},t.step=function(e){return arguments.length?t.majorStep(e).minorStep(e):t.minorStep()},t.majorStep=function(e){return arguments.length?(g=+e[0],m=+e[1],t):[g,m]},t.minorStep=function(e){return arguments.length?(p=+e[0],v=+e[1],t):[p,v]},t.precision=function(e){return arguments.length?(_=+e,c=mn(s,a,90),h=_n(i,n,_),f=mn(l,u,90),d=_n(o,r,_),t):_},t.majorExtent([[-180,-90+Oa],[180,90-Oa]]).minorExtent([[-180,-80-Oa],[180,80+Oa]])},ua.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[e||i.apply(this,arguments),n||r.apply(this,arguments)]}}var e,n,i=yn,r=bn;return t.distance=function(){return ua.geo.distance(e||i.apply(this,arguments),n||r.apply(this,arguments))},t.source=function(n){return arguments.length?(i=n,e="function"==typeof n?null:n,t):i},t.target=function(e){return arguments.length?(r=e,n="function"==typeof e?null:e,t):r},t.precision=function(){return arguments.length?t:0},t},ua.geo.interpolate=function(t,e){return wn(t[0]*Ba,t[1]*Ba,e[0]*Ba,e[1]*Ba)},ua.geo.length=function(t){return Ks=0,ua.geo.stream(t,Qs),Ks};var Ks,Qs={sphere:w,point:w,lineStart:xn,lineEnd:w,polygonStart:w,polygonEnd:w},Zs=Cn(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(ua.geo.azimuthalEqualArea=function(){return an(Zs)}).raw=Zs;var Js=Cn(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},_);(ua.geo.azimuthalEquidistant=function(){return an(Js)}).raw=Js,(ua.geo.conicConformal=function(){return Ve(An)}).raw=An,(ua.geo.conicEquidistant=function(){return Ve(Mn)}).raw=Mn;var tu=Cn(function(t){return 1/t},Math.atan);(ua.geo.gnomonic=function(){return an(tu)}).raw=tu,kn.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Ha]},(ua.geo.mercator=function(){return En(kn)}).raw=kn;var eu=Cn(function(){return 1},Math.asin);(ua.geo.orthographic=function(){return an(eu)}).raw=eu;var nu=Cn(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(ua.geo.stereographic=function(){return an(nu)}).raw=nu,Sn.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Ha]},(ua.geo.transverseMercator=function(){var t=En(Sn),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return t?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90])}).raw=Sn,ua.geom={},ua.geom.hull=function(t){function e(t){if(t.length<3)return[];var e,r=kt(n),o=kt(i),a=t.length,s=[],u=[];for(e=0;a>e;e++)s.push([+r.call(this,t[e],e),+o.call(this,t[e],e),e]);for(s.sort(Nn),e=0;a>e;e++)u.push([s[e][0],-s[e][1]]);var l=Rn(s),c=Rn(u),h=c[0]===l[0],f=c[c.length-1]===l[l.length-1],d=[];for(e=l.length-1;e>=0;--e)d.push(t[s[l[e]][2]]);for(e=+h;e<c.length-f;++e)d.push(t[s[c[e]][2]]);return d}var n=Tn,i=Fn;return arguments.length?e(t):(e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(i=t,
e):i},e)},ua.geom.polygon=function(t){return Ma(t,iu),t};var iu=ua.geom.polygon.prototype=[];iu.area=function(){for(var t,e=-1,n=this.length,i=this[n-1],r=0;++e<n;)t=i,i=this[e],r+=t[1]*i[0]-t[0]*i[1];return.5*r},iu.centroid=function(t){var e,n,i=-1,r=this.length,o=0,a=0,s=this[r-1];for(arguments.length||(t=-1/(6*this.area()));++i<r;)e=s,s=this[i],n=e[0]*s[1]-s[0]*e[1],o+=(e[0]+s[0])*n,a+=(e[1]+s[1])*n;return[o*t,a*t]},iu.clip=function(t){for(var e,n,i,r,o,a,s=zn(t),u=-1,l=this.length-zn(this),c=this[l-1];++u<l;){for(e=t.slice(),t.length=0,r=this[u],o=e[(i=e.length-s)-1],n=-1;++n<i;)a=e[n],Dn(a,c,r)?(Dn(o,c,r)||t.push($n(o,a,c,r)),t.push(a)):Dn(o,c,r)&&t.push($n(o,a,c,r)),o=a;s&&t.push(t[0]),c=r}return t};var ru,ou,au,su,uu,lu=[],cu=[];Bn.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)t=e[n].edge,t.b&&t.a||e.splice(n,1);return e.sort(Un),e.length},ei.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},ni.prototype={insert:function(t,e){var n,i,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=ai(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)i=n.U,n===i.L?(r=i.R,r&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.R&&(ri(this,n),t=n,n=t.U),n.C=!1,i.C=!0,oi(this,i))):(r=i.L,r&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.L&&(oi(this,n),t=n,n=t.U),n.C=!1,i.C=!0,ri(this,i))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i,r=t.U,o=t.L,a=t.R;if(n=o?a?ai(a):o:a,r?r.L===t?r.L=n:r.R=n:this._=n,o&&a?(i=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(r=n.U,n.U=t.U,t=n.R,r.L=t,n.R=a,a.U=n):(n.U=r,r=n,t=n.R)):(i=t.C,t=n),t&&(t.U=r),!i){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===r.L){if(e=r.R,e.C&&(e.C=!1,r.C=!0,ri(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,oi(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,ri(this,r),t=this._;break}}else if(e=r.L,e.C&&(e.C=!1,r.C=!0,oi(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,ri(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,oi(this,r),t=this._;break}e.C=!0,t=r,r=r.U}while(!t.C);t&&(t.C=!1)}}},ua.geom.voronoi=function(t){function e(t){var e=new Array(t.length),i=s[0][0],r=s[0][1],o=s[1][0],a=s[1][1];return si(n(t),s).cells.forEach(function(n,s){var u=n.edges,l=n.site,c=e[s]=u.length?u.map(function(t){var e=t.start();return[e.x,e.y]}):l.x>=i&&l.x<=o&&l.y>=r&&l.y<=a?[[i,a],[o,a],[o,r],[i,r]]:[];c.point=t[s]}),e}function n(t){return t.map(function(t,e){return{x:Math.round(o(t,e)/Oa)*Oa,y:Math.round(a(t,e)/Oa)*Oa,i:e}})}var i=Tn,r=Fn,o=i,a=r,s=hu;return t?e(t):(e.links=function(t){return si(n(t)).edges.filter(function(t){return t.l&&t.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},e.triangles=function(t){var e=[];return si(n(t)).cells.forEach(function(n,i){for(var r,o,a=n.site,s=n.edges.sort(Un),u=-1,l=s.length,c=s[l-1].edge,h=c.l===a?c.r:c.l;++u<l;)r=c,o=h,c=s[u].edge,h=c.l===a?c.r:c.l,i<o.i&&i<h.i&&li(a,o,h)<0&&e.push([t[i],t[o.i],t[h.i]])}),e},e.x=function(t){return arguments.length?(o=kt(i=t),e):i},e.y=function(t){return arguments.length?(a=kt(r=t),e):r},e.clipExtent=function(t){return arguments.length?(s=null==t?hu:t,e):s===hu?null:s},e.size=function(t){return arguments.length?e.clipExtent(t&&[[0,0],t]):s===hu?null:s&&s[1]},e)};var hu=[[-1e6,-1e6],[1e6,1e6]];ua.geom.delaunay=function(t){return ua.geom.voronoi().triangles(t)},ua.geom.quadtree=function(t,e,n,i,r){function o(t){function o(t,e,n,i,r,o,a,s){if(!isNaN(n)&&!isNaN(i))if(t.leaf){var u=t.x,c=t.y;if(null!=u)if(ba(u-n)+ba(c-i)<.01)l(t,e,n,i,r,o,a,s);else{var h=t.point;t.x=t.y=t.point=null,l(t,h,u,c,r,o,a,s),l(t,e,n,i,r,o,a,s)}else t.x=n,t.y=i,t.point=e}else l(t,e,n,i,r,o,a,s)}function l(t,e,n,i,r,a,s,u){var l=.5*(r+s),c=.5*(a+u),h=n>=l,f=i>=c,d=f<<1|h;t.leaf=!1,t=t.nodes[d]||(t.nodes[d]=fi()),h?r=l:s=l,f?a=c:u=c,o(t,e,n,i,r,a,s,u)}var c,h,f,d,p,v,g,m,_,y=kt(s),b=kt(u);if(null!=e)v=e,g=n,m=i,_=r;else if(m=_=-(v=g=1/0),h=[],f=[],p=t.length,a)for(d=0;p>d;++d)c=t[d],c.x<v&&(v=c.x),c.y<g&&(g=c.y),c.x>m&&(m=c.x),c.y>_&&(_=c.y),h.push(c.x),f.push(c.y);else for(d=0;p>d;++d){var w=+y(c=t[d],d),x=+b(c,d);v>w&&(v=w),g>x&&(g=x),w>m&&(m=w),x>_&&(_=x),h.push(w),f.push(x)}var C=m-v,A=_-g;C>A?_=g+C:m=v+A;var M=fi();if(M.add=function(t){o(M,t,+y(t,++d),+b(t,d),v,g,m,_)},M.visit=function(t){di(t,M,v,g,m,_)},M.find=function(t){return pi(M,t[0],t[1],v,g,m,_)},d=-1,null==e){for(;++d<p;)o(M,t[d],h[d],f[d],v,g,m,_);--d}else t.forEach(M.add);return h=f=t=c=null,M}var a,s=Tn,u=Fn;return(a=arguments.length)?(s=ci,u=hi,3===a&&(r=n,i=e,n=e=0),o(t)):(o.x=function(t){return arguments.length?(s=t,o):s},o.y=function(t){return arguments.length?(u=t,o):u},o.extent=function(t){return arguments.length?(null==t?e=n=i=r=null:(e=+t[0][0],n=+t[0][1],i=+t[1][0],r=+t[1][1]),o):null==e?null:[[e,n],[i,r]]},o.size=function(t){return arguments.length?(null==t?e=n=i=r=null:(e=n=0,i=+t[0],r=+t[1]),o):null==e?null:[i-e,r-n]},o)},ua.interpolateRgb=vi,ua.interpolateObject=gi,ua.interpolateNumber=mi,ua.interpolateString=_i;var fu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,du=new RegExp(fu.source,"g");ua.interpolate=yi,ua.interpolators=[function(t,e){var n=typeof e;return("string"===n?os.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?vi:_i:e instanceof at?vi:Array.isArray(e)?bi:"object"===n&&isNaN(e)?gi:mi)(t,e)}],ua.interpolateArray=bi;var pu=function(){return _},vu=ua.map({linear:pu,poly:Ei,quad:function(){return Ai},cubic:function(){return Mi},sin:function(){return Si},exp:function(){return Ti},circle:function(){return Fi},elastic:Ri,back:Ni,bounce:function(){return Di}}),gu=ua.map({"in":_,out:xi,"in-out":Ci,"out-in":function(t){return Ci(xi(t))}});ua.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.slice(0,e):t,i=e>=0?t.slice(e+1):"in";return n=vu.get(n)||pu,i=gu.get(i)||_,wi(i(n.apply(null,la.call(arguments,1))))},ua.interpolateHcl=$i,ua.interpolateHsl=zi,ua.interpolateLab=Pi,ua.interpolateRound=Oi,ua.transform=function(t){var e=ha.createElementNS(ua.ns.prefix.svg,"g");return(ua.transform=function(t){if(null!=t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate()}return new Li(n?n.matrix:mu)})(t)},Li.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var mu={a:1,b:0,c:0,d:1,e:0,f:0};ua.interpolateTransform=Gi,ua.layout={},ua.layout.bundle=function(){return function(t){for(var e=[],n=-1,i=t.length;++n<i;)e.push(Ki(t[n]));return e}},ua.layout.chord=function(){function t(){var t,l,h,f,d,p={},v=[],g=ua.range(o),m=[];for(n=[],i=[],t=0,f=-1;++f<o;){for(l=0,d=-1;++d<o;)l+=r[f][d];v.push(l),m.push(ua.range(o)),t+=l}for(a&&g.sort(function(t,e){return a(v[t],v[e])}),s&&m.forEach(function(t,e){t.sort(function(t,n){return s(r[e][t],r[e][n])})}),t=(qa-c*o)/t,l=0,f=-1;++f<o;){for(h=l,d=-1;++d<o;){var _=g[f],y=m[_][d],b=r[_][y],w=l,x=l+=b*t;p[_+"-"+y]={index:_,subindex:y,startAngle:w,endAngle:x,value:b}}i[_]={index:_,startAngle:h,endAngle:l,value:v[_]},l+=c}for(f=-1;++f<o;)for(d=f-1;++d<o;){var C=p[f+"-"+d],A=p[d+"-"+f];(C.value||A.value)&&n.push(C.value<A.value?{source:A,target:C}:{source:C,target:A})}u&&e()}function e(){n.sort(function(t,e){return u((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var n,i,r,o,a,s,u,l={},c=0;return l.matrix=function(t){return arguments.length?(o=(r=t)&&r.length,n=i=null,l):r},l.padding=function(t){return arguments.length?(c=t,n=i=null,l):c},l.sortGroups=function(t){return arguments.length?(a=t,n=i=null,l):a},l.sortSubgroups=function(t){return arguments.length?(s=t,n=null,l):s},l.sortChords=function(t){return arguments.length?(u=t,n&&e(),l):u},l.chords=function(){return n||t(),n},l.groups=function(){return i||t(),i},l},ua.layout.force=function(){function t(t){return function(e,n,i,r){if(e.point!==t){var o=e.cx-t.x,a=e.cy-t.y,s=r-n,u=o*o+a*a;if(u>s*s/m){if(v>u){var l=e.charge/u;t.px-=o*l,t.py-=a*l}return!0}if(e.point&&u&&v>u){var l=e.pointCharge/u;t.px-=o*l,t.py-=a*l}}return!e.charge}}function e(t){t.px=ua.event.x,t.py=ua.event.y,u.resume()}var n,i,r,o,a,s,u={},l=ua.dispatch("start","tick","end"),c=[1,1],h=.9,f=_u,d=yu,p=-30,v=bu,g=.1,m=.64,y=[],b=[];return u.tick=function(){if((r*=.99)<.005)return n=null,l.end({type:"end",alpha:r=0}),!0;var e,i,u,f,d,v,m,_,w,x=y.length,C=b.length;for(i=0;C>i;++i)u=b[i],f=u.source,d=u.target,_=d.x-f.x,w=d.y-f.y,(v=_*_+w*w)&&(v=r*a[i]*((v=Math.sqrt(v))-o[i])/v,_*=v,w*=v,d.x-=_*(m=f.weight+d.weight?f.weight/(f.weight+d.weight):.5),d.y-=w*m,f.x+=_*(m=1-m),f.y+=w*m);if((m=r*g)&&(_=c[0]/2,w=c[1]/2,i=-1,m))for(;++i<x;)u=y[i],u.x+=(_-u.x)*m,u.y+=(w-u.y)*m;if(p)for(ir(e=ua.geom.quadtree(y),r,s),i=-1;++i<x;)(u=y[i]).fixed||e.visit(t(u));for(i=-1;++i<x;)u=y[i],u.fixed?(u.x=u.px,u.y=u.py):(u.x-=(u.px-(u.px=u.x))*h,u.y-=(u.py-(u.py=u.y))*h);l.tick({type:"tick",alpha:r})},u.nodes=function(t){return arguments.length?(y=t,u):y},u.links=function(t){return arguments.length?(b=t,u):b},u.size=function(t){return arguments.length?(c=t,u):c},u.linkDistance=function(t){return arguments.length?(f="function"==typeof t?t:+t,u):f},u.distance=u.linkDistance,u.linkStrength=function(t){return arguments.length?(d="function"==typeof t?t:+t,u):d},u.friction=function(t){return arguments.length?(h=+t,u):h},u.charge=function(t){return arguments.length?(p="function"==typeof t?t:+t,u):p},u.chargeDistance=function(t){return arguments.length?(v=t*t,u):Math.sqrt(v)},u.gravity=function(t){return arguments.length?(g=+t,u):g},u.theta=function(t){return arguments.length?(m=t*t,u):Math.sqrt(m)},u.alpha=function(t){return arguments.length?(t=+t,r?t>0?r=t:(n.c=null,n.t=NaN,n=null,l.end({type:"end",alpha:r=0})):t>0&&(l.start({type:"start",alpha:r=t}),n=Rt(u.tick)),u):r},u.start=function(){function t(t,i){if(!n){for(n=new Array(r),u=0;r>u;++u)n[u]=[];for(u=0;l>u;++u){var o=b[u];n[o.source.index].push(o.target),n[o.target.index].push(o.source)}}for(var a,s=n[e],u=-1,c=s.length;++u<c;)if(!isNaN(a=s[u][t]))return a;return Math.random()*i}var e,n,i,r=y.length,l=b.length,h=c[0],v=c[1];for(e=0;r>e;++e)(i=y[e]).index=e,i.weight=0;for(e=0;l>e;++e)i=b[e],"number"==typeof i.source&&(i.source=y[i.source]),"number"==typeof i.target&&(i.target=y[i.target]),++i.source.weight,++i.target.weight;for(e=0;r>e;++e)i=y[e],isNaN(i.x)&&(i.x=t("x",h)),isNaN(i.y)&&(i.y=t("y",v)),isNaN(i.px)&&(i.px=i.x),isNaN(i.py)&&(i.py=i.y);if(o=[],"function"==typeof f)for(e=0;l>e;++e)o[e]=+f.call(this,b[e],e);else for(e=0;l>e;++e)o[e]=f;if(a=[],"function"==typeof d)for(e=0;l>e;++e)a[e]=+d.call(this,b[e],e);else for(e=0;l>e;++e)a[e]=d;if(s=[],"function"==typeof p)for(e=0;r>e;++e)s[e]=+p.call(this,y[e],e);else for(e=0;r>e;++e)s[e]=p;return u.resume()},u.resume=function(){return u.alpha(.1)},u.stop=function(){return u.alpha(0)},u.drag=function(){return i||(i=ua.behavior.drag().origin(_).on("dragstart.force",Ji).on("drag.force",e).on("dragend.force",tr)),arguments.length?void this.on("mouseover.force",er).on("mouseout.force",nr).call(i):i},ua.rebind(u,l,"on")};var _u=20,yu=1,bu=1/0;ua.layout.hierarchy=function(){function t(r){var o,a=[r],s=[];for(r.depth=0;null!=(o=a.pop());)if(s.push(o),(l=n.call(t,o,o.depth))&&(u=l.length)){for(var u,l,c;--u>=0;)a.push(c=l[u]),c.parent=o,c.depth=o.depth+1;i&&(o.value=0),o.children=l}else i&&(o.value=+i.call(t,o,o.depth)||0),delete o.children;return ar(r,function(t){var n,r;e&&(n=t.children)&&n.sort(e),i&&(r=t.parent)&&(r.value+=t.value)}),s}var e=lr,n=sr,i=ur;return t.sort=function(n){return arguments.length?(e=n,t):e},t.children=function(e){return arguments.length?(n=e,t):n},t.value=function(e){return arguments.length?(i=e,t):i},t.revalue=function(e){return i&&(or(e,function(t){t.children&&(t.value=0)}),ar(e,function(e){var n;e.children||(e.value=+i.call(t,e,e.depth)||0),(n=e.parent)&&(n.value+=e.value)})),e},t},ua.layout.partition=function(){function t(e,n,i,r){var o=e.children;if(e.x=n,e.y=e.depth*r,e.dx=i,e.dy=r,o&&(a=o.length)){var a,s,u,l=-1;for(i=e.value?i/e.value:0;++l<a;)t(s=o[l],n,u=s.value*i,r),n+=u}}function e(t){var n=t.children,i=0;if(n&&(r=n.length))for(var r,o=-1;++o<r;)i=Math.max(i,e(n[o]));return 1+i}function n(n,o){var a=i.call(this,n,o);return t(a[0],0,r[0],r[1]/e(a[0])),a}var i=ua.layout.hierarchy(),r=[1,1];return n.size=function(t){return arguments.length?(r=t,n):r},rr(n,i)},ua.layout.pie=function(){function t(a){var s,u=a.length,l=a.map(function(n,i){return+e.call(t,n,i)}),c=+("function"==typeof i?i.apply(this,arguments):i),h=("function"==typeof r?r.apply(this,arguments):r)-c,f=Math.min(Math.abs(h)/u,+("function"==typeof o?o.apply(this,arguments):o)),d=f*(0>h?-1:1),p=ua.sum(l),v=p?(h-u*d)/p:0,g=ua.range(u),m=[];return null!=n&&g.sort(n===wu?function(t,e){return l[e]-l[t]}:function(t,e){return n(a[t],a[e])}),g.forEach(function(t){m[t]={data:a[t],value:s=l[t],startAngle:c,endAngle:c+=s*v+d,padAngle:f}}),m}var e=Number,n=wu,i=0,r=qa,o=0;return t.value=function(n){return arguments.length?(e=n,t):e},t.sort=function(e){return arguments.length?(n=e,t):n},t.startAngle=function(e){return arguments.length?(i=e,t):i},t.endAngle=function(e){return arguments.length?(r=e,t):r},t.padAngle=function(e){return arguments.length?(o=e,t):o},t};var wu={};ua.layout.stack=function(){function t(s,u){if(!(f=s.length))return s;var l=s.map(function(n,i){return e.call(t,n,i)}),c=l.map(function(e){return e.map(function(e,n){return[o.call(t,e,n),a.call(t,e,n)]})}),h=n.call(t,c,u);l=ua.permute(l,h),c=ua.permute(c,h);var f,d,p,v,g=i.call(t,c,u),m=l[0].length;for(p=0;m>p;++p)for(r.call(t,l[0][p],v=g[p],c[0][p][1]),d=1;f>d;++d)r.call(t,l[d][p],v+=c[d-1][p][1],c[d][p][1]);return s}var e=_,n=pr,i=vr,r=dr,o=hr,a=fr;return t.values=function(n){return arguments.length?(e=n,t):e},t.order=function(e){return arguments.length?(n="function"==typeof e?e:xu.get(e)||pr,t):n},t.offset=function(e){return arguments.length?(i="function"==typeof e?e:Cu.get(e)||vr,t):i},t.x=function(e){return arguments.length?(o=e,t):o},t.y=function(e){return arguments.length?(a=e,t):a},t.out=function(e){return arguments.length?(r=e,t):r},t};var xu=ua.map({"inside-out":function(t){var e,n,i=t.length,r=t.map(gr),o=t.map(mr),a=ua.range(i).sort(function(t,e){return r[t]-r[e]}),s=0,u=0,l=[],c=[];for(e=0;i>e;++e)n=a[e],u>s?(s+=o[n],l.push(n)):(u+=o[n],c.push(n));return c.reverse().concat(l)},reverse:function(t){return ua.range(t.length).reverse()},"default":pr}),Cu=ua.map({silhouette:function(t){var e,n,i,r=t.length,o=t[0].length,a=[],s=0,u=[];for(n=0;o>n;++n){for(e=0,i=0;r>e;e++)i+=t[e][n][1];i>s&&(s=i),a.push(i)}for(n=0;o>n;++n)u[n]=(s-a[n])/2;return u},wiggle:function(t){var e,n,i,r,o,a,s,u,l,c=t.length,h=t[0],f=h.length,d=[];for(d[0]=u=l=0,n=1;f>n;++n){for(e=0,r=0;c>e;++e)r+=t[e][n][1];for(e=0,o=0,s=h[n][0]-h[n-1][0];c>e;++e){for(i=0,a=(t[e][n][1]-t[e][n-1][1])/(2*s);e>i;++i)a+=(t[i][n][1]-t[i][n-1][1])/s;o+=a*t[e][n][1]}d[n]=u-=r?o/r*s:0,l>u&&(l=u)}for(n=0;f>n;++n)d[n]-=l;return d},expand:function(t){var e,n,i,r=t.length,o=t[0].length,a=1/r,s=[];for(n=0;o>n;++n){for(e=0,i=0;r>e;e++)i+=t[e][n][1];if(i)for(e=0;r>e;e++)t[e][n][1]/=i;else for(e=0;r>e;e++)t[e][n][1]=a}for(n=0;o>n;++n)s[n]=0;return s},zero:vr});ua.layout.histogram=function(){function t(t,o){for(var a,s,u=[],l=t.map(n,this),c=i.call(this,l,o),h=r.call(this,c,l,o),o=-1,f=l.length,d=h.length-1,p=e?1:1/f;++o<d;)a=u[o]=[],a.dx=h[o+1]-(a.x=h[o]),a.y=0;if(d>0)for(o=-1;++o<f;)s=l[o],s>=c[0]&&s<=c[1]&&(a=u[ua.bisect(h,s,1,d)-1],a.y+=p,a.push(t[o]));return u}var e=!0,n=Number,i=wr,r=yr;return t.value=function(e){return arguments.length?(n=e,t):n},t.range=function(e){return arguments.length?(i=kt(e),t):i},t.bins=function(e){return arguments.length?(r="number"==typeof e?function(t){return br(t,e)}:kt(e),t):r},t.frequency=function(n){return arguments.length?(e=!!n,t):e},t},ua.layout.pack=function(){function t(t,o){var a=n.call(this,t,o),s=a[0],u=r[0],l=r[1],c=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(s.x=s.y=0,ar(s,function(t){t.r=+c(t.value)}),ar(s,kr),i){var h=i*(e?1:Math.max(2*s.r/u,2*s.r/l))/2;ar(s,function(t){t.r+=h}),ar(s,kr),ar(s,function(t){t.r-=h})}return Tr(s,u/2,l/2,e?1:1/Math.max(2*s.r/u,2*s.r/l)),a}var e,n=ua.layout.hierarchy().sort(xr),i=0,r=[1,1];return t.size=function(e){return arguments.length?(r=e,t):r},t.radius=function(n){return arguments.length?(e=null==n||"function"==typeof n?n:+n,t):e},t.padding=function(e){return arguments.length?(i=+e,t):i},rr(t,n)},ua.layout.tree=function(){function t(t,r){var c=a.call(this,t,r),h=c[0],f=e(h);if(ar(f,n),f.parent.m=-f.z,or(f,i),l)or(h,o);else{var d=h,p=h,v=h;or(h,function(t){t.x<d.x&&(d=t),t.x>p.x&&(p=t),t.depth>v.depth&&(v=t)});var g=s(d,p)/2-d.x,m=u[0]/(p.x+s(p,d)/2+g),_=u[1]/(v.depth||1);or(h,function(t){t.x=(t.x+g)*m,t.y=t.depth*_})}return c}function e(t){for(var e,n={A:null,children:[t]},i=[n];null!=(e=i.pop());)for(var r,o=e.children,a=0,s=o.length;s>a;++a)i.push((o[a]=r={_:o[a],parent:e,children:(r=o[a].children)&&r.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=r);return n.children[0]}function n(t){var e=t.children,n=t.parent.children,i=t.i?n[t.i-1]:null;if(e.length){zr(t);var o=(e[0].z+e[e.length-1].z)/2;i?(t.z=i.z+s(t._,i._),t.m=t.z-o):t.z=o}else i&&(t.z=i.z+s(t._,i._));t.parent.A=r(t,i,t.parent.A||n[0])}function i(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function r(t,e,n){if(e){for(var i,r=t,o=t,a=e,u=r.parent.children[0],l=r.m,c=o.m,h=a.m,f=u.m;a=Dr(a),r=Nr(r),a&&r;)u=Nr(u),o=Dr(o),o.a=t,i=a.z+h-r.z-l+s(a._,r._),i>0&&($r(Pr(a,t,n),t,i),l+=i,c+=i),h+=a.m,l+=r.m,f+=u.m,c+=o.m;a&&!Dr(o)&&(o.t=a,o.m+=h-c),r&&!Nr(u)&&(u.t=r,u.m+=l-f,n=t)}return n}function o(t){t.x*=u[0],t.y=t.depth*u[1]}var a=ua.layout.hierarchy().sort(null).value(null),s=Rr,u=[1,1],l=null;return t.separation=function(e){return arguments.length?(s=e,t):s},t.size=function(e){return arguments.length?(l=null==(u=e)?o:null,t):l?null:u},t.nodeSize=function(e){return arguments.length?(l=null==(u=e)?null:o,t):l?u:null},rr(t,a)},ua.layout.cluster=function(){function t(t,o){var a,s=e.call(this,t,o),u=s[0],l=0;ar(u,function(t){var e=t.children;e&&e.length?(t.x=Lr(e),t.y=Or(e)):(t.x=a?l+=n(t,a):0,t.y=0,a=t)});var c=Ir(u),h=qr(u),f=c.x-n(c,h)/2,d=h.x+n(h,c)/2;return ar(u,r?function(t){t.x=(t.x-u.x)*i[0],t.y=(u.y-t.y)*i[1]}:function(t){t.x=(t.x-f)/(d-f)*i[0],t.y=(1-(u.y?t.y/u.y:1))*i[1]}),s}var e=ua.layout.hierarchy().sort(null).value(null),n=Rr,i=[1,1],r=!1;return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(r=null==(i=e),t):r?null:i},t.nodeSize=function(e){return arguments.length?(r=null!=(i=e),t):r?i:null},rr(t,e)},ua.layout.treemap=function(){function t(t,e){for(var n,i,r=-1,o=t.length;++r<o;)i=(n=t[r]).value*(0>e?0:e),n.area=isNaN(i)||0>=i?0:i}function e(n){var o=n.children;if(o&&o.length){var a,s,u,l=h(n),c=[],f=o.slice(),p=1/0,v="slice"===d?l.dx:"dice"===d?l.dy:"slice-dice"===d?1&n.depth?l.dy:l.dx:Math.min(l.dx,l.dy);for(t(f,l.dx*l.dy/n.value),c.area=0;(u=f.length)>0;)c.push(a=f[u-1]),c.area+=a.area,"squarify"!==d||(s=i(c,v))<=p?(f.pop(),p=s):(c.area-=c.pop().area,r(c,v,l,!1),v=Math.min(l.dx,l.dy),c.length=c.area=0,p=1/0);c.length&&(r(c,v,l,!0),c.length=c.area=0),o.forEach(e)}}function n(e){var i=e.children;if(i&&i.length){var o,a=h(e),s=i.slice(),u=[];for(t(s,a.dx*a.dy/e.value),u.area=0;o=s.pop();)u.push(o),u.area+=o.area,null!=o.z&&(r(u,o.z?a.dx:a.dy,a,!s.length),u.length=u.area=0);i.forEach(n)}}function i(t,e){for(var n,i=t.area,r=0,o=1/0,a=-1,s=t.length;++a<s;)(n=t[a].area)&&(o>n&&(o=n),n>r&&(r=n));return i*=i,e*=e,i?Math.max(e*r*p/i,i/(e*o*p)):1/0}function r(t,e,n,i){var r,o=-1,a=t.length,s=n.x,l=n.y,c=e?u(t.area/e):0;if(e==n.dx){for((i||c>n.dy)&&(c=n.dy);++o<a;)r=t[o],r.x=s,r.y=l,r.dy=c,s+=r.dx=Math.min(n.x+n.dx-s,c?u(r.area/c):0);r.z=!0,r.dx+=n.x+n.dx-s,n.y+=c,n.dy-=c}else{for((i||c>n.dx)&&(c=n.dx);++o<a;)r=t[o],r.x=s,r.y=l,r.dx=c,l+=r.dy=Math.min(n.y+n.dy-l,c?u(r.area/c):0);r.z=!1,r.dy+=n.y+n.dy-l,n.x+=c,n.dx-=c}}function o(i){var r=a||s(i),o=r[0];return o.x=o.y=0,o.value?(o.dx=l[0],o.dy=l[1]):o.dx=o.dy=0,a&&s.revalue(o),t([o],o.dx*o.dy/o.value),(a?n:e)(o),f&&(a=r),r}var a,s=ua.layout.hierarchy(),u=Math.round,l=[1,1],c=null,h=jr,f=!1,d="squarify",p=.5*(1+Math.sqrt(5));return o.size=function(t){return arguments.length?(l=t,o):l},o.padding=function(t){function e(e){var n=t.call(o,e,e.depth);return null==n?jr(e):Hr(e,"number"==typeof n?[n,n,n,n]:n)}function n(e){return Hr(e,t)}if(!arguments.length)return c;var i;return h=null==(c=t)?jr:"function"==(i=typeof t)?e:"number"===i?(t=[t,t,t,t],n):n,o},o.round=function(t){return arguments.length?(u=t?Math.round:Number,o):u!=Number},o.sticky=function(t){return arguments.length?(f=t,a=null,o):f},o.ratio=function(t){return arguments.length?(p=t,o):p},o.mode=function(t){return arguments.length?(d=t+"",o):d},rr(o,s)},ua.random={normal:function(t,e){var n=arguments.length;return 2>n&&(e=1),1>n&&(t=0),function(){var n,i,r;do n=2*Math.random()-1,i=2*Math.random()-1,r=n*n+i*i;while(!r||r>1);return t+e*n*Math.sqrt(-2*Math.log(r)/r)}},logNormal:function(){var t=ua.random.normal.apply(ua,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=ua.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(t){return function(){for(var e=0,n=0;t>n;n++)e+=Math.random();return e}}},ua.scale={};var Au={floor:_,ceil:_};ua.scale.linear=function(){return Xr([0,1],[0,1],yi,!1)};var Mu={s:1,g:1,p:1,r:1,e:1};ua.scale.log=function(){return io(ua.scale.linear().domain([0,1]),10,!0,[1,10])};var ku=ua.format(".0e"),Eu={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};ua.scale.pow=function(){return ro(ua.scale.linear(),1,[0,1])},ua.scale.sqrt=function(){return ua.scale.pow().exponent(.5)},ua.scale.ordinal=function(){return ao([],{t:"range",a:[[]]})},ua.scale.category10=function(){return ua.scale.ordinal().range(Su)},ua.scale.category20=function(){return ua.scale.ordinal().range(Tu)},ua.scale.category20b=function(){return ua.scale.ordinal().range(Fu)},ua.scale.category20c=function(){return ua.scale.ordinal().range(Ru)};var Su=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(yt),Tu=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(yt),Fu=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(yt),Ru=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(yt);ua.scale.quantile=function(){return so([],[])},ua.scale.quantize=function(){return uo(0,1,[0,1])},ua.scale.threshold=function(){return lo([.5],[0,1])},ua.scale.identity=function(){return co([0,1])},ua.svg={},ua.svg.arc=function(){function t(){var t=Math.max(0,+n.apply(this,arguments)),l=Math.max(0,+i.apply(this,arguments)),c=a.apply(this,arguments)-Ha,h=s.apply(this,arguments)-Ha,f=Math.abs(h-c),d=c>h?0:1;if(t>l&&(p=l,l=t,t=p),f>=ja)return e(l,d)+(t?e(t,1-d):"")+"Z";var p,v,g,m,_,y,b,w,x,C,A,M,k=0,E=0,S=[];if((m=(+u.apply(this,arguments)||0)/2)&&(g=o===Nu?Math.sqrt(t*t+l*l):+o.apply(this,arguments),d||(E*=-1),l&&(E=et(g/l*Math.sin(m))),t&&(k=et(g/t*Math.sin(m)))),l){_=l*Math.cos(c+E),y=l*Math.sin(c+E),b=l*Math.cos(h-E),w=l*Math.sin(h-E);var T=Math.abs(h-c-2*E)<=Ia?0:1;if(E&&_o(_,y,b,w)===d^T){var F=(c+h)/2;_=l*Math.cos(F),y=l*Math.sin(F),b=w=null}}else _=y=0;if(t){x=t*Math.cos(h-k),C=t*Math.sin(h-k),A=t*Math.cos(c+k),M=t*Math.sin(c+k);var R=Math.abs(c-h+2*k)<=Ia?0:1;if(k&&_o(x,C,A,M)===1-d^R){var N=(c+h)/2;x=t*Math.cos(N),C=t*Math.sin(N),A=M=null}}else x=C=0;if(f>Oa&&(p=Math.min(Math.abs(l-t)/2,+r.apply(this,arguments)))>.001){v=l>t^d?0:1;var D=p,$=p;if(Ia>f){var z=null==A?[x,C]:null==b?[_,y]:$n([_,y],[A,M],[b,w],[x,C]),P=_-z[0],O=y-z[1],L=b-z[0],I=w-z[1],q=1/Math.sin(Math.acos((P*L+O*I)/(Math.sqrt(P*P+O*O)*Math.sqrt(L*L+I*I)))/2),j=Math.sqrt(z[0]*z[0]+z[1]*z[1]);$=Math.min(p,(t-j)/(q-1)),D=Math.min(p,(l-j)/(q+1))}if(null!=b){var H=yo(null==A?[x,C]:[A,M],[_,y],l,D,d),B=yo([b,w],[x,C],l,D,d);p===D?S.push("M",H[0],"A",D,",",D," 0 0,",v," ",H[1],"A",l,",",l," 0 ",1-d^_o(H[1][0],H[1][1],B[1][0],B[1][1]),",",d," ",B[1],"A",D,",",D," 0 0,",v," ",B[0]):S.push("M",H[0],"A",D,",",D," 0 1,",v," ",B[0])}else S.push("M",_,",",y);if(null!=A){var V=yo([_,y],[A,M],t,-$,d),U=yo([x,C],null==b?[_,y]:[b,w],t,-$,d);p===$?S.push("L",U[0],"A",$,",",$," 0 0,",v," ",U[1],"A",t,",",t," 0 ",d^_o(U[1][0],U[1][1],V[1][0],V[1][1]),",",1-d," ",V[1],"A",$,",",$," 0 0,",v," ",V[0]):S.push("L",U[0],"A",$,",",$," 0 0,",v," ",V[0])}else S.push("L",x,",",C)}else S.push("M",_,",",y),null!=b&&S.push("A",l,",",l," 0 ",T,",",d," ",b,",",w),S.push("L",x,",",C),null!=A&&S.push("A",t,",",t," 0 ",R,",",1-d," ",A,",",M);return S.push("Z"),S.join("")}function e(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}var n=fo,i=po,r=ho,o=Nu,a=vo,s=go,u=mo;return t.innerRadius=function(e){return arguments.length?(n=kt(e),t):n},t.outerRadius=function(e){return arguments.length?(i=kt(e),t):i},t.cornerRadius=function(e){return arguments.length?(r=kt(e),t):r},t.padRadius=function(e){return arguments.length?(o=e==Nu?Nu:kt(e),t):o},t.startAngle=function(e){return arguments.length?(a=kt(e),t):a},t.endAngle=function(e){return arguments.length?(s=kt(e),t):s},t.padAngle=function(e){return arguments.length?(u=kt(e),t):u},t.centroid=function(){var t=(+n.apply(this,arguments)+ +i.apply(this,arguments))/2,e=(+a.apply(this,arguments)+ +s.apply(this,arguments))/2-Ha;return[Math.cos(e)*t,Math.sin(e)*t]},t};var Nu="auto";ua.svg.line=function(){return bo(_)};var Du=ua.map({linear:wo,"linear-closed":xo,step:Co,"step-before":Ao,"step-after":Mo,basis:Ro,"basis-open":No,"basis-closed":Do,bundle:$o,cardinal:So,"cardinal-open":ko,"cardinal-closed":Eo,monotone:qo});Du.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var $u=[0,2/3,1/3,0],zu=[0,1/3,2/3,0],Pu=[0,1/6,2/3,1/6];ua.svg.line.radial=function(){var t=bo(jo);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},Ao.reverse=Mo,Mo.reverse=Ao,ua.svg.area=function(){return Ho(_)},ua.svg.area.radial=function(){var t=Ho(jo);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},ua.svg.chord=function(){function t(t,s){var u=e(this,o,t,s),l=e(this,a,t,s);return"M"+u.p0+i(u.r,u.p1,u.a1-u.a0)+(n(u,l)?r(u.r,u.p1,u.r,u.p0):r(u.r,u.p1,l.r,l.p0)+i(l.r,l.p1,l.a1-l.a0)+r(l.r,l.p1,u.r,u.p0))+"Z"}function e(t,e,n,i){var r=e.call(t,n,i),o=s.call(t,r,i),a=u.call(t,r,i)-Ha,c=l.call(t,r,i)-Ha;return{r:o,a0:a,a1:c,p0:[o*Math.cos(a),o*Math.sin(a)],p1:[o*Math.cos(c),o*Math.sin(c)]}}function n(t,e){return t.a0==e.a0&&t.a1==e.a1}function i(t,e,n){return"A"+t+","+t+" 0 "+ +(n>Ia)+",1 "+e}function r(t,e,n,i){return"Q 0,0 "+i}var o=yn,a=bn,s=Bo,u=vo,l=go;return t.radius=function(e){return arguments.length?(s=kt(e),t):s},t.source=function(e){return arguments.length?(o=kt(e),t):o},t.target=function(e){return arguments.length?(a=kt(e),t):a},t.startAngle=function(e){return arguments.length?(u=kt(e),t):u},t.endAngle=function(e){return arguments.length?(l=kt(e),t):l},t},ua.svg.diagonal=function(){function t(t,r){var o=e.call(this,t,r),a=n.call(this,t,r),s=(o.y+a.y)/2,u=[o,{x:o.x,y:s},{x:a.x,y:s},a];return u=u.map(i),"M"+u[0]+"C"+u[1]+" "+u[2]+" "+u[3]}var e=yn,n=bn,i=Vo;return t.source=function(n){return arguments.length?(e=kt(n),t):e},t.target=function(e){return arguments.length?(n=kt(e),t):n},t.projection=function(e){return arguments.length?(i=e,t):i},t},ua.svg.diagonal.radial=function(){var t=ua.svg.diagonal(),e=Vo,n=t.projection;return t.projection=function(t){return arguments.length?n(Uo(e=t)):e},t},ua.svg.symbol=function(){function t(t,i){return(Ou.get(e.call(this,t,i))||Yo)(n.call(this,t,i))}var e=Go,n=Wo;return t.type=function(n){return arguments.length?(e=kt(n),t):e},t.size=function(e){return arguments.length?(n=kt(e),t):n},t};var Ou=ua.map({circle:Yo,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*Iu)),n=e*Iu;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/Lu),n=e*Lu/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/Lu),n=e*Lu/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});ua.svg.symbolTypes=Ou.keys();var Lu=Math.sqrt(3),Iu=Math.tan(30*Ba);Ta.transition=function(t){for(var e,n,i=qu||++Vu,r=Jo(t),o=[],a=ju||{time:Date.now(),ease:ki,delay:0,duration:250},s=-1,u=this.length;++s<u;){o.push(e=[]);for(var l=this[s],c=-1,h=l.length;++c<h;)(n=l[c])&&ta(n,c,r,i,a),e.push(n)}return Ko(o,r,i)},Ta.interrupt=function(t){return this.each(null==t?Hu:Xo(Jo(t)))};var qu,ju,Hu=Xo(Jo()),Bu=[],Vu=0;Bu.call=Ta.call,Bu.empty=Ta.empty,Bu.node=Ta.node,Bu.size=Ta.size,ua.transition=function(t,e){return t&&t.transition?qu?t.transition(e):t:ua.selection().transition(t)},ua.transition.prototype=Bu,Bu.select=function(t){var e,n,i,r=this.id,o=this.namespace,a=[];t=S(t);for(var s=-1,u=this.length;++s<u;){a.push(e=[]);for(var l=this[s],c=-1,h=l.length;++c<h;)(i=l[c])&&(n=t.call(i,i.__data__,c,s))?("__data__"in i&&(n.__data__=i.__data__),ta(n,c,o,r,i[o][r]),e.push(n)):e.push(null)}return Ko(a,o,r)},Bu.selectAll=function(t){var e,n,i,r,o,a=this.id,s=this.namespace,u=[];t=T(t);for(var l=-1,c=this.length;++l<c;)for(var h=this[l],f=-1,d=h.length;++f<d;)if(i=h[f]){o=i[s][a],n=t.call(i,i.__data__,f,l),u.push(e=[]);for(var p=-1,v=n.length;++p<v;)(r=n[p])&&ta(r,p,s,a,o),e.push(r)}return Ko(u,s,a)},Bu.filter=function(t){var e,n,i,r=[];"function"!=typeof t&&(t=j(t));for(var o=0,a=this.length;a>o;o++){r.push(e=[]);for(var n=this[o],s=0,u=n.length;u>s;s++)(i=n[s])&&t.call(i,i.__data__,s,o)&&e.push(i)}return Ko(r,this.namespace,this.id)},Bu.tween=function(t,e){var n=this.id,i=this.namespace;return arguments.length<2?this.node()[i][n].tween.get(t):B(this,null==e?function(e){e[i][n].tween.remove(t)}:function(r){r[i][n].tween.set(t,e)})},Bu.attr=function(t,e){function n(){this.removeAttribute(s)}function i(){this.removeAttributeNS(s.space,s.local)}function r(t){return null==t?n:(t+="",function(){var e,n=this.getAttribute(s);return n!==t&&(e=a(n,t),function(t){this.setAttribute(s,e(t))})})}function o(t){return null==t?i:(t+="",function(){var e,n=this.getAttributeNS(s.space,s.local);return n!==t&&(e=a(n,t),function(t){this.setAttributeNS(s.space,s.local,e(t))})})}if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var a="transform"==t?Gi:yi,s=ua.ns.qualify(t);return Qo(this,"attr."+t,e,s.local?o:r)},Bu.attrTween=function(t,e){function n(t,n){var i=e.call(this,t,n,this.getAttribute(r));return i&&function(t){this.setAttribute(r,i(t))}}function i(t,n){var i=e.call(this,t,n,this.getAttributeNS(r.space,r.local));return i&&function(t){this.setAttributeNS(r.space,r.local,i(t))}}var r=ua.ns.qualify(t);return this.tween("attr."+t,r.local?i:n)},Bu.style=function(t,n,i){function r(){this.style.removeProperty(t)}function o(n){return null==n?r:(n+="",function(){var r,o=e(this).getComputedStyle(this,null).getPropertyValue(t);return o!==n&&(r=yi(o,n),function(e){this.style.setProperty(t,r(e),i)})})}var a=arguments.length;if(3>a){if("string"!=typeof t){2>a&&(n="");for(i in t)this.style(i,t[i],n);return this}i=""}return Qo(this,"style."+t,n,o)},Bu.styleTween=function(t,n,i){function r(r,o){var a=n.call(this,r,o,e(this).getComputedStyle(this,null).getPropertyValue(t));return a&&function(e){this.style.setProperty(t,a(e),i)}}return arguments.length<3&&(i=""),this.tween("style."+t,r)},Bu.text=function(t){return Qo(this,"text",t,Zo)},Bu.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},Bu.ease=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].ease:("function"!=typeof t&&(t=ua.ease.apply(ua,arguments)),B(this,function(i){i[n][e].ease=t}))},Bu.delay=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].delay:B(this,"function"==typeof t?function(i,r,o){i[n][e].delay=+t.call(i,i.__data__,r,o)}:(t=+t,function(i){i[n][e].delay=t}))},Bu.duration=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].duration:B(this,"function"==typeof t?function(i,r,o){
i[n][e].duration=Math.max(1,t.call(i,i.__data__,r,o))}:(t=Math.max(1,t),function(i){i[n][e].duration=t}))},Bu.each=function(t,e){var n=this.id,i=this.namespace;if(arguments.length<2){var r=ju,o=qu;try{qu=n,B(this,function(e,r,o){ju=e[i][n],t.call(e,e.__data__,r,o)})}finally{ju=r,qu=o}}else B(this,function(r){var o=r[i][n];(o.event||(o.event=ua.dispatch("start","end","interrupt"))).on(t,e)});return this},Bu.transition=function(){for(var t,e,n,i,r=this.id,o=++Vu,a=this.namespace,s=[],u=0,l=this.length;l>u;u++){s.push(t=[]);for(var e=this[u],c=0,h=e.length;h>c;c++)(n=e[c])&&(i=n[a][r],ta(n,c,a,o,{time:i.time,ease:i.ease,delay:i.delay+i.duration,duration:i.duration})),t.push(n)}return Ko(s,a,o)},ua.svg.axis=function(){function t(t){t.each(function(){var t,l=ua.select(this),c=this.__chart__||n,h=this.__chart__=n.copy(),f=null==u?h.ticks?h.ticks.apply(h,s):h.domain():u,d=null==e?h.tickFormat?h.tickFormat.apply(h,s):_:e,p=l.selectAll(".tick").data(f,h),v=p.enter().insert("g",".domain").attr("class","tick").style("opacity",Oa),g=ua.transition(p.exit()).style("opacity",Oa).remove(),m=ua.transition(p.order()).style("opacity",1),y=Math.max(r,0)+a,b=Vr(h),w=l.selectAll(".domain").data([0]),x=(w.enter().append("path").attr("class","domain"),ua.transition(w));v.append("line"),v.append("text");var C,A,M,k,E=v.select("line"),S=m.select("line"),T=p.select("text").text(d),F=v.select("text"),R=m.select("text"),N="top"===i||"left"===i?-1:1;if("bottom"===i||"top"===i?(t=ea,C="x",M="y",A="x2",k="y2",T.attr("dy",0>N?"0em":".71em").style("text-anchor","middle"),x.attr("d","M"+b[0]+","+N*o+"V0H"+b[1]+"V"+N*o)):(t=na,C="y",M="x",A="y2",k="x2",T.attr("dy",".32em").style("text-anchor",0>N?"end":"start"),x.attr("d","M"+N*o+","+b[0]+"H0V"+b[1]+"H"+N*o)),E.attr(k,N*r),F.attr(M,N*y),S.attr(A,0).attr(k,N*r),R.attr(C,0).attr(M,N*y),h.rangeBand){var D=h,$=D.rangeBand()/2;c=h=function(t){return D(t)+$}}else c.rangeBand?c=h:g.call(t,h,c);v.call(t,c,h),m.call(t,h,h)})}var e,n=ua.scale.linear(),i=Uu,r=6,o=6,a=3,s=[10],u=null;return t.scale=function(e){return arguments.length?(n=e,t):n},t.orient=function(e){return arguments.length?(i=e in Wu?e+"":Uu,t):i},t.ticks=function(){return arguments.length?(s=ca(arguments),t):s},t.tickValues=function(e){return arguments.length?(u=e,t):u},t.tickFormat=function(n){return arguments.length?(e=n,t):e},t.tickSize=function(e){var n=arguments.length;return n?(r=+e,o=+arguments[n-1],t):r},t.innerTickSize=function(e){return arguments.length?(r=+e,t):r},t.outerTickSize=function(e){return arguments.length?(o=+e,t):o},t.tickPadding=function(e){return arguments.length?(a=+e,t):a},t.tickSubdivide=function(){return arguments.length&&t},t};var Uu="bottom",Wu={top:1,right:1,bottom:1,left:1};ua.svg.brush=function(){function t(e){e.each(function(){var e=ua.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",o).on("touchstart.brush",o),a=e.selectAll(".background").data([0]);a.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var s=e.selectAll(".resize").data(v,_);s.exit().remove(),s.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Gu[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),s.style("display",t.empty()?"none":null);var u,h=ua.transition(e),f=ua.transition(a);l&&(u=Vr(l),f.attr("x",u[0]).attr("width",u[1]-u[0]),i(h)),c&&(u=Vr(c),f.attr("y",u[0]).attr("height",u[1]-u[0]),r(h)),n(h)})}function n(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+h[+/e$/.test(t)]+","+f[+/^s/.test(t)]+")"})}function i(t){t.select(".extent").attr("x",h[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",h[1]-h[0])}function r(t){t.select(".extent").attr("y",f[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",f[1]-f[0])}function o(){function o(){32==ua.event.keyCode&&(T||(y=null,R[0]-=h[1],R[1]-=f[1],T=2),A())}function v(){32==ua.event.keyCode&&2==T&&(R[0]+=h[1],R[1]+=f[1],T=0,A())}function g(){var t=ua.mouse(w),e=!1;b&&(t[0]+=b[0],t[1]+=b[1]),T||(ua.event.altKey?(y||(y=[(h[0]+h[1])/2,(f[0]+f[1])/2]),R[0]=h[+(t[0]<y[0])],R[1]=f[+(t[1]<y[1])]):y=null),E&&m(t,l,0)&&(i(M),e=!0),S&&m(t,c,1)&&(r(M),e=!0),e&&(n(M),C({type:"brush",mode:T?"move":"resize"}))}function m(t,e,n){var i,r,o=Vr(e),u=o[0],l=o[1],c=R[n],v=n?f:h,g=v[1]-v[0];return T&&(u-=c,l-=g+c),i=(n?p:d)?Math.max(u,Math.min(l,t[n])):t[n],T?r=(i+=c)+g:(y&&(c=Math.max(u,Math.min(l,2*y[n]-i))),i>c?(r=i,i=c):r=c),v[0]!=i||v[1]!=r?(n?s=null:a=null,v[0]=i,v[1]=r,!0):void 0}function _(){g(),M.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),ua.select("body").style("cursor",null),N.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),F(),C({type:"brushend"})}var y,b,w=this,x=ua.select(ua.event.target),C=u.of(w,arguments),M=ua.select(w),k=x.datum(),E=!/^(n|s)$/.test(k)&&l,S=!/^(e|w)$/.test(k)&&c,T=x.classed("extent"),F=X(w),R=ua.mouse(w),N=ua.select(e(w)).on("keydown.brush",o).on("keyup.brush",v);if(ua.event.changedTouches?N.on("touchmove.brush",g).on("touchend.brush",_):N.on("mousemove.brush",g).on("mouseup.brush",_),M.interrupt().selectAll("*").interrupt(),T)R[0]=h[0]-R[0],R[1]=f[0]-R[1];else if(k){var D=+/w$/.test(k),$=+/^n/.test(k);b=[h[1-D]-R[0],f[1-$]-R[1]],R[0]=h[D],R[1]=f[$]}else ua.event.altKey&&(y=R.slice());M.style("pointer-events","none").selectAll(".resize").style("display",null),ua.select("body").style("cursor",x.style("cursor")),C({type:"brushstart"}),g()}var a,s,u=k(t,"brushstart","brush","brushend"),l=null,c=null,h=[0,0],f=[0,0],d=!0,p=!0,v=Yu[0];return t.event=function(t){t.each(function(){var t=u.of(this,arguments),e={x:h,y:f,i:a,j:s},n=this.__chart__||e;this.__chart__=e,qu?ua.select(this).transition().each("start.brush",function(){a=n.i,s=n.j,h=n.x,f=n.y,t({type:"brushstart"})}).tween("brush:brush",function(){var n=bi(h,e.x),i=bi(f,e.y);return a=s=null,function(r){h=e.x=n(r),f=e.y=i(r),t({type:"brush",mode:"resize"})}}).each("end.brush",function(){a=e.i,s=e.j,t({type:"brush",mode:"resize"}),t({type:"brushend"})}):(t({type:"brushstart"}),t({type:"brush",mode:"resize"}),t({type:"brushend"}))})},t.x=function(e){return arguments.length?(l=e,v=Yu[!l<<1|!c],t):l},t.y=function(e){return arguments.length?(c=e,v=Yu[!l<<1|!c],t):c},t.clamp=function(e){return arguments.length?(l&&c?(d=!!e[0],p=!!e[1]):l?d=!!e:c&&(p=!!e),t):l&&c?[d,p]:l?d:c?p:null},t.extent=function(e){var n,i,r,o,u;return arguments.length?(l&&(n=e[0],i=e[1],c&&(n=n[0],i=i[0]),a=[n,i],l.invert&&(n=l(n),i=l(i)),n>i&&(u=n,n=i,i=u),(n!=h[0]||i!=h[1])&&(h=[n,i])),c&&(r=e[0],o=e[1],l&&(r=r[1],o=o[1]),s=[r,o],c.invert&&(r=c(r),o=c(o)),r>o&&(u=r,r=o,o=u),(r!=f[0]||o!=f[1])&&(f=[r,o])),t):(l&&(a?(n=a[0],i=a[1]):(n=h[0],i=h[1],l.invert&&(n=l.invert(n),i=l.invert(i)),n>i&&(u=n,n=i,i=u))),c&&(s?(r=s[0],o=s[1]):(r=f[0],o=f[1],c.invert&&(r=c.invert(r),o=c.invert(o)),r>o&&(u=r,r=o,o=u))),l&&c?[[n,r],[i,o]]:l?[n,i]:c&&[r,o])},t.clear=function(){return t.empty()||(h=[0,0],f=[0,0],a=s=null),t},t.empty=function(){return!!l&&h[0]==h[1]||!!c&&f[0]==f[1]},ua.rebind(t,u,"on")};var Gu={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Yu=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Xu=ps.format=bs.timeFormat,Ku=Xu.utc,Qu=Ku("%Y-%m-%dT%H:%M:%S.%LZ");Xu.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?ia:Qu,ia.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},ia.toString=Qu.toString,ps.second=qt(function(t){return new vs(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),ps.seconds=ps.second.range,ps.seconds.utc=ps.second.utc.range,ps.minute=qt(function(t){return new vs(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),ps.minutes=ps.minute.range,ps.minutes.utc=ps.minute.utc.range,ps.hour=qt(function(t){var e=t.getTimezoneOffset()/60;return new vs(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),ps.hours=ps.hour.range,ps.hours.utc=ps.hour.utc.range,ps.month=qt(function(t){return t=ps.day(t),t.setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),ps.months=ps.month.range,ps.months.utc=ps.month.utc.range;var Zu=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Ju=[[ps.second,1],[ps.second,5],[ps.second,15],[ps.second,30],[ps.minute,1],[ps.minute,5],[ps.minute,15],[ps.minute,30],[ps.hour,1],[ps.hour,3],[ps.hour,6],[ps.hour,12],[ps.day,1],[ps.day,2],[ps.week,1],[ps.month,1],[ps.month,3],[ps.year,1]],tl=Xu.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",Te]]),el={range:function(t,e,n){return ua.range(Math.ceil(t/n)*n,+e,n).map(oa)},floor:_,ceil:_};Ju.year=ps.year,ps.scale=function(){return ra(ua.scale.linear(),Ju,tl)};var nl=Ju.map(function(t){return[t[0].utc,t[1]]}),il=Ku.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",Te]]);nl.year=ps.year.utc,ps.scale.utc=function(){return ra(ua.scale.linear(),nl,il)},ua.text=Et(function(t){return t.responseText}),ua.json=function(t,e){return St(t,"application/json",aa,e)},ua.html=function(t,e){return St(t,"text/html",sa,e)},ua.xml=Et(function(t){return t.responseXML}),"function"==typeof define&&define.amd?(this.d3=ua,define(ua)):"object"==typeof module&&module.exports?module.exports=ua:this.d3=ua}(),!function(t){"use strict";function e(t){if(void 0===Function.prototype.name){var e=/function\s([^(]{1,})\(/,n=e.exec(t.toString());return n&&n.length>1?n[1].trim():""}return void 0===t.prototype?t.constructor.name:t.prototype.constructor.name}function n(t){return/true/.test(t)?!0:/false/.test(t)?!1:isNaN(1*t)?t:parseFloat(t)}function i(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}var r="6.2.1",o={version:r,_plugins:{},_uuids:[],rtl:function(){return"rtl"===t("html").attr("dir")},plugin:function(t,n){var r=n||e(t),o=i(r);this._plugins[o]=this[r]=t},registerPlugin:function(t,n){var r=n?i(n):e(t.constructor).toLowerCase();t.uuid=this.GetYoDigits(6,r),t.$element.attr("data-"+r)||t.$element.attr("data-"+r,t.uuid),t.$element.data("zfPlugin")||t.$element.data("zfPlugin",t),t.$element.trigger("init.zf."+r),this._uuids.push(t.uuid)},unregisterPlugin:function(t){var n=i(e(t.$element.data("zfPlugin").constructor));this._uuids.splice(this._uuids.indexOf(t.uuid),1),t.$element.removeAttr("data-"+n).removeData("zfPlugin").trigger("destroyed.zf."+n);for(var r in t)t[r]=null},reInit:function(e){var n=e instanceof t;try{if(n)e.each(function(){t(this).data("zfPlugin")._init()});else{var r=typeof e,o=this,a={object:function(e){e.forEach(function(e){e=i(e),t("[data-"+e+"]").foundation("_init")})},string:function(){e=i(e),t("[data-"+e+"]").foundation("_init")},undefined:function(){this.object(Object.keys(o._plugins))}};a[r](e)}}catch(s){console.error(s)}finally{return e}},GetYoDigits:function(t,e){return t=t||6,Math.round(Math.pow(36,t+1)-Math.random()*Math.pow(36,t)).toString(36).slice(1)+(e?"-"+e:"")},reflow:function(e,i){"undefined"==typeof i?i=Object.keys(this._plugins):"string"==typeof i&&(i=[i]);var r=this;t.each(i,function(i,o){var a=r._plugins[o],s=t(e).find("[data-"+o+"]").addBack("[data-"+o+"]");s.each(function(){var e=t(this),i={};if(e.data("zfPlugin"))return void console.warn("Tried to initialize "+o+" on an element that already has a Foundation plugin.");e.attr("data-options")&&e.attr("data-options").split(";").forEach(function(t){var e=t.split(":").map(function(t){return t.trim()});e[0]&&(i[e[0]]=n(e[1]))});try{e.data("zfPlugin",new a(t(this),i))}catch(r){console.error(r)}finally{return}})})},getFnName:e,transitionend:function(t){var e,n={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend"},i=document.createElement("div");for(var r in n)"undefined"!=typeof i.style[r]&&(e=n[r]);return e?e:(e=setTimeout(function(){t.triggerHandler("transitionend",[t])},1),"transitionend")}};o.util={throttle:function(t,e){var n=null;return function(){var i=this,r=arguments;null===n&&(n=setTimeout(function(){t.apply(i,r),n=null},e))}}};var a=function(n){var i=typeof n,r=t("meta.foundation-mq"),a=t(".no-js");if(r.length||t('<meta class="foundation-mq">').appendTo(document.head),a.length&&a.removeClass("no-js"),"undefined"===i)o.MediaQuery._init(),o.reflow(this);else{if("string"!==i)throw new TypeError("We're sorry, "+i+" is not a valid parameter. You must use a string representing the method you wish to invoke.");var s=Array.prototype.slice.call(arguments,1),u=this.data("zfPlugin");if(void 0===u||void 0===u[n])throw new ReferenceError("We're sorry, '"+n+"' is not an available method for "+(u?e(u):"this element")+".");1===this.length?u[n].apply(u,s):this.each(function(e,i){u[n].apply(t(i).data("zfPlugin"),s)})}return this};window.Foundation=o,t.fn.foundation=a,function(){Date.now&&window.Date.now||(window.Date.now=Date.now=function(){return(new Date).getTime()});for(var t=["webkit","moz"],e=0;e<t.length&&!window.requestAnimationFrame;++e){var n=t[e];window.requestAnimationFrame=window[n+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n+"CancelAnimationFrame"]||window[n+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var i=0;window.requestAnimationFrame=function(t){var e=Date.now(),n=Math.max(i+16,e);return setTimeout(function(){t(i=n)},n-e)},window.cancelAnimationFrame=clearTimeout}window.performance&&window.performance.now||(window.performance={start:Date.now(),now:function(){return Date.now()-this.start}})}(),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,i=function(){},r=function(){return n.apply(this instanceof i?this:t,e.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(i.prototype=this.prototype),r.prototype=new i,r})}(jQuery),!function(){function t(t,n,i,r){var o,a,s,u,l=e(t);if(n){var c=e(n);a=l.offset.top+l.height<=c.height+c.offset.top,o=l.offset.top>=c.offset.top,s=l.offset.left>=c.offset.left,u=l.offset.left+l.width<=c.width}else a=l.offset.top+l.height<=l.windowDims.height+l.windowDims.offset.top,o=l.offset.top>=l.windowDims.offset.top,s=l.offset.left>=l.windowDims.offset.left,u=l.offset.left+l.width<=l.windowDims.width;var h=[a,o,s,u];return i?s===u==1:r?o===a==1:-1===h.indexOf(!1)}function e(t){if(t=t.length?t[0]:t,t===window||t===document)throw new Error("I'm sorry, Dave. I'm afraid I can't do that.");var e=t.getBoundingClientRect(),n=t.parentNode.getBoundingClientRect(),i=document.body.getBoundingClientRect(),r=window.pageYOffset,o=window.pageXOffset;return{width:e.width,height:e.height,offset:{top:e.top+r,left:e.left+o},parentDims:{width:n.width,height:n.height,offset:{top:n.top+r,left:n.left+o}},windowDims:{width:i.width,height:i.height,offset:{top:r,left:o}}}}function n(t,n,i,r,o,a){var s=e(t),u=n?e(n):null;switch(i){case"top":return{left:Foundation.rtl()?u.offset.left-s.width+u.width:u.offset.left,top:u.offset.top-(s.height+r)};case"left":return{left:u.offset.left-(s.width+o),top:u.offset.top};case"right":return{left:u.offset.left+u.width+o,top:u.offset.top};case"center top":return{left:u.offset.left+u.width/2-s.width/2,top:u.offset.top-(s.height+r)};case"center bottom":return{left:a?o:u.offset.left+u.width/2-s.width/2,top:u.offset.top+u.height+r};case"center left":return{left:u.offset.left-(s.width+o),top:u.offset.top+u.height/2-s.height/2};case"center right":return{left:u.offset.left+u.width+o+1,top:u.offset.top+u.height/2-s.height/2};case"center":return{left:s.windowDims.offset.left+s.windowDims.width/2-s.width/2,top:s.windowDims.offset.top+s.windowDims.height/2-s.height/2};case"reveal":return{left:(s.windowDims.width-s.width)/2,top:s.windowDims.offset.top+r};case"reveal full":return{left:s.windowDims.offset.left,top:s.windowDims.offset.top};case"left bottom":return{left:u.offset.left-(s.width+o),top:u.offset.top+u.height};case"right bottom":return{left:u.offset.left+u.width+o-s.width,top:u.offset.top+u.height};default:return{left:Foundation.rtl()?u.offset.left-s.width+u.width:u.offset.left,top:u.offset.top+u.height+r}}}Foundation.Box={ImNotTouchingYou:t,GetDimensions:e,GetOffsets:n}}(jQuery),!function(t){function e(t){var e={};for(var n in t)e[t[n]]=t[n];return e}var n={9:"TAB",13:"ENTER",27:"ESCAPE",32:"SPACE",37:"ARROW_LEFT",38:"ARROW_UP",39:"ARROW_RIGHT",40:"ARROW_DOWN"},i={},r={keys:e(n),parseKey:function(t){var e=n[t.which||t.keyCode]||String.fromCharCode(t.which).toUpperCase();return t.shiftKey&&(e="SHIFT_"+e),t.ctrlKey&&(e="CTRL_"+e),t.altKey&&(e="ALT_"+e),e},handleKey:function(e,n,r){var o,a,s,u=i[n],l=this.parseKey(e);return u?(o="undefined"==typeof u.ltr?u:Foundation.rtl()?t.extend({},u.ltr,u.rtl):t.extend({},u.rtl,u.ltr),a=o[l],s=r[a],void(s&&"function"==typeof s?(s.apply(),(r.handled||"function"==typeof r.handled)&&r.handled.apply()):(r.unhandled||"function"==typeof r.unhandled)&&r.unhandled.apply())):console.warn("Component not defined!")},findFocusable:function(e){return e.find("a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]").filter(function(){return t(this).is(":visible")&&!(t(this).attr("tabindex")<0)})},register:function(t,e){i[t]=e}};Foundation.Keyboard=r}(jQuery),!function(t){function e(t){var e={};return"string"!=typeof t?e:(t=t.trim().slice(1,-1))?e=t.split("&").reduce(function(t,e){var n=e.replace(/\+/g," ").split("="),i=n[0],r=n[1];return i=decodeURIComponent(i),r=void 0===r?null:decodeURIComponent(r),t.hasOwnProperty(i)?Array.isArray(t[i])?t[i].push(r):t[i]=[t[i],r]:t[i]=r,t},{}):e}var n={queries:[],current:"",_init:function(){var n,i=this,r=t(".foundation-mq").css("font-family");n=e(r);for(var o in n)i.queries.push({name:o,value:"only screen and (min-width: "+n[o]+")"});this.current=this._getCurrentSize(),this._watcher()},atLeast:function(t){var e=this.get(t);return e?window.matchMedia(e).matches:!1},get:function(t){for(var e in this.queries){var n=this.queries[e];if(t===n.name)return n.value}return null},_getCurrentSize:function(){for(var t,e=0;e<this.queries.length;e++){var n=this.queries[e];window.matchMedia(n.value).matches&&(t=n)}return"object"==typeof t?t.name:t},_watcher:function(){var e=this;t(window).on("resize.zf.mediaquery",function(){var n=e._getCurrentSize();n!==e.current&&(t(window).trigger("changed.zf.mediaquery",[n,e.current]),e.current=n)})}};Foundation.MediaQuery=n,window.matchMedia||(window.matchMedia=function(){"use strict";var t=window.styleMedia||window.media;if(!t){var e=document.createElement("style"),n=document.getElementsByTagName("script")[0],i=null;e.type="text/css",e.id="matchmediajs-test",n.parentNode.insertBefore(e,n),i="getComputedStyle"in window&&window.getComputedStyle(e,null)||e.currentStyle,t={matchMedium:function(t){var n="@media "+t+"{ #matchmediajs-test { width: 1px; } }";return e.styleSheet?e.styleSheet.cssText=n:e.textContent=n,"1px"===i.width}}}return function(e){return{matches:t.matchMedium(e||"all"),media:e||"all"}}}()),Foundation.MediaQuery=n}(jQuery),!function(t){function e(t,e,n){function i(s){a||(a=window.performance.now()),o=s-a,n.apply(e),t>o?r=window.requestAnimationFrame(i,e):(window.cancelAnimationFrame(r),e.trigger("finished.zf.animate",[e]).triggerHandler("finished.zf.animate",[e]))}var r,o,a=null;r=window.requestAnimationFrame(i)}function n(e,n,o,a){function s(){e||n.hide(),u(),a&&a.apply(n)}function u(){n[0].style.transitionDuration=0,n.removeClass(l+" "+c+" "+o)}if(n=t(n).eq(0),n.length){var l=e?i[0]:i[1],c=e?r[0]:r[1];u(),n.addClass(o).css("transition","none"),requestAnimationFrame(function(){n.addClass(l),e&&n.show()}),requestAnimationFrame(function(){n[0].offsetWidth,n.css("transition","").addClass(c)}),n.one(Foundation.transitionend(n),s)}}var i=["mui-enter","mui-leave"],r=["mui-enter-active","mui-leave-active"],o={animateIn:function(t,e,i){n(!0,t,e,i)},animateOut:function(t,e,i){n(!1,t,e,i)}};Foundation.Move=e,Foundation.Motion=o}(jQuery),!function(t){var e={Feather:function(e){var n=arguments.length<=1||void 0===arguments[1]?"zf":arguments[1];e.attr("role","menubar");var i=e.find("li").attr({role:"menuitem"}),r="is-"+n+"-submenu",o=r+"-item",a="is-"+n+"-submenu-parent";e.find("a:first").attr("tabindex",0),i.each(function(){var e=t(this),n=e.children("ul");n.length&&(e.addClass(a).attr({"aria-haspopup":!0,"aria-expanded":!1,"aria-label":e.children("a:first").text()}),n.addClass("submenu "+r).attr({"data-submenu":"","aria-hidden":!0,role:"menu"})),e.parent("[data-submenu]").length&&e.addClass("is-submenu-item "+o)})},Burn:function(t,e){var n=(t.find("li").removeAttr("tabindex"),"is-"+e+"-submenu"),i=n+"-item",r="is-"+e+"-submenu-parent";t.find("*").removeClass(n+" "+i+" "+r+" is-submenu-item submenu is-active").removeAttr("data-submenu").css("display","")}};Foundation.Nest=e}(jQuery),!function(t){function e(t,e,n){var i,r,o=this,a=e.duration,s=Object.keys(t.data())[0]||"timer",u=-1;this.isPaused=!1,this.restart=function(){u=-1,clearTimeout(r),this.start()},this.start=function(){this.isPaused=!1,clearTimeout(r),u=0>=u?a:u,t.data("paused",!1),i=Date.now(),r=setTimeout(function(){e.infinite&&o.restart(),n()},u),t.trigger("timerstart.zf."+s)},this.pause=function(){this.isPaused=!0,clearTimeout(r),t.data("paused",!0);var e=Date.now();u-=e-i,t.trigger("timerpaused.zf."+s)}}function n(e,n){function i(){r--,0===r&&n()}var r=e.length;0===r&&n(),e.each(function(){this.complete?i():"undefined"!=typeof this.naturalWidth&&this.naturalWidth>0?i():t(this).one("load",function(){i()})})}Foundation.Timer=e,Foundation.onImagesLoaded=n}(jQuery),function(t){function e(){this.removeEventListener("touchmove",n),this.removeEventListener("touchend",e),l=!1}function n(n){if(t.spotSwipe.preventDefault&&n.preventDefault(),l){var i,r=n.touches[0].pageX,a=(n.touches[0].pageY,o-r);u=(new Date).getTime()-s,Math.abs(a)>=t.spotSwipe.moveThreshold&&u<=t.spotSwipe.timeThreshold&&(i=a>0?"left":"right"),i&&(n.preventDefault(),e.call(this),t(this).trigger("swipe",i).trigger("swipe"+i))}}function i(t){1==t.touches.length&&(o=t.touches[0].pageX,a=t.touches[0].pageY,l=!0,s=(new Date).getTime(),this.addEventListener("touchmove",n,!1),this.addEventListener("touchend",e,!1))}function r(){this.addEventListener&&this.addEventListener("touchstart",i,!1)}t.spotSwipe={version:"1.0.0",enabled:"ontouchstart"in document.documentElement,preventDefault:!1,moveThreshold:75,timeThreshold:200};var o,a,s,u,l=!1;t.event.special.swipe={setup:r},t.each(["left","up","down","right"],function(){t.event.special["swipe"+this]={setup:function(){t(this).on("swipe",t.noop)}}})}(jQuery),!function(t){t.fn.addTouch=function(){this.each(function(n,i){t(i).bind("touchstart touchmove touchend touchcancel",function(){e(event)})});var e=function(t){var e,n=t.changedTouches,i=n[0],r={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"},o=r[t.type];"MouseEvent"in window&&"function"==typeof window.MouseEvent?e=window.MouseEvent(o,{bubbles:!0,cancelable:!0,screenX:i.screenX,screenY:i.screenY,clientX:i.clientX,clientY:i.clientY}):(e=document.createEvent("MouseEvent"),e.initMouseEvent(o,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null)),i.target.dispatchEvent(e)}}}(jQuery),!function(t){function e(){o(),i(),r(),n()}function n(e){var n=t("[data-yeti-box]"),i=["dropdown","tooltip","reveal"];if(e&&("string"==typeof e?i.push(e):"object"==typeof e&&"string"==typeof e[0]?i.concat(e):console.error("Plugin names must be strings")),n.length){var r=i.map(function(t){return"closeme.zf."+t}).join(" ");t(window).off(r).on(r,function(e,n){var i=e.namespace.split(".")[0],r=t("[data-"+i+"]").not('[data-yeti-box="'+n+'"]');r.each(function(){var e=t(this);e.triggerHandler("close.zf.trigger",[e])})})}}function i(e){var n=void 0,i=t("[data-resize]");i.length&&t(window).off("resize.zf.trigger").on("resize.zf.trigger",function(){n&&clearTimeout(n),n=setTimeout(function(){a||i.each(function(){t(this).triggerHandler("resizeme.zf.trigger")}),i.attr("data-events","resize")},e||10)})}function r(e){var n=void 0,i=t("[data-scroll]");i.length&&t(window).off("scroll.zf.trigger").on("scroll.zf.trigger",function(){n&&clearTimeout(n),n=setTimeout(function(){a||i.each(function(){t(this).triggerHandler("scrollme.zf.trigger")}),i.attr("data-events","scroll")},e||10)})}function o(){if(!a)return!1;var e=document.querySelectorAll("[data-resize], [data-scroll], [data-mutate]"),n=function(e){var n=t(e[0].target);switch(n.attr("data-events")){case"resize":n.triggerHandler("resizeme.zf.trigger",[n]);break;case"scroll":n.triggerHandler("scrollme.zf.trigger",[n,window.pageYOffset]);break;default:return!1}};if(e.length)for(var i=0;i<=e.length-1;i++){var r=new a(n);r.observe(e[i],{attributes:!0,childList:!1,characterData:!1,subtree:!1,attributeFilter:["data-events"]})}}var a=function(){for(var t=["WebKit","Moz","O","Ms",""],e=0;e<t.length;e++)if(t[e]+"MutationObserver"in window)return window[t[e]+"MutationObserver"];return!1}(),s=function(e,n){e.data(n).split(" ").forEach(function(i){t("#"+i)["close"===n?"trigger":"triggerHandler"](n+".zf.trigger",[e])})};t(document).on("click.zf.trigger","[data-open]",function(){s(t(this),"open")}),t(document).on("click.zf.trigger","[data-close]",function(){var e=t(this).data("close");e?s(t(this),"close"):t(this).trigger("close.zf.trigger")}),t(document).on("click.zf.trigger","[data-toggle]",function(){s(t(this),"toggle")}),t(document).on("close.zf.trigger","[data-closable]",function(e){e.stopPropagation();var n=t(this).data("closable");""!==n?Foundation.Motion.animateOut(t(this),n,function(){t(this).trigger("closed.zf")}):t(this).fadeOut().trigger("closed.zf")}),t(document).on("focus.zf.trigger blur.zf.trigger","[data-toggle-focus]",function(){var e=t(this).data("toggle-focus");t("#"+e).triggerHandler("toggle.zf.trigger",[t(this)])}),t(window).load(function(){e()}),Foundation.IHearYou=e}(jQuery);var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();!function(t){var e=function(){function e(n){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];_classCallCheck(this,e),this.$element=n,this.options=t.extend({},e.defaults,this.$element.data(),i),this._init(),Foundation.registerPlugin(this,"Abide")}return _createClass(e,[{key:"_init",value:function(){this.$inputs=this.$element.find("input, textarea, select").not("[data-abide-ignore]"),this._events()}},{key:"_events",value:function(){var e=this;this.$element.off(".abide").on("reset.zf.abide",function(){e.resetForm()}).on("submit.zf.abide",function(){return e.validateForm()}),"fieldChange"===this.options.validateOn&&this.$inputs.off("change.zf.abide").on("change.zf.abide",function(n){e.validateInput(t(n.target))}),this.options.liveValidate&&this.$inputs.off("input.zf.abide").on("input.zf.abide",function(n){e.validateInput(t(n.target))})}},{key:"_reflow",value:function(){this._init()}},{key:"requiredCheck",value:function(t){if(!t.attr("required"))return!0;var e=!0;switch(t[0].type){case"select":case"select-one":case"select-multiple":var n=t.find("option:selected");n.length&&n.val()||(e=!1);break;default:t.val()&&t.val().length||(e=!1)}return e}},{key:"findFormError",value:function(t){var e=t.siblings(this.options.formErrorSelector);return e.length||(e=t.parent().find(this.options.formErrorSelector)),e}},{key:"findLabel",value:function(t){var e=t[0].id,n=this.$element.find('label[for="'+e+'"]');return n.length?n:t.closest("label")}},{key:"findRadioLabels",value:function(e){var n=this,i=e.map(function(e,i){var r=i.id,o=n.$element.find('label[for="'+r+'"]');return o.length||(o=t(i).closest("label")),o[0]});return t(i)}},{key:"addErrorClasses",value:function(t){var e=this.findLabel(t),n=this.findFormError(t);e.length&&e.addClass(this.options.labelErrorClass),n.length&&n.addClass(this.options.formErrorClass),t.addClass(this.options.inputErrorClass).attr("data-invalid","")}},{key:"removeRadioErrorClasses",value:function(t){var e=this.$element.find(':radio[name="'+t+'"]'),n=this.findRadioLabels(e),i=this.findFormError(e);n.length&&n.removeClass(this.options.labelErrorClass),i.length&&i.removeClass(this.options.formErrorClass),e.removeClass(this.options.inputErrorClass).removeAttr("data-invalid")}},{key:"removeErrorClasses",value:function(t){if("radio"==t[0].type)return this.removeRadioErrorClasses(t.attr("name"));var e=this.findLabel(t),n=this.findFormError(t);e.length&&e.removeClass(this.options.labelErrorClass),n.length&&n.removeClass(this.options.formErrorClass),t.removeClass(this.options.inputErrorClass).removeAttr("data-invalid")}},{key:"validateInput",value:function(t){var e=this.requiredCheck(t),n=!1,i=!0,r=t.attr("data-validator"),o=!0;switch(t[0].type){case"radio":n=this.validateRadio(t.attr("name"));break;case"checkbox":n=e;break;case"select":case"select-one":case"select-multiple":n=e;break;default:n=this.validateText(t)}r&&(i=this.matchValidation(t,r,t.attr("required"))),t.attr("data-equalto")&&(o=this.options.validators.equalTo(t));var a=-1===[e,n,i,o].indexOf(!1),s=(a?"valid":"invalid")+".zf.abide";return this[a?"removeErrorClasses":"addErrorClasses"](t),t.trigger(s,[t]),a}},{key:"validateForm",value:function(){var e=[],n=this;this.$inputs.each(function(){e.push(n.validateInput(t(this)))});var i=-1===e.indexOf(!1);return this.$element.find("[data-abide-error]").css("display",i?"none":"block"),this.$element.trigger((i?"formvalid":"forminvalid")+".zf.abide",[this.$element]),i}},{key:"validateText",value:function(t,e){e=e||t.attr("pattern")||t.attr("type");var n=t.val(),i=!1;return n.length?i=this.options.patterns.hasOwnProperty(e)?this.options.patterns[e].test(n):e!==t.attr("type")?new RegExp(e).test(n):!0:t.prop("required")||(i=!0),i}},{key:"validateRadio",value:function(e){var n=this.$element.find(':radio[name="'+e+'"]'),i=!1;return void 0===n.attr("required")&&(i=!0),n.each(function(e,n){t(n).prop("checked")&&(i=!0)}),i}},{key:"matchValidation",value:function(t,e,n){var i=this;n=!!n;var r=e.split(" ").map(function(e){return i.options.validators[e](t,n,t.parent())});return-1===r.indexOf(!1)}},{key:"resetForm",value:function(){var e=this.$element,n=this.options;t("."+n.labelErrorClass,e).not("small").removeClass(n.labelErrorClass),t("."+n.inputErrorClass,e).not("small").removeClass(n.inputErrorClass),t(n.formErrorSelector+"."+n.formErrorClass).removeClass(n.formErrorClass),e.find("[data-abide-error]").css("display","none"),t(":input",e).not(":button, :submit, :reset, :hidden, [data-abide-ignore]").val("").removeAttr("data-invalid"),e.trigger("formreset.zf.abide",[e])}},{key:"destroy",value:function(){var e=this;this.$element.off(".abide").find("[data-abide-error]").css("display","none"),this.$inputs.off(".abide").each(function(){e.removeErrorClasses(t(this))}),Foundation.unregisterPlugin(this)}}]),e}();e.defaults={validateOn:"fieldChange",labelErrorClass:"is-invalid-label",inputErrorClass:"is-invalid-input",formErrorSelector:".form-error",formErrorClass:"is-visible",liveValidate:!1,patterns:{alpha:/^[a-zA-Z]+$/,alpha_numeric:/^[a-zA-Z0-9]+$/,integer:/^[-+]?\d+$/,number:/^[-+]?\d*(?:[\.\,]\d+)?$/,card:/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/,cvv:/^([0-9]){3,4}$/,
email:/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+$/,url:/^(https?|ftp|file|ssh):\/\/(((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/,domain:/^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,8}$/,datetime:/^([0-2][0-9]{3})\-([0-1][0-9])\-([0-3][0-9])T([0-5][0-9])\:([0-5][0-9])\:([0-5][0-9])(Z|([\-\+]([0-1][0-9])\:00))$/,date:/(?:19|20)[0-9]{2}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-9])|(?:(?!02)(?:0[1-9]|1[0-2])-(?:30))|(?:(?:0[13578]|1[02])-31))$/,time:/^(0[0-9]|1[0-9]|2[0-3])(:[0-5][0-9]){2}$/,dateISO:/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/,month_day_year:/^(0[1-9]|1[012])[- \/.](0[1-9]|[12][0-9]|3[01])[- \/.]\d{4}$/,day_month_year:/^(0[1-9]|[12][0-9]|3[01])[- \/.](0[1-9]|1[012])[- \/.]\d{4}$/,color:/^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/},validators:{equalTo:function(e){return t("#"+e.attr("data-equalto")).val()===e.val()}}},Foundation.plugin(e,"Abide")}(jQuery);var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();!function(t){var e=function(){function e(n,i){_classCallCheck(this,e),this.$element=n,this.options=t.extend({},e.defaults,this.$element.data(),i),this._init(),Foundation.registerPlugin(this,"Accordion"),Foundation.Keyboard.register("Accordion",{ENTER:"toggle",SPACE:"toggle",ARROW_DOWN:"next",ARROW_UP:"previous"})}return _createClass(e,[{key:"_init",value:function(){this.$element.attr("role","tablist"),this.$tabs=this.$element.children("li, [data-accordion-item]"),this.$tabs.each(function(e,n){var i=t(n),r=i.children("[data-tab-content]"),o=r[0].id||Foundation.GetYoDigits(6,"accordion"),a=n.id||o+"-label";i.find("a:first").attr({"aria-controls":o,role:"tab",id:a,"aria-expanded":!1,"aria-selected":!1}),r.attr({role:"tabpanel","aria-labelledby":a,"aria-hidden":!0,id:o})});var e=this.$element.find(".is-active").children("[data-tab-content]");e.length&&this.down(e,!0),this._events()}},{key:"_events",value:function(){var e=this;this.$tabs.each(function(){var n=t(this),i=n.children("[data-tab-content]");i.length&&n.children("a").off("click.zf.accordion keydown.zf.accordion").on("click.zf.accordion",function(t){t.preventDefault(),n.hasClass("is-active")?(e.options.allowAllClosed||n.siblings().hasClass("is-active"))&&e.up(i):e.down(i)}).on("keydown.zf.accordion",function(t){Foundation.Keyboard.handleKey(t,"Accordion",{toggle:function(){e.toggle(i)},next:function(){var t=n.next().find("a").focus();e.options.multiExpand||t.trigger("click.zf.accordion")},previous:function(){var t=n.prev().find("a").focus();e.options.multiExpand||t.trigger("click.zf.accordion")},handled:function(){t.preventDefault(),t.stopPropagation()}})})})}},{key:"toggle",value:function(t){if(t.parent().hasClass("is-active")){if(!this.options.allowAllClosed&&!t.parent().siblings().hasClass("is-active"))return;this.up(t)}else this.down(t)}},{key:"down",value:function(e,n){var i=this;if(!this.options.multiExpand&&!n){var r=this.$element.children(".is-active").children("[data-tab-content]");r.length&&this.up(r)}e.attr("aria-hidden",!1).parent("[data-tab-content]").addBack().parent().addClass("is-active"),e.slideDown(this.options.slideSpeed,function(){i.$element.trigger("down.zf.accordion",[e])}),t("#"+e.attr("aria-labelledby")).attr({"aria-expanded":!0,"aria-selected":!0})}},{key:"up",value:function(e){var n=e.parent().siblings(),i=this,r=this.options.multiExpand?n.hasClass("is-active"):e.parent().hasClass("is-active");(this.options.allowAllClosed||r)&&(e.slideUp(i.options.slideSpeed,function(){i.$element.trigger("up.zf.accordion",[e])}),e.attr("aria-hidden",!0).parent().removeClass("is-active"),t("#"+e.attr("aria-labelledby")).attr({"aria-expanded":!1,"aria-selected":!1}))}},{key:"destroy",value:function(){this.$element.find("[data-tab-content]").slideUp(0).css("display",""),this.$element.find("a").off(".zf.accordion"),Foundation.unregisterPlugin(this)}}]),e}();e.defaults={slideSpeed:250,multiExpand:!1,allowAllClosed:!1},Foundation.plugin(e,"Accordion")}(jQuery);var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();!function(t){var e=function(){function e(n,i){_classCallCheck(this,e),this.$element=n,this.options=t.extend({},e.defaults,this.$element.data(),i),Foundation.Nest.Feather(this.$element,"accordion"),this._init(),Foundation.registerPlugin(this,"AccordionMenu"),Foundation.Keyboard.register("AccordionMenu",{ENTER:"toggle",SPACE:"toggle",ARROW_RIGHT:"open",ARROW_UP:"up",ARROW_DOWN:"down",ARROW_LEFT:"close",ESCAPE:"closeAll",TAB:"down",SHIFT_TAB:"up"})}return _createClass(e,[{key:"_init",value:function(){this.$element.find("[data-submenu]").not(".is-active").slideUp(0),this.$element.attr({role:"tablist","aria-multiselectable":this.options.multiOpen}),this.$menuLinks=this.$element.find(".is-accordion-submenu-parent"),this.$menuLinks.each(function(){var e=this.id||Foundation.GetYoDigits(6,"acc-menu-link"),n=t(this),i=n.children("[data-submenu]"),r=i[0].id||Foundation.GetYoDigits(6,"acc-menu"),o=i.hasClass("is-active");n.attr({"aria-controls":r,"aria-expanded":o,role:"tab",id:e}),i.attr({"aria-labelledby":e,"aria-hidden":!o,role:"tabpanel",id:r})});var e=this.$element.find(".is-active");if(e.length){var n=this;e.each(function(){n.down(t(this))})}this._events()}},{key:"_events",value:function(){var e=this;this.$element.find("li").each(function(){var n=t(this).children("[data-submenu]");n.length&&t(this).children("a").off("click.zf.accordionMenu").on("click.zf.accordionMenu",function(t){t.preventDefault(),e.toggle(n)})}).on("keydown.zf.accordionmenu",function(n){var i,r,o=t(this),a=o.parent("ul").children("li"),s=o.children("[data-submenu]");a.each(function(e){return t(this).is(o)?(i=a.eq(Math.max(0,e-1)).find("a").first(),r=a.eq(Math.min(e+1,a.length-1)).find("a").first(),t(this).children("[data-submenu]:visible").length&&(r=o.find("li:first-child").find("a").first()),t(this).is(":first-child")?i=o.parents("li").first().find("a").first():i.children("[data-submenu]:visible").length&&(i=i.find("li:last-child").find("a").first()),void(t(this).is(":last-child")&&(r=o.parents("li").first().next("li").find("a").first()))):void 0}),Foundation.Keyboard.handleKey(n,"AccordionMenu",{open:function(){s.is(":hidden")&&(e.down(s),s.find("li").first().find("a").first().focus())},close:function(){s.length&&!s.is(":hidden")?e.up(s):o.parent("[data-submenu]").length&&(e.up(o.parent("[data-submenu]")),o.parents("li").first().find("a").first().focus())},up:function(){i.attr("tabindex",-1).focus(),n.preventDefault()},down:function(){r.attr("tabindex",-1).focus(),n.preventDefault()},toggle:function(){o.children("[data-submenu]").length&&e.toggle(o.children("[data-submenu]"))},closeAll:function(){e.hideAll()},handled:function(){n.stopImmediatePropagation()}})})}},{key:"hideAll",value:function(){this.$element.find("[data-submenu]").slideUp(this.options.slideSpeed)}},{key:"toggle",value:function(t){t.is(":animated")||(t.is(":hidden")?this.down(t):this.up(t))}},{key:"down",value:function(t){var e=this;this.options.multiOpen||this.up(this.$element.find(".is-active").not(t.parentsUntil(this.$element).add(t))),t.addClass("is-active").attr({"aria-hidden":!1}).parent(".is-accordion-submenu-parent").attr({"aria-expanded":!0}),Foundation.Move(this.options.slideSpeed,t,function(){t.slideDown(e.options.slideSpeed,function(){e.$element.trigger("down.zf.accordionMenu",[t])})})}},{key:"up",value:function(t){var e=this;Foundation.Move(this.options.slideSpeed,t,function(){t.slideUp(e.options.slideSpeed,function(){e.$element.trigger("up.zf.accordionMenu",[t])})});var n=t.find("[data-submenu]").slideUp(0).addBack().attr("aria-hidden",!0);n.parent(".is-accordion-submenu-parent").attr("aria-expanded",!1)}},{key:"destroy",value:function(){this.$element.find("[data-submenu]").slideDown(0).css("display",""),this.$element.find("a").off("click.zf.accordionMenu"),Foundation.Nest.Burn(this.$element,"accordion"),Foundation.unregisterPlugin(this)}}]),e}();e.defaults={slideSpeed:250,multiOpen:!0},Foundation.plugin(e,"AccordionMenu")}(jQuery);var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();!function(t){var e=function(){function e(n,i){_classCallCheck(this,e),this.$element=n,this.options=t.extend({},e.defaults,this.$element.data(),i),Foundation.Nest.Feather(this.$element,"drilldown"),this._init(),Foundation.registerPlugin(this,"Drilldown"),Foundation.Keyboard.register("Drilldown",{ENTER:"open",SPACE:"open",ARROW_RIGHT:"next",ARROW_UP:"up",ARROW_DOWN:"down",ARROW_LEFT:"previous",ESCAPE:"close",TAB:"down",SHIFT_TAB:"up"})}return _createClass(e,[{key:"_init",value:function(){this.$submenuAnchors=this.$element.find("li.is-drilldown-submenu-parent").children("a"),this.$submenus=this.$submenuAnchors.parent("li").children("[data-submenu]"),this.$menuItems=this.$element.find("li").not(".js-drilldown-back").attr("role","menuitem").find("a"),this._prepareMenu(),this._keyboardEvents()}},{key:"_prepareMenu",value:function(){var e=this;this.$submenuAnchors.each(function(){var n=t(this),i=n.find("a:first");e.options.parentLink&&i.clone().prependTo(n.children("[data-submenu]")).wrap('<li class="is-submenu-parent-item is-submenu-item is-drilldown-submenu-item" role="menu-item"></li>'),i.data("savedHref",i.attr("href")).removeAttr("href"),n.children("[data-submenu]").attr({"aria-hidden":!0,tabindex:0,role:"menu"}),e._events(n)}),this.$submenus.each(function(){var n=t(this),i=n.find(".js-drilldown-back");i.length||n.prepend(e.options.backButton),e._back(n)}),this.$element.parent().hasClass("is-drilldown")||(this.$wrapper=t(this.options.wrapper).addClass("is-drilldown").css(this._getMaxDims()),this.$element.wrap(this.$wrapper))}},{key:"_events",value:function(e){var n=this;e.off("click.zf.drilldown").on("click.zf.drilldown",function(i){if(t(i.target).parentsUntil("ul","li").hasClass("is-drilldown-submenu-parent")&&(i.stopImmediatePropagation(),i.preventDefault()),n._show(e.parent("li")),n.options.closeOnClick){var r=t("body").not(n.$wrapper);r.off(".zf.drilldown").on("click.zf.drilldown",function(t){t.preventDefault(),n._hideAll(),r.off(".zf.drilldown")})}})}},{key:"_keyboardEvents",value:function(){var e=this;this.$menuItems.add(this.$element.find(".js-drilldown-back > a")).on("keydown.zf.drilldown",function(n){var i,r,o=t(this),a=o.parent("li").parent("ul").children("li").children("a");a.each(function(e){return t(this).is(o)?(i=a.eq(Math.max(0,e-1)),void(r=a.eq(Math.min(e+1,a.length-1)))):void 0}),Foundation.Keyboard.handleKey(n,"Drilldown",{next:function(){o.is(e.$submenuAnchors)&&(e._show(o.parent("li")),o.parent("li").one(Foundation.transitionend(o),function(){o.parent("li").find("ul li a").filter(e.$menuItems).first().focus()}),n.preventDefault())},previous:function(){e._hide(o.parent("li").parent("ul")),o.parent("li").parent("ul").one(Foundation.transitionend(o),function(){setTimeout(function(){o.parent("li").parent("ul").parent("li").children("a").first().focus()},1)}),n.preventDefault()},up:function(){i.focus(),n.preventDefault()},down:function(){r.focus(),n.preventDefault()},close:function(){e._back()},open:function(){o.is(e.$menuItems)?o.is(e.$submenuAnchors)&&(e._show(o.parent("li")),o.parent("li").one(Foundation.transitionend(o),function(){o.parent("li").find("ul li a").filter(e.$menuItems).first().focus()}),n.preventDefault()):(e._hide(o.parent("li").parent("ul")),o.parent("li").parent("ul").one(Foundation.transitionend(o),function(){setTimeout(function(){o.parent("li").parent("ul").parent("li").children("a").first().focus()},1)}),n.preventDefault())},handled:function(){n.stopImmediatePropagation()}})})}},{key:"_hideAll",value:function(){var t=this.$element.find(".is-drilldown-submenu.is-active").addClass("is-closing");t.one(Foundation.transitionend(t),function(){t.removeClass("is-active is-closing")}),this.$element.trigger("closed.zf.drilldown")}},{key:"_back",value:function(t){var e=this;t.off("click.zf.drilldown"),t.children(".js-drilldown-back").on("click.zf.drilldown",function(n){n.stopImmediatePropagation(),e._hide(t)})}},{key:"_menuLinkEvents",value:function(){var t=this;this.$menuItems.not(".is-drilldown-submenu-parent").off("click.zf.drilldown").on("click.zf.drilldown",function(){setTimeout(function(){t._hideAll()},0)})}},{key:"_show",value:function(t){t.children("[data-submenu]").addClass("is-active"),this.$element.trigger("open.zf.drilldown",[t])}},{key:"_hide",value:function(t){t.addClass("is-closing").one(Foundation.transitionend(t),function(){t.removeClass("is-active is-closing"),t.blur()}),t.trigger("hide.zf.drilldown",[t])}},{key:"_getMaxDims",value:function(){var e=0,n={};return this.$submenus.add(this.$element).each(function(){var n=t(this).children("li").length;e=n>e?n:e}),n["min-height"]=e*this.$menuItems[0].getBoundingClientRect().height+"px",n["max-width"]=this.$element[0].getBoundingClientRect().width+"px",n}},{key:"destroy",value:function(){this._hideAll(),Foundation.Nest.Burn(this.$element,"drilldown"),this.$element.unwrap().find(".js-drilldown-back, .is-submenu-parent-item").remove().end().find(".is-active, .is-closing, .is-drilldown-submenu").removeClass("is-active is-closing is-drilldown-submenu").end().find("[data-submenu]").removeAttr("aria-hidden tabindex role").off(".zf.drilldown").end().off("zf.drilldown"),this.$element.find("a").each(function(){var e=t(this);e.data("savedHref")&&e.attr("href",e.data("savedHref")).removeData("savedHref")}),Foundation.unregisterPlugin(this)}}]),e}();e.defaults={backButton:'<li class="js-drilldown-back"><a tabindex="0">Back</a></li>',wrapper:"<div></div>",parentLink:!1,closeOnClick:!1},Foundation.plugin(e,"Drilldown")}(jQuery);var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();!function(t){var e=function(){function e(n,i){_classCallCheck(this,e),this.$element=n,this.options=t.extend({},e.defaults,this.$element.data(),i),this._init(),Foundation.registerPlugin(this,"Dropdown"),Foundation.Keyboard.register("Dropdown",{ENTER:"open",SPACE:"open",ESCAPE:"close",TAB:"tab_forward",SHIFT_TAB:"tab_backward"})}return _createClass(e,[{key:"_init",value:function(){var e=this.$element.attr("id");this.$anchor=t('[data-toggle="'+e+'"]')||t('[data-open="'+e+'"]'),this.$anchor.attr({"aria-controls":e,"data-is-focus":!1,"data-yeti-box":e,"aria-haspopup":!0,"aria-expanded":!1}),this.options.positionClass=this.getPositionClass(),this.counter=4,this.usedPositions=[],this.$element.attr({"aria-hidden":"true","data-yeti-box":e,"data-resize":e,"aria-labelledby":this.$anchor[0].id||Foundation.GetYoDigits(6,"dd-anchor")}),this._events()}},{key:"getPositionClass",value:function(){var t=this.$element[0].className.match(/(top|left|right|bottom)/g);t=t?t[0]:"";var e=/float-(.+)\s/.exec(this.$anchor[0].className);e=e?e[1]:"";var n=e?e+" "+t:t;return n}},{key:"_reposition",value:function(t){this.usedPositions.push(t?t:"bottom"),!t&&this.usedPositions.indexOf("top")<0?this.$element.addClass("top"):"top"===t&&this.usedPositions.indexOf("bottom")<0?this.$element.removeClass(t):"left"===t&&this.usedPositions.indexOf("right")<0?this.$element.removeClass(t).addClass("right"):"right"===t&&this.usedPositions.indexOf("left")<0?this.$element.removeClass(t).addClass("left"):!t&&this.usedPositions.indexOf("top")>-1&&this.usedPositions.indexOf("left")<0?this.$element.addClass("left"):"top"===t&&this.usedPositions.indexOf("bottom")>-1&&this.usedPositions.indexOf("left")<0?this.$element.removeClass(t).addClass("left"):"left"===t&&this.usedPositions.indexOf("right")>-1&&this.usedPositions.indexOf("bottom")<0?this.$element.removeClass(t):"right"===t&&this.usedPositions.indexOf("left")>-1&&this.usedPositions.indexOf("bottom")<0?this.$element.removeClass(t):this.$element.removeClass(t),this.classChanged=!0,this.counter--}},{key:"_setPosition",value:function(){if("false"===this.$anchor.attr("aria-expanded"))return!1;var t=this.getPositionClass(),e=Foundation.Box.GetDimensions(this.$element),n=(Foundation.Box.GetDimensions(this.$anchor),"left"===t?"left":"right"===t?"left":"top"),i="top"===n?"height":"width";if("height"===i?this.options.vOffset:this.options.hOffset,e.width>=e.windowDims.width||!this.counter&&!Foundation.Box.ImNotTouchingYou(this.$element))return this.$element.offset(Foundation.Box.GetOffsets(this.$element,this.$anchor,"center bottom",this.options.vOffset,this.options.hOffset,!0)).css({width:e.windowDims.width-2*this.options.hOffset,height:"auto"}),this.classChanged=!0,!1;for(this.$element.offset(Foundation.Box.GetOffsets(this.$element,this.$anchor,t,this.options.vOffset,this.options.hOffset));!Foundation.Box.ImNotTouchingYou(this.$element,!1,!0)&&this.counter;)this._reposition(t),this._setPosition()}},{key:"_events",value:function(){var e=this;this.$element.on({"open.zf.trigger":this.open.bind(this),"close.zf.trigger":this.close.bind(this),"toggle.zf.trigger":this.toggle.bind(this),"resizeme.zf.trigger":this._setPosition.bind(this)}),this.options.hover&&(this.$anchor.off("mouseenter.zf.dropdown mouseleave.zf.dropdown").on("mouseenter.zf.dropdown",function(){clearTimeout(e.timeout),e.timeout=setTimeout(function(){e.open(),e.$anchor.data("hover",!0)},e.options.hoverDelay)}).on("mouseleave.zf.dropdown",function(){clearTimeout(e.timeout),e.timeout=setTimeout(function(){e.close(),e.$anchor.data("hover",!1)},e.options.hoverDelay)}),this.options.hoverPane&&this.$element.off("mouseenter.zf.dropdown mouseleave.zf.dropdown").on("mouseenter.zf.dropdown",function(){clearTimeout(e.timeout)}).on("mouseleave.zf.dropdown",function(){clearTimeout(e.timeout),e.timeout=setTimeout(function(){e.close(),e.$anchor.data("hover",!1)},e.options.hoverDelay)})),this.$anchor.add(this.$element).on("keydown.zf.dropdown",function(n){var i=t(this),r=Foundation.Keyboard.findFocusable(e.$element);Foundation.Keyboard.handleKey(n,"Dropdown",{tab_forward:function(){e.$element.find(":focus").is(r.eq(-1))&&(e.options.trapFocus?(r.eq(0).focus(),n.preventDefault()):e.close())},tab_backward:function(){(e.$element.find(":focus").is(r.eq(0))||e.$element.is(":focus"))&&(e.options.trapFocus?(r.eq(-1).focus(),n.preventDefault()):e.close())},open:function(){i.is(e.$anchor)&&(e.open(),e.$element.attr("tabindex",-1).focus(),n.preventDefault())},close:function(){e.close(),e.$anchor.focus()}})})}},{key:"_addBodyHandler",value:function(){var e=t(document.body).not(this.$element),n=this;e.off("click.zf.dropdown").on("click.zf.dropdown",function(t){n.$anchor.is(t.target)||n.$anchor.find(t.target).length||n.$element.find(t.target).length||(n.close(),e.off("click.zf.dropdown"))})}},{key:"open",value:function(){if(this.$element.trigger("closeme.zf.dropdown",this.$element.attr("id")),this.$anchor.addClass("hover").attr({"aria-expanded":!0}),this._setPosition(),this.$element.addClass("is-open").attr({"aria-hidden":!1}),this.options.autoFocus){var t=Foundation.Keyboard.findFocusable(this.$element);t.length&&t.eq(0).focus()}this.options.closeOnClick&&this._addBodyHandler(),this.$element.trigger("show.zf.dropdown",[this.$element])}},{key:"close",value:function(){if(!this.$element.hasClass("is-open"))return!1;if(this.$element.removeClass("is-open").attr({"aria-hidden":!0}),this.$anchor.removeClass("hover").attr("aria-expanded",!1),this.classChanged){var t=this.getPositionClass();t&&this.$element.removeClass(t),this.$element.addClass(this.options.positionClass).css({height:"",width:""}),this.classChanged=!1,this.counter=4,this.usedPositions.length=0}this.$element.trigger("hide.zf.dropdown",[this.$element])}},{key:"toggle",value:function(){if(this.$element.hasClass("is-open")){if(this.$anchor.data("hover"))return;this.close()}else this.open()}},{key:"destroy",value:function(){this.$element.off(".zf.trigger").hide(),this.$anchor.off(".zf.dropdown"),Foundation.unregisterPlugin(this)}}]),e}();e.defaults={hoverDelay:250,hover:!1,hoverPane:!1,vOffset:1,hOffset:1,positionClass:"",trapFocus:!1,autoFocus:!1,closeOnClick:!1},Foundation.plugin(e,"Dropdown")}(jQuery);var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();!function(t){var e=function(){function e(n,i){_classCallCheck(this,e),this.$element=n,this.options=t.extend({},e.defaults,this.$element.data(),i),Foundation.Nest.Feather(this.$element,"dropdown"),this._init(),Foundation.registerPlugin(this,"DropdownMenu"),Foundation.Keyboard.register("DropdownMenu",{ENTER:"open",SPACE:"open",ARROW_RIGHT:"next",ARROW_UP:"up",ARROW_DOWN:"down",ARROW_LEFT:"previous",ESCAPE:"close"})}return _createClass(e,[{key:"_init",value:function(){var t=this.$element.find("li.is-dropdown-submenu-parent");this.$element.children(".is-dropdown-submenu-parent").children(".is-dropdown-submenu").addClass("first-sub"),this.$menuItems=this.$element.find('[role="menuitem"]'),this.$tabs=this.$element.children('[role="menuitem"]'),this.$tabs.find("ul.is-dropdown-submenu").addClass(this.options.verticalClass),this.$element.hasClass(this.options.rightClass)||"right"===this.options.alignment||Foundation.rtl()||this.$element.parents(".top-bar-right").is("*")?(this.options.alignment="right",t.addClass("opens-left")):t.addClass("opens-right"),this.changed=!1,this._events()}},{key:"_events",value:function(){var e=this,n="ontouchstart"in window||"undefined"!=typeof window.ontouchstart,i="is-dropdown-submenu-parent";(this.options.clickOpen||n)&&this.$menuItems.on("click.zf.dropdownmenu touchstart.zf.dropdownmenu",function(r){var o=t(r.target).parentsUntil("ul","."+i),a=o.hasClass(i),s="true"===o.attr("data-is-click");if(o.children(".is-dropdown-submenu"),a)if(s){if(!e.options.closeOnClick||!e.options.clickOpen&&!n||e.options.forceFollow&&n)return;r.stopImmediatePropagation(),r.preventDefault(),e._hide(o)}else r.preventDefault(),r.stopImmediatePropagation(),e._show(o.children(".is-dropdown-submenu")),o.add(o.parentsUntil(e.$element,"."+i)).attr("data-is-click",!0)}),this.options.disableHover||this.$menuItems.on("mouseenter.zf.dropdownmenu",function(n){n.stopImmediatePropagation();var r=t(this),o=r.hasClass(i);o&&(clearTimeout(e.delay),e.delay=setTimeout(function(){e._show(r.children(".is-dropdown-submenu"))},e.options.hoverDelay))}).on("mouseleave.zf.dropdownmenu",function(){var n=t(this),r=n.hasClass(i);if(r&&e.options.autoclose){if("true"===n.attr("data-is-click")&&e.options.clickOpen)return!1;clearTimeout(e.delay),e.delay=setTimeout(function(){e._hide(n)},e.options.closingTime)}}),this.$menuItems.on("keydown.zf.dropdownmenu",function(n){var i,r,o=t(n.target).parentsUntil("ul",'[role="menuitem"]'),a=e.$tabs.index(o)>-1,s=a?e.$tabs:o.siblings("li").add(o);s.each(function(e){return t(this).is(o)?(i=s.eq(e-1),void(r=s.eq(e+1))):void 0});var u=function(){o.is(":last-child")||r.children("a:first").focus()},l=function(){i.children("a:first").focus()},c=function(){var t=o.children("ul.is-dropdown-submenu");t.length&&(e._show(t),o.find("li > a:first").focus())},h=function(){var t=o.parent("ul").parent("li");t.children("a:first").focus(),e._hide(t)},f={open:c,close:function(){e._hide(e.$element),e.$menuItems.find("a:first").focus()},handled:function(){n.preventDefault(),n.stopImmediatePropagation()}};a?e.vertical?"left"===e.options.alignment?t.extend(f,{down:u,up:l,next:c,previous:h}):t.extend(f,{down:u,up:l,next:h,previous:c}):t.extend(f,{next:u,previous:l,down:c,up:h}):"left"===e.options.alignment?t.extend(f,{next:c,previous:h,down:u,up:l}):t.extend(f,{next:h,previous:c,down:u,up:l}),Foundation.Keyboard.handleKey(n,"DropdownMenu",f)})}},{key:"_addBodyHandler",value:function(){var e=t(document.body),n=this;e.off("mouseup.zf.dropdownmenu touchend.zf.dropdownmenu").on("mouseup.zf.dropdownmenu touchend.zf.dropdownmenu",function(t){var i=n.$element.find(t.target);i.length||(n._hide(),e.off("mouseup.zf.dropdownmenu touchend.zf.dropdownmenu"))})}},{key:"_show",value:function(e){var n=this.$tabs.index(this.$tabs.filter(function(n,i){return t(i).find(e).length>0})),i=e.parent("li.is-dropdown-submenu-parent").siblings("li.is-dropdown-submenu-parent");this._hide(i,n),e.css("visibility","hidden").addClass("js-dropdown-active").attr({"aria-hidden":!1}).parent("li.is-dropdown-submenu-parent").addClass("is-active").attr({"aria-expanded":!0});var r=Foundation.Box.ImNotTouchingYou(e,null,!0);if(!r){var o="left"===this.options.alignment?"-right":"-left",a=e.parent(".is-dropdown-submenu-parent");a.removeClass("opens"+o).addClass("opens-"+this.options.alignment),r=Foundation.Box.ImNotTouchingYou(e,null,!0),r||a.removeClass("opens-"+this.options.alignment).addClass("opens-inner"),this.changed=!0}e.css("visibility",""),this.options.closeOnClick&&this._addBodyHandler(),this.$element.trigger("show.zf.dropdownmenu",[e])}},{key:"_hide",value:function(t,e){var n;n=t&&t.length?t:void 0!==e?this.$tabs.not(function(t){return t===e}):this.$element;var i=n.hasClass("is-active")||n.find(".is-active").length>0;if(i){if(n.find("li.is-active").add(n).attr({"aria-expanded":!1,"data-is-click":!1}).removeClass("is-active"),n.find("ul.js-dropdown-active").attr({"aria-hidden":!0}).removeClass("js-dropdown-active"),this.changed||n.find("opens-inner").length){var r="left"===this.options.alignment?"right":"left";n.find("li.is-dropdown-submenu-parent").add(n).removeClass("opens-inner opens-"+this.options.alignment).addClass("opens-"+r),this.changed=!1}this.$element.trigger("hide.zf.dropdownmenu",[n])}}},{key:"destroy",value:function(){this.$menuItems.off(".zf.dropdownmenu").removeAttr("data-is-click").removeClass("is-right-arrow is-left-arrow is-down-arrow opens-right opens-left opens-inner"),t(document.body).off(".zf.dropdownmenu"),Foundation.Nest.Burn(this.$element,"dropdown"),Foundation.unregisterPlugin(this)}}]),e}();e.defaults={disableHover:!1,autoclose:!0,hoverDelay:50,clickOpen:!1,closingTime:500,alignment:"left",closeOnClick:!0,verticalClass:"vertical",rightClass:"align-right",forceFollow:!0},Foundation.plugin(e,"DropdownMenu")}(jQuery);var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();!function(t){var e=function(){function e(n,i){_classCallCheck(this,e),this.$element=n,this.options=t.extend({},e.defaults,this.$element.data(),i),this._init(),Foundation.registerPlugin(this,"Equalizer")}return _createClass(e,[{key:"_init",value:function(){var e=this.$element.attr("data-equalizer")||"",n=this.$element.find('[data-equalizer-watch="'+e+'"]');this.$watched=n.length?n:this.$element.find("[data-equalizer-watch]"),this.$element.attr("data-resize",e||Foundation.GetYoDigits(6,"eq")),this.hasNested=this.$element.find("[data-equalizer]").length>0,this.isNested=this.$element.parentsUntil(document.body,"[data-equalizer]").length>0,this.isOn=!1;var i,r=this.$element.find("img");this.options.equalizeOn?(i=this._checkMQ(),t(window).on("changed.zf.mediaquery",this._checkMQ.bind(this))):this._events(),(void 0!==i&&i===!1||void 0===i)&&(r.length?Foundation.onImagesLoaded(r,this._reflow.bind(this)):this._reflow())}},{key:"_pauseEvents",value:function(){this.isOn=!1,this.$element.off(".zf.equalizer resizeme.zf.trigger")}},{key:"_events",value:function(){var t=this;this._pauseEvents(),this.hasNested?this.$element.on("postequalized.zf.equalizer",function(e){e.target!==t.$element[0]&&t._reflow()}):this.$element.on("resizeme.zf.trigger",this._reflow.bind(this)),this.isOn=!0}},{key:"_checkMQ",value:function(){var t=!Foundation.MediaQuery.atLeast(this.options.equalizeOn);return t?this.isOn&&(this._pauseEvents(),this.$watched.css("height","auto")):this.isOn||this._events(),t}},{key:"_killswitch",value:function(){}},{key:"_reflow",value:function(){return!this.options.equalizeOnStack&&this._isStacked()?(this.$watched.css("height","auto"),!1):void(this.options.equalizeByRow?this.getHeightsByRow(this.applyHeightByRow.bind(this)):this.getHeights(this.applyHeight.bind(this)))}},{key:"_isStacked",value:function(){return this.$watched[0].offsetTop!==this.$watched[1].offsetTop}},{key:"getHeights",value:function(t){for(var e=[],n=0,i=this.$watched.length;i>n;n++)this.$watched[n].style.height="auto",e.push(this.$watched[n].offsetHeight);t(e)}},{key:"getHeightsByRow",value:function(e){var n=this.$watched.length?this.$watched.first().offset().top:0,i=[],r=0;i[r]=[];for(var o=0,a=this.$watched.length;a>o;o++){this.$watched[o].style.height="auto";var s=t(this.$watched[o]).offset().top;s!=n&&(r++,i[r]=[],n=s),i[r].push([this.$watched[o],this.$watched[o].offsetHeight])}for(var u=0,l=i.length;l>u;u++){var c=t(i[u]).map(function(){return this[1]}).get(),h=Math.max.apply(null,c);i[u].push(h)}e(i)}},{key:"applyHeight",value:function(t){var e=Math.max.apply(null,t);this.$element.trigger("preequalized.zf.equalizer"),this.$watched.css("height",e),this.$element.trigger("postequalized.zf.equalizer")}},{key:"applyHeightByRow",value:function(e){this.$element.trigger("preequalized.zf.equalizer");for(var n=0,i=e.length;i>n;n++){var r=e[n].length,o=e[n][r-1];if(2>=r)t(e[n][0][0]).css({height:"auto"});else{this.$element.trigger("preequalizedrow.zf.equalizer");for(var a=0,s=r-1;s>a;a++)t(e[n][a][0]).css({height:o});this.$element.trigger("postequalizedrow.zf.equalizer")}}this.$element.trigger("postequalized.zf.equalizer")}},{key:"destroy",value:function(){this._pauseEvents(),this.$watched.css("height","auto"),Foundation.unregisterPlugin(this)}}]),e}();e.defaults={equalizeOnStack:!0,equalizeByRow:!1,equalizeOn:""},Foundation.plugin(e,"Equalizer")}(jQuery);var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();!function(t){var e=function(){function e(n,i){_classCallCheck(this,e),this.$element=n,this.options=t.extend({},e.defaults,i),this.rules=[],this.currentPath="",this._init(),this._events(),Foundation.registerPlugin(this,"Interchange")}return _createClass(e,[{key:"_init",value:function(){this._addBreakpoints(),this._generateRules(),this._reflow()}},{key:"_events",value:function(){t(window).on("resize.zf.interchange",Foundation.util.throttle(this._reflow.bind(this),50))}},{key:"_reflow",value:function(){var t;for(var e in this.rules){var n=this.rules[e];window.matchMedia(n.query).matches&&(t=n)}t&&this.replace(t.path)}},{key:"_addBreakpoints",value:function(){for(var t in Foundation.MediaQuery.queries){var n=Foundation.MediaQuery.queries[t];e.SPECIAL_QUERIES[n.name]=n.value}}},{key:"_generateRules",value:function(){var t,n=[];t=this.options.rules?this.options.rules:this.$element.data("interchange").match(/\[.*?\]/g);for(var i in t){var r=t[i].slice(1,-1).split(", "),o=r.slice(0,-1).join(""),a=r[r.length-1];
e.SPECIAL_QUERIES[a]&&(a=e.SPECIAL_QUERIES[a]),n.push({path:o,query:a})}this.rules=n}},{key:"replace",value:function(e){if(this.currentPath!==e){var n=this,i="replaced.zf.interchange";"IMG"===this.$element[0].nodeName?this.$element.attr("src",e).load(function(){n.currentPath=e}).trigger(i):e.match(/\.(gif|jpg|jpeg|png|svg|tiff)([?#].*)?/i)?this.$element.css({"background-image":"url("+e+")"}).trigger(i):t.get(e,function(r){n.$element.html(r).trigger(i),t(r).foundation(),n.currentPath=e})}}},{key:"destroy",value:function(){}}]),e}();e.defaults={rules:null},e.SPECIAL_QUERIES={landscape:"screen and (orientation: landscape)",portrait:"screen and (orientation: portrait)",retina:"only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (min--moz-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2/1), only screen and (min-device-pixel-ratio: 2), only screen and (min-resolution: 192dpi), only screen and (min-resolution: 2dppx)"},Foundation.plugin(e,"Interchange")}(jQuery);var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();!function(t){var e=function(){function e(n,i){_classCallCheck(this,e),this.$element=n,this.options=t.extend({},e.defaults,this.$element.data(),i),this._init(),Foundation.registerPlugin(this,"Magellan")}return _createClass(e,[{key:"_init",value:function(){var e=this.$element[0].id||Foundation.GetYoDigits(6,"magellan");this.$targets=t("[data-magellan-target]"),this.$links=this.$element.find("a"),this.$element.attr({"data-resize":e,"data-scroll":e,id:e}),this.$active=t(),this.scrollPos=parseInt(window.pageYOffset,10),this._events()}},{key:"calcPoints",value:function(){var e=this,n=document.body,i=document.documentElement;this.points=[],this.winHeight=Math.round(Math.max(window.innerHeight,i.clientHeight)),this.docHeight=Math.round(Math.max(n.scrollHeight,n.offsetHeight,i.clientHeight,i.scrollHeight,i.offsetHeight)),this.$targets.each(function(){var n=t(this),i=Math.round(n.offset().top-e.options.threshold);n.targetPoint=i,e.points.push(i)})}},{key:"_events",value:function(){var e=this;t("html, body"),{duration:e.options.animationDuration,easing:e.options.animationEasing},t(window).one("load",function(){e.options.deepLinking&&location.hash&&e.scrollToLoc(location.hash),e.calcPoints(),e._updateActive()}),this.$element.on({"resizeme.zf.trigger":this.reflow.bind(this),"scrollme.zf.trigger":this._updateActive.bind(this)}).on("click.zf.magellan",'a[href^="#"]',function(t){t.preventDefault();var n=this.getAttribute("href");e.scrollToLoc(n)})}},{key:"scrollToLoc",value:function(e){var n=Math.round(t(e).offset().top-this.options.threshold/2-this.options.barOffset);t("html, body").stop(!0).animate({scrollTop:n},this.options.animationDuration,this.options.animationEasing)}},{key:"reflow",value:function(){this.calcPoints(),this._updateActive()}},{key:"_updateActive",value:function(){var t,e=parseInt(window.pageYOffset,10);if(e+this.winHeight===this.docHeight)t=this.points.length-1;else if(e<this.points[0])t=0;else{var n=this.scrollPos<e,i=this,r=this.points.filter(function(t){return n?e>=t:t-i.options.threshold<=e});t=r.length?r.length-1:0}if(this.$active.removeClass(this.options.activeClass),this.$active=this.$links.eq(t).addClass(this.options.activeClass),this.options.deepLinking){var o=this.$active[0].getAttribute("href");window.history.pushState?window.history.pushState(null,null,o):window.location.hash=o}this.scrollPos=e,this.$element.trigger("update.zf.magellan",[this.$active])}},{key:"destroy",value:function(){if(this.$element.off(".zf.trigger .zf.magellan").find("."+this.options.activeClass).removeClass(this.options.activeClass),this.options.deepLinking){var t=this.$active[0].getAttribute("href");window.location.hash.replace(t,"")}Foundation.unregisterPlugin(this)}}]),e}();e.defaults={animationDuration:500,animationEasing:"linear",threshold:50,activeClass:"active",deepLinking:!1,barOffset:0},Foundation.plugin(e,"Magellan")}(jQuery);var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();!function(t){var e=function(){function e(n,i){_classCallCheck(this,e),this.$element=n,this.options=t.extend({},e.defaults,this.$element.data(),i),this.$lastTrigger=t(),this._init(),this._events(),Foundation.registerPlugin(this,"OffCanvas")}return _createClass(e,[{key:"_init",value:function(){var e=this.$element.attr("id");if(this.$element.attr("aria-hidden","true"),t(document).find('[data-open="'+e+'"], [data-close="'+e+'"], [data-toggle="'+e+'"]').attr("aria-expanded","false").attr("aria-controls",e),this.options.closeOnClick)if(t(".js-off-canvas-exit").length)this.$exiter=t(".js-off-canvas-exit");else{var n=document.createElement("div");n.setAttribute("class","js-off-canvas-exit"),t("[data-off-canvas-content]").append(n),this.$exiter=t(n)}this.options.isRevealed=this.options.isRevealed||new RegExp(this.options.revealClass,"g").test(this.$element[0].className),this.options.isRevealed&&(this.options.revealOn=this.options.revealOn||this.$element[0].className.match(/(reveal-for-medium|reveal-for-large)/g)[0].split("-")[2],this._setMQChecker()),this.options.transitionTime||(this.options.transitionTime=1e3*parseFloat(window.getComputedStyle(t("[data-off-canvas-wrapper]")[0]).transitionDuration))}},{key:"_events",value:function(){this.$element.off(".zf.trigger .zf.offcanvas").on({"open.zf.trigger":this.open.bind(this),"close.zf.trigger":this.close.bind(this),"toggle.zf.trigger":this.toggle.bind(this),"keydown.zf.offcanvas":this._handleKeyboard.bind(this)}),this.options.closeOnClick&&this.$exiter.length&&this.$exiter.on({"click.zf.offcanvas":this.close.bind(this)})}},{key:"_setMQChecker",value:function(){var e=this;t(window).on("changed.zf.mediaquery",function(){Foundation.MediaQuery.atLeast(e.options.revealOn)?e.reveal(!0):e.reveal(!1)}).one("load.zf.offcanvas",function(){Foundation.MediaQuery.atLeast(e.options.revealOn)&&e.reveal(!0)})}},{key:"reveal",value:function(t){var e=this.$element.find("[data-close]");t?(this.close(),this.isRevealed=!0,this.$element.off("open.zf.trigger toggle.zf.trigger"),e.length&&e.hide()):(this.isRevealed=!1,this.$element.on({"open.zf.trigger":this.open.bind(this),"toggle.zf.trigger":this.toggle.bind(this)}),e.length&&e.show())}},{key:"open",value:function(e,n){if(!this.$element.hasClass("is-open")&&!this.isRevealed){var i=this;t(document.body),this.options.forceTop&&t("body").scrollTop(0),Foundation.Move(this.options.transitionTime,this.$element,function(){t("[data-off-canvas-wrapper]").addClass("is-off-canvas-open is-open-"+i.options.position),i.$element.addClass("is-open")}),this.$element.attr("aria-hidden","false").trigger("opened.zf.offcanvas"),this.options.closeOnClick&&this.$exiter.addClass("is-visible"),n&&(this.$lastTrigger=n.attr("aria-expanded","true")),this.options.autoFocus&&this.$element.one(Foundation.transitionend(this.$element),function(){i.$element.find("a, button").eq(0).focus()}),this.options.trapFocus&&(t("[data-off-canvas-content]").attr("tabindex","-1"),this._trapFocus())}}},{key:"_trapFocus",value:function(){var t=Foundation.Keyboard.findFocusable(this.$element),e=t.eq(0),n=t.eq(-1);t.off(".zf.offcanvas").on("keydown.zf.offcanvas",function(t){9!==t.which&&9!==t.keycode||(t.target!==n[0]||t.shiftKey||(t.preventDefault(),e.focus()),t.target===e[0]&&t.shiftKey&&(t.preventDefault(),n.focus()))})}},{key:"close",value:function(){if(this.$element.hasClass("is-open")&&!this.isRevealed){var e=this;t("[data-off-canvas-wrapper]").removeClass("is-off-canvas-open is-open-"+e.options.position),e.$element.removeClass("is-open"),this.$element.attr("aria-hidden","true").trigger("closed.zf.offcanvas"),this.options.closeOnClick&&this.$exiter.removeClass("is-visible"),this.$lastTrigger.attr("aria-expanded","false"),this.options.trapFocus&&t("[data-off-canvas-content]").removeAttr("tabindex")}}},{key:"toggle",value:function(t,e){this.$element.hasClass("is-open")?this.close(t,e):this.open(t,e)}},{key:"_handleKeyboard",value:function(t){27===t.which&&(t.stopPropagation(),t.preventDefault(),this.close(),this.$lastTrigger.focus())}},{key:"destroy",value:function(){this.close(),this.$element.off(".zf.trigger .zf.offcanvas"),this.$exiter.off(".zf.offcanvas"),Foundation.unregisterPlugin(this)}}]),e}();e.defaults={closeOnClick:!0,transitionTime:0,position:"left",forceTop:!0,isRevealed:!1,revealOn:null,autoFocus:!0,revealClass:"reveal-for-",trapFocus:!1},Foundation.plugin(e,"OffCanvas")}(jQuery);var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();!function(t){var e=function(){function e(n,i){_classCallCheck(this,e),this.$element=n,this.options=t.extend({},e.defaults,this.$element.data(),i),this._init(),Foundation.registerPlugin(this,"Orbit"),Foundation.Keyboard.register("Orbit",{ltr:{ARROW_RIGHT:"next",ARROW_LEFT:"previous"},rtl:{ARROW_LEFT:"next",ARROW_RIGHT:"previous"}})}return _createClass(e,[{key:"_init",value:function(){this.$wrapper=this.$element.find("."+this.options.containerClass),this.$slides=this.$element.find("."+this.options.slideClass);var t=this.$element.find("img"),e=this.$slides.filter(".is-active");e.length||this.$slides.eq(0).addClass("is-active"),this.options.useMUI||this.$slides.addClass("no-motionui"),t.length?Foundation.onImagesLoaded(t,this._prepareForOrbit.bind(this)):this._prepareForOrbit(),this.options.bullets&&this._loadBullets(),this._events(),this.options.autoPlay&&this.$slides.length>1&&this.geoSync(),this.options.accessible&&this.$wrapper.attr("tabindex",0)}},{key:"_loadBullets",value:function(){this.$bullets=this.$element.find("."+this.options.boxOfBullets).find("button")}},{key:"geoSync",value:function(){var t=this;this.timer=new Foundation.Timer(this.$element,{duration:this.options.timerDelay,infinite:!1},function(){t.changeSlide(!0)}),this.timer.start()}},{key:"_prepareForOrbit",value:function(){var t=this;this._setWrapperHeight(function(e){t._setSlideHeight(e)})}},{key:"_setWrapperHeight",value:function(e){var n,i=0,r=0;this.$slides.each(function(){n=this.getBoundingClientRect().height,t(this).attr("data-slide",r),r&&t(this).css({position:"relative",display:"none"}),i=n>i?n:i,r++}),r===this.$slides.length&&(this.$wrapper.css({height:i}),e(i))}},{key:"_setSlideHeight",value:function(e){this.$slides.each(function(){t(this).css("max-height",e)})}},{key:"_events",value:function(){var e=this;if(this.$slides.length>1){if(this.options.swipe&&this.$slides.off("swipeleft.zf.orbit swiperight.zf.orbit").on("swipeleft.zf.orbit",function(t){t.preventDefault(),e.changeSlide(!0)}).on("swiperight.zf.orbit",function(t){t.preventDefault(),e.changeSlide(!1)}),this.options.autoPlay&&(this.$slides.on("click.zf.orbit",function(){e.$element.data("clickedOn",!e.$element.data("clickedOn")),e.timer[e.$element.data("clickedOn")?"pause":"start"]()}),this.options.pauseOnHover&&this.$element.on("mouseenter.zf.orbit",function(){e.timer.pause()}).on("mouseleave.zf.orbit",function(){e.$element.data("clickedOn")||e.timer.start()})),this.options.navButtons){var n=this.$element.find("."+this.options.nextClass+", ."+this.options.prevClass);n.attr("tabindex",0).on("click.zf.orbit touchend.zf.orbit",function(n){n.preventDefault(),e.changeSlide(t(this).hasClass(e.options.nextClass))})}this.options.bullets&&this.$bullets.on("click.zf.orbit touchend.zf.orbit",function(){if(/is-active/g.test(this.className))return!1;var n=t(this).data("slide"),i=n>e.$slides.filter(".is-active").data("slide"),r=e.$slides.eq(n);e.changeSlide(i,r,n)}),this.$wrapper.add(this.$bullets).on("keydown.zf.orbit",function(n){Foundation.Keyboard.handleKey(n,"Orbit",{next:function(){e.changeSlide(!0)},previous:function(){e.changeSlide(!1)},handled:function(){t(n.target).is(e.$bullets)&&e.$bullets.filter(".is-active").focus()}})})}}},{key:"changeSlide",value:function(t,e,n){var i=this.$slides.filter(".is-active").eq(0);if(/mui/g.test(i[0].className))return!1;var r,o=this.$slides.first(),a=this.$slides.last(),s=t?"Right":"Left",u=t?"Left":"Right",l=this;r=e?e:t?this.options.infiniteWrap?i.next("."+this.options.slideClass).length?i.next("."+this.options.slideClass):o:i.next("."+this.options.slideClass):this.options.infiniteWrap?i.prev("."+this.options.slideClass).length?i.prev("."+this.options.slideClass):a:i.prev("."+this.options.slideClass),r.length&&(this.options.bullets&&(n=n||this.$slides.index(r),this._updateBullets(n)),this.options.useMUI?(Foundation.Motion.animateIn(r.addClass("is-active").css({position:"absolute",top:0}),this.options["animInFrom"+s],function(){r.css({position:"relative",display:"block"}).attr("aria-live","polite")}),Foundation.Motion.animateOut(i.removeClass("is-active"),this.options["animOutTo"+u],function(){i.removeAttr("aria-live"),l.options.autoPlay&&!l.timer.isPaused&&l.timer.restart()})):(i.removeClass("is-active is-in").removeAttr("aria-live").hide(),r.addClass("is-active is-in").attr("aria-live","polite").show(),this.options.autoPlay&&!this.timer.isPaused&&this.timer.restart()),this.$element.trigger("slidechange.zf.orbit",[r]))}},{key:"_updateBullets",value:function(t){var e=this.$element.find("."+this.options.boxOfBullets).find(".is-active").removeClass("is-active").blur(),n=e.find("span:last").detach();this.$bullets.eq(t).addClass("is-active").append(n)}},{key:"destroy",value:function(){this.$element.off(".zf.orbit").find("*").off(".zf.orbit").end().hide(),Foundation.unregisterPlugin(this)}}]),e}();e.defaults={bullets:!0,navButtons:!0,animInFromRight:"slide-in-right",animOutToRight:"slide-out-right",animInFromLeft:"slide-in-left",animOutToLeft:"slide-out-left",autoPlay:!0,timerDelay:5e3,infiniteWrap:!0,swipe:!0,pauseOnHover:!0,accessible:!0,containerClass:"orbit-container",slideClass:"orbit-slide",boxOfBullets:"orbit-bullets",nextClass:"orbit-next",prevClass:"orbit-previous",useMUI:!0},Foundation.plugin(e,"Orbit")}(jQuery);var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();!function(t){var e=function(){function e(n){_classCallCheck(this,e),this.$element=t(n),this.rules=this.$element.data("responsive-menu"),this.currentMq=null,this.currentPlugin=null,this._init(),this._events(),Foundation.registerPlugin(this,"ResponsiveMenu")}return _createClass(e,[{key:"_init",value:function(){if("string"==typeof this.rules){for(var e={},i=this.rules.split(" "),r=0;r<i.length;r++){var o=i[r].split("-"),a=o.length>1?o[0]:"small",s=o.length>1?o[1]:o[0];null!==n[s]&&(e[a]=n[s])}this.rules=e}t.isEmptyObject(this.rules)||this._checkMediaQueries()}},{key:"_events",value:function(){var e=this;t(window).on("changed.zf.mediaquery",function(){e._checkMediaQueries()})}},{key:"_checkMediaQueries",value:function(){var e,i=this;t.each(this.rules,function(t){Foundation.MediaQuery.atLeast(t)&&(e=t)}),e&&(this.currentPlugin instanceof this.rules[e].plugin||(t.each(n,function(t,e){i.$element.removeClass(e.cssClass)}),this.$element.addClass(this.rules[e].cssClass),this.currentPlugin&&this.currentPlugin.destroy(),this.currentPlugin=new this.rules[e].plugin(this.$element,{})))}},{key:"destroy",value:function(){this.currentPlugin.destroy(),t(window).off(".zf.ResponsiveMenu"),Foundation.unregisterPlugin(this)}}]),e}();e.defaults={};var n={dropdown:{cssClass:"dropdown",plugin:Foundation._plugins["dropdown-menu"]||null},drilldown:{cssClass:"drilldown",plugin:Foundation._plugins.drilldown||null},accordion:{cssClass:"accordion-menu",plugin:Foundation._plugins["accordion-menu"]||null}};Foundation.plugin(e,"ResponsiveMenu")}(jQuery);var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();!function(t){var e=function(){function e(n,i){_classCallCheck(this,e),this.$element=t(n),this.options=t.extend({},e.defaults,this.$element.data(),i),this._init(),this._events(),Foundation.registerPlugin(this,"ResponsiveToggle")}return _createClass(e,[{key:"_init",value:function(){var e=this.$element.data("responsive-toggle");e||console.error("Your tab bar needs an ID of a Menu as the value of data-tab-bar."),this.$targetMenu=t("#"+e),this.$toggler=this.$element.find("[data-toggle]"),this._update()}},{key:"_events",value:function(){t(window).on("changed.zf.mediaquery",this._update.bind(this)),this.$toggler.on("click.zf.responsiveToggle",this.toggleMenu.bind(this))}},{key:"_update",value:function(){Foundation.MediaQuery.atLeast(this.options.hideFor)?(this.$element.hide(),this.$targetMenu.show()):(this.$element.show(),this.$targetMenu.hide())}},{key:"toggleMenu",value:function(){Foundation.MediaQuery.atLeast(this.options.hideFor)||(this.$targetMenu.toggle(0),this.$element.trigger("toggled.zf.responsiveToggle"))}},{key:"destroy",value:function(){}}]),e}();e.defaults={hideFor:"medium"},Foundation.plugin(e,"ResponsiveToggle")}(jQuery);var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();!function(t){function e(){return/iP(ad|hone|od).*OS/.test(window.navigator.userAgent)}var n=function(){function n(e,i){_classCallCheck(this,n),this.$element=e,this.options=t.extend({},n.defaults,this.$element.data(),i),this._init(),Foundation.registerPlugin(this,"Reveal"),Foundation.Keyboard.register("Reveal",{ENTER:"open",SPACE:"open",ESCAPE:"close",TAB:"tab_forward",SHIFT_TAB:"tab_backward"})}return _createClass(n,[{key:"_init",value:function(){if(this.id=this.$element.attr("id"),this.isActive=!1,this.cached={mq:Foundation.MediaQuery.current},this.isiOS=e(),this.isiOS&&this.$element.addClass("is-ios"),this.$anchor=t(t('[data-open="'+this.id+'"]').length?'[data-open="'+this.id+'"]':'[data-toggle="'+this.id+'"]'),this.$anchor.length){var n=this.$anchor[0].id||Foundation.GetYoDigits(6,"reveal");this.$anchor.attr({"aria-controls":this.id,id:n,"aria-haspopup":!0,tabindex:0}),this.$element.attr({"aria-labelledby":n})}(this.options.fullScreen||this.$element.hasClass("full"))&&(this.options.fullScreen=!0,this.options.overlay=!1),this.options.overlay&&!this.$overlay&&(this.$overlay=this._makeOverlay(this.id)),this.$element.attr({role:"dialog","aria-hidden":!0,"data-yeti-box":this.id,"data-resize":this.id}),this.$overlay?this.$element.detach().appendTo(this.$overlay):(this.$element.detach().appendTo(t("body")),this.$element.addClass("without-overlay")),this._events(),this.options.deepLink&&window.location.hash==="#"+this.id&&t(window).one("load.zf.reveal",this.open.bind(this))}},{key:"_makeOverlay",value:function(){var e=t("<div></div>").addClass("reveal-overlay").attr({tabindex:-1,"aria-hidden":!0}).appendTo("body");return e}},{key:"_updatePosition",value:function(){var e,n,i=this.$element.outerWidth(),r=t(window).width(),o=this.$element.outerHeight(),a=t(window).height();e="auto"===this.options.hOffset?parseInt((r-i)/2,10):parseInt(this.options.hOffset,10),n="auto"===this.options.vOffset?o>a?parseInt(Math.min(100,a/10),10):parseInt((a-o)/4,10):parseInt(this.options.vOffset,10),this.$element.css({top:n+"px"}),this.$overlay&&"auto"===this.options.hOffset||(this.$element.css({left:e+"px"}),this.$element.css({margin:"0px"}))}},{key:"_events",value:function(){var e=this;this.$element.on({"open.zf.trigger":this.open.bind(this),"close.zf.trigger":this.close.bind(this),"toggle.zf.trigger":this.toggle.bind(this),"resizeme.zf.trigger":function(){e._updatePosition()}}),this.$anchor.length&&this.$anchor.on("keydown.zf.reveal",function(t){13!==t.which&&32!==t.which||(t.stopPropagation(),t.preventDefault(),e.open())}),this.options.closeOnClick&&this.options.overlay&&this.$overlay.off(".zf.reveal").on("click.zf.reveal",function(n){n.target===e.$element[0]||t.contains(e.$element[0],n.target)||e.close()}),this.options.deepLink&&t(window).on("popstate.zf.reveal:"+this.id,this._handleState.bind(this))}},{key:"_handleState",value:function(){window.location.hash!=="#"+this.id||this.isActive?this.close():this.open()}},{key:"open",value:function(){var e=this;if(this.options.deepLink){var n="#"+this.id;window.history.pushState?window.history.pushState(null,null,n):window.location.hash=n}if(this.isActive=!0,this.$element.css({visibility:"hidden"}).show().scrollTop(0),this.options.overlay&&this.$overlay.css({visibility:"hidden"}).show(),this._updatePosition(),this.$element.hide().css({visibility:""}),this.$overlay&&this.$overlay.css({visibility:""}).hide(),this.options.multipleOpened||this.$element.trigger("closeme.zf.reveal",this.id),this.options.animationIn?(this.options.overlay&&Foundation.Motion.animateIn(this.$overlay,"fade-in"),Foundation.Motion.animateIn(this.$element,this.options.animationIn,function(){e.focusableElements=Foundation.Keyboard.findFocusable(e.$element)})):(this.options.overlay&&this.$overlay.show(0),this.$element.show(this.options.showDelay)),this.$element.attr({"aria-hidden":!1,tabindex:-1}).focus(),this.$element.trigger("open.zf.reveal"),this.isiOS){var i=window.pageYOffset;t("html, body").addClass("is-reveal-open").scrollTop(i)}else t("body").addClass("is-reveal-open");t("body").addClass("is-reveal-open").attr("aria-hidden",!(!this.options.overlay&&!this.options.fullScreen)),setTimeout(function(){e._extraHandlers()},0)}},{key:"_extraHandlers",value:function(){var e=this;this.focusableElements=Foundation.Keyboard.findFocusable(this.$element),this.options.overlay||!this.options.closeOnClick||this.options.fullScreen||t("body").on("click.zf.reveal",function(n){n.target===e.$element[0]||t.contains(e.$element[0],n.target)||e.close()}),this.options.closeOnEsc&&t(window).on("keydown.zf.reveal",function(t){Foundation.Keyboard.handleKey(t,"Reveal",{close:function(){e.options.closeOnEsc&&(e.close(),e.$anchor.focus())}})}),this.$element.on("keydown.zf.reveal",function(n){var i=t(this);Foundation.Keyboard.handleKey(n,"Reveal",{tab_forward:function(){e.$element.find(":focus").is(e.focusableElements.eq(-1))&&(e.focusableElements.eq(0).focus(),n.preventDefault()),0===e.focusableElements.length&&n.preventDefault()},tab_backward:function(){(e.$element.find(":focus").is(e.focusableElements.eq(0))||e.$element.is(":focus"))&&(e.focusableElements.eq(-1).focus(),n.preventDefault()),0===e.focusableElements.length&&n.preventDefault()},open:function(){e.$element.find(":focus").is(e.$element.find("[data-close]"))?setTimeout(function(){e.$anchor.focus()},1):i.is(e.focusableElements)&&e.open()},close:function(){e.options.closeOnEsc&&(e.close(),e.$anchor.focus())}})})}},{key:"close",value:function(){function e(){n.isiOS?t("html, body").removeClass("is-reveal-open"):t("body").removeClass("is-reveal-open"),t("body").attr({"aria-hidden":!1,tabindex:""}),n.$element.attr("aria-hidden",!0),n.$element.trigger("closed.zf.reveal")}if(!this.isActive||!this.$element.is(":visible"))return!1;var n=this;this.options.animationOut?(this.options.overlay?Foundation.Motion.animateOut(this.$overlay,"fade-out",e):e(),Foundation.Motion.animateOut(this.$element,this.options.animationOut)):(this.options.overlay?this.$overlay.hide(0,e):e(),this.$element.hide(this.options.hideDelay)),this.options.closeOnEsc&&t(window).off("keydown.zf.reveal"),!this.options.overlay&&this.options.closeOnClick&&t("body").off("click.zf.reveal"),this.$element.off("keydown.zf.reveal"),this.options.resetOnClose&&this.$element.html(this.$element.html()),this.isActive=!1,n.options.deepLink&&(window.history.replaceState?window.history.replaceState("",document.title,window.location.pathname):window.location.hash="")}},{key:"toggle",value:function(){this.isActive?this.close():this.open()}},{key:"destroy",value:function(){this.options.overlay&&(this.$element.appendTo(t("body")),this.$overlay.hide().off().remove()),this.$element.hide().off(),this.$anchor.off(".zf"),t(window).off(".zf.reveal:"+this.id),Foundation.unregisterPlugin(this)}}]),n}();n.defaults={animationIn:"",animationOut:"",showDelay:0,hideDelay:0,closeOnClick:!0,closeOnEsc:!0,multipleOpened:!1,vOffset:"auto",hOffset:"auto",fullScreen:!1,btmOffsetPct:10,overlay:!0,resetOnClose:!1,deepLink:!1},Foundation.plugin(n,"Reveal")}(jQuery);var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();!function(t){function e(t,e){return t/e}function n(t,e,n,i){return Math.abs(t.position()[e]+t[i]()/2-n)}var i=function(){function i(e,n){_classCallCheck(this,i),this.$element=e,this.options=t.extend({},i.defaults,this.$element.data(),n),this._init(),Foundation.registerPlugin(this,"Slider"),Foundation.Keyboard.register("Slider",{ltr:{ARROW_RIGHT:"increase",ARROW_UP:"increase",ARROW_DOWN:"decrease",ARROW_LEFT:"decrease",SHIFT_ARROW_RIGHT:"increase_fast",SHIFT_ARROW_UP:"increase_fast",SHIFT_ARROW_DOWN:"decrease_fast",SHIFT_ARROW_LEFT:"decrease_fast"},rtl:{ARROW_LEFT:"increase",ARROW_RIGHT:"decrease",SHIFT_ARROW_LEFT:"increase_fast",SHIFT_ARROW_RIGHT:"decrease_fast"}})}return _createClass(i,[{key:"_init",value:function(){this.inputs=this.$element.find("input"),this.handles=this.$element.find("[data-slider-handle]"),this.$handle=this.handles.eq(0),this.$input=this.inputs.length?this.inputs.eq(0):t("#"+this.$handle.attr("aria-controls")),this.$fill=this.$element.find("[data-slider-fill]").css(this.options.vertical?"height":"width",0);var e=!1,n=this;(this.options.disabled||this.$element.hasClass(this.options.disabledClass))&&(this.options.disabled=!0,this.$element.addClass(this.options.disabledClass)),this.inputs.length||(this.inputs=t().add(this.$input),this.options.binding=!0),this._setInitAttr(0),this._events(this.$handle),this.handles[1]&&(this.options.doubleSided=!0,this.$handle2=this.handles.eq(1),this.$input2=this.inputs.length>1?this.inputs.eq(1):t("#"+this.$handle2.attr("aria-controls")),this.inputs[1]||(this.inputs=this.inputs.add(this.$input2)),e=!0,this._setHandlePos(this.$handle,this.options.initialStart,!0,function(){n._setHandlePos(n.$handle2,n.options.initialEnd,!0)}),this._setInitAttr(1),this._events(this.$handle2)),e||this._setHandlePos(this.$handle,this.options.initialStart,!0)}},{key:"_setHandlePos",value:function(t,n,i,r){n=parseFloat(n),n<this.options.start?n=this.options.start:n>this.options.end&&(n=this.options.end);var o=this.options.doubleSided;if(o)if(0===this.handles.index(t)){var a=parseFloat(this.$handle2.attr("aria-valuenow"));n=n>=a?a-this.options.step:n}else{var s=parseFloat(this.$handle.attr("aria-valuenow"));n=s>=n?s+this.options.step:n}this.options.vertical&&!i&&(n=this.options.end-n);var u=this,l=this.options.vertical,c=l?"height":"width",h=l?"top":"left",f=t[0].getBoundingClientRect()[c],d=this.$element[0].getBoundingClientRect()[c],p=e(n-this.options.start,this.options.end-this.options.start).toFixed(2),v=(d-f)*p,g=(100*e(v,d)).toFixed(this.options.decimal);n=parseFloat(n.toFixed(this.options.decimal));var m={};if(this._setValues(t,n),o){var _,y=0===this.handles.index(t),b=~~(100*e(f,d));if(y)m[h]=g+"%",_=parseFloat(this.$handle2[0].style[h])-g+b,r&&"function"==typeof r&&r();else{var w=parseFloat(this.$handle[0].style[h]);_=g-(isNaN(w)?this.options.initialStart/((this.options.end-this.options.start)/100):w)+b}m["min-"+c]=_+"%"}this.$element.one("finished.zf.animate",function(){u.$element.trigger("moved.zf.slider",[t])});var x=this.$element.data("dragging")?1e3/60:this.options.moveTime;Foundation.Move(x,t,function(){t.css(h,g+"%"),u.options.doubleSided?u.$fill.css(m):u.$fill.css(c,100*p+"%")}),clearTimeout(u.timeout),u.timeout=setTimeout(function(){u.$element.trigger("changed.zf.slider",[t])},u.options.changedDelay)}},{key:"_setInitAttr",value:function(t){var e=this.inputs.eq(t).attr("id")||Foundation.GetYoDigits(6,"slider");this.inputs.eq(t).attr({id:e,max:this.options.end,min:this.options.start,step:this.options.step}),this.handles.eq(t).attr({role:"slider","aria-controls":e,"aria-valuemax":this.options.end,"aria-valuemin":this.options.start,"aria-valuenow":0===t?this.options.initialStart:this.options.initialEnd,"aria-orientation":this.options.vertical?"vertical":"horizontal",tabindex:0})}},{key:"_setValues",value:function(t,e){var n=this.options.doubleSided?this.handles.index(t):0;this.inputs.eq(n).val(e),t.attr("aria-valuenow",e)}},{key:"_handleEvent",value:function(t,i,r){var o,a;if(r)o=this._adjustValue(null,r),a=!0;else{t.preventDefault();var s=this,u=this.options.vertical,l=u?"height":"width",c=u?"top":"left",h=u?t.pageY:t.pageX,f=this.$handle[0].getBoundingClientRect()[l]/2,d=this.$element[0].getBoundingClientRect()[l],p=this.$element.offset()[c]-h,v=p>0?-f:-d>p-f?d:Math.abs(p),g=e(v,d);if(o=(this.options.end-this.options.start)*g+this.options.start,Foundation.rtl()&&!this.options.vertical&&(o=this.options.end-o),o=s._adjustValue(null,o),a=!1,!i){var m=n(this.$handle,c,v,l),_=n(this.$handle2,c,v,l);i=_>=m?this.$handle:this.$handle2}}this._setHandlePos(i,o,a)}},{key:"_adjustValue",value:function(t,e){var n,i,r,o,a=this.options.step,s=parseFloat(a/2);return n=t?parseFloat(t.attr("aria-valuenow")):e,i=n%a,r=n-i,o=r+a,0===i?n:n=n>=r+s?o:r}},{key:"_events",value:function(e){if(this.options.disabled)return!1;var n,i=this;if(this.inputs.off("change.zf.slider").on("change.zf.slider",function(e){var n=i.inputs.index(t(this));i._handleEvent(e,i.handles.eq(n),t(this).val())}),this.options.clickSelect&&this.$element.off("click.zf.slider").on("click.zf.slider",function(e){return i.$element.data("dragging")?!1:void(t(e.target).is("[data-slider-handle]")||(i.options.doubleSided?i._handleEvent(e):i._handleEvent(e,i.$handle)))}),this.options.draggable){this.handles.addTouch();var r=t("body");e.off("mousedown.zf.slider").on("mousedown.zf.slider",function(o){e.addClass("is-dragging"),i.$fill.addClass("is-dragging"),i.$element.data("dragging",!0),n=t(o.currentTarget),r.on("mousemove.zf.slider",function(t){t.preventDefault(),i._handleEvent(t,n)}).on("mouseup.zf.slider",function(t){i._handleEvent(t,n),e.removeClass("is-dragging"),i.$fill.removeClass("is-dragging"),i.$element.data("dragging",!1),r.off("mousemove.zf.slider mouseup.zf.slider")})})}e.off("keydown.zf.slider").on("keydown.zf.slider",function(e){var n,r=t(this),o=i.options.doubleSided?i.handles.index(r):0,a=parseFloat(i.inputs.eq(o).val());Foundation.Keyboard.handleKey(e,"Slider",{decrease:function(){n=a-i.options.step},increase:function(){n=a+i.options.step},decrease_fast:function(){n=a-10*i.options.step},increase_fast:function(){n=a+10*i.options.step},handled:function(){e.preventDefault(),i._setHandlePos(r,n,!0)}})})}},{key:"destroy",value:function(){this.handles.off(".zf.slider"),this.inputs.off(".zf.slider"),this.$element.off(".zf.slider"),Foundation.unregisterPlugin(this)}}]),i}();i.defaults={start:0,end:100,step:1,initialStart:0,initialEnd:100,binding:!1,clickSelect:!0,vertical:!1,draggable:!0,disabled:!1,doubleSided:!1,decimal:2,moveTime:200,disabledClass:"disabled",invertVertical:!1,changedDelay:500},Foundation.plugin(i,"Slider")}(jQuery);var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();!function(t){function e(t){return parseInt(window.getComputedStyle(document.body,null).fontSize,10)*t}var n=function(){function n(e,i){_classCallCheck(this,n),this.$element=e,this.options=t.extend({},n.defaults,this.$element.data(),i),this._init(),Foundation.registerPlugin(this,"Sticky")}return _createClass(n,[{key:"_init",value:function(){var e=this.$element.parent("[data-sticky-container]"),n=this.$element[0].id||Foundation.GetYoDigits(6,"sticky"),i=this;e.length||(this.wasWrapped=!0),this.$container=e.length?e:t(this.options.container).wrapInner(this.$element),this.$container.addClass(this.options.containerClass),this.$element.addClass(this.options.stickyClass).attr({"data-resize":n}),this.scrollCount=this.options.checkEvery,this.isStuck=!1,
t(window).one("load.zf.sticky",function(){""!==i.options.anchor?i.$anchor=t("#"+i.options.anchor):i._parsePoints(),i._setSizes(function(){i._calc(!1)}),i._events(n.split("-").reverse().join("-"))})}},{key:"_parsePoints",value:function(){var e=this.options.topAnchor,n=this.options.btmAnchor,i=[e,n],r={};if(e&&n)for(var o=0,a=i.length;a>o&&i[o];o++){var s;if("number"==typeof i[o])s=i[o];else{var u=i[o].split(":"),l=t("#"+u[0]);s=l.offset().top,u[1]&&"bottom"===u[1].toLowerCase()&&(s+=l[0].getBoundingClientRect().height)}r[o]=s}else r={0:1,1:document.documentElement.scrollHeight};this.points=r}},{key:"_events",value:function(e){var n=this,i=this.scrollListener="scroll.zf."+e;this.isOn||(this.canStick&&(this.isOn=!0,t(window).off(i).on(i,function(){0===n.scrollCount?(n.scrollCount=n.options.checkEvery,n._setSizes(function(){n._calc(!1,window.pageYOffset)})):(n.scrollCount--,n._calc(!1,window.pageYOffset))})),this.$element.off("resizeme.zf.trigger").on("resizeme.zf.trigger",function(){n._setSizes(function(){n._calc(!1),n.canStick?n.isOn||n._events(e):n.isOn&&n._pauseListeners(i)})}))}},{key:"_pauseListeners",value:function(e){this.isOn=!1,t(window).off(e),this.$element.trigger("pause.zf.sticky")}},{key:"_calc",value:function(t,e){return t&&this._setSizes(),this.canStick?(e||(e=window.pageYOffset),void(e>=this.topPoint?e<=this.bottomPoint?this.isStuck||this._setSticky():this.isStuck&&this._removeSticky(!1):this.isStuck&&this._removeSticky(!0))):(this.isStuck&&this._removeSticky(!0),!1)}},{key:"_setSticky",value:function(){var t=this.options.stickTo,e="top"===t?"marginTop":"marginBottom",n="top"===t?"bottom":"top",i={};i[e]=this.options[e]+"em",i[t]=0,i[n]="auto",i.left=this.$container.offset().left+parseInt(window.getComputedStyle(this.$container[0])["padding-left"],10),this.isStuck=!0,this.$element.removeClass("is-anchored is-at-"+n).addClass("is-stuck is-at-"+t).css(i).trigger("sticky.zf.stuckto:"+t)}},{key:"_removeSticky",value:function(t){var e=this.options.stickTo,n="top"===e,i={},r=(this.points?this.points[1]-this.points[0]:this.anchorHeight)-this.elemHeight,o=n?"marginTop":"marginBottom",a=n?"bottom":"top",s=t?"top":"bottom";i[o]=0,t&&!n||n&&!t?(i[e]=r,i[a]=0):(i[e]=0,i[a]=r),i.left="",this.isStuck=!1,this.$element.removeClass("is-stuck is-at-"+e).addClass("is-anchored is-at-"+s).css(i).trigger("sticky.zf.unstuckfrom:"+s)}},{key:"_setSizes",value:function(t){this.canStick=Foundation.MediaQuery.atLeast(this.options.stickyOn),this.canStick||t();var e=this.$container[0].getBoundingClientRect().width,n=window.getComputedStyle(this.$container[0]),i=parseInt(n["padding-right"],10);this.$anchor&&this.$anchor.length?this.anchorHeight=this.$anchor[0].getBoundingClientRect().height:this._parsePoints(),this.$element.css({"max-width":e-i+"px"});var r=this.$element[0].getBoundingClientRect().height||this.containerHeight;this.containerHeight=r,this.$container.css({height:r}),this.elemHeight=r,this.isStuck&&this.$element.css({left:this.$container.offset().left+parseInt(n["padding-left"],10)}),this._setBreakPoints(r,function(){t&&t()})}},{key:"_setBreakPoints",value:function(t,n){if(!this.canStick){if(!n)return!1;n()}var i=e(this.options.marginTop),r=e(this.options.marginBottom),o=this.points?this.points[0]:this.$anchor.offset().top,a=this.points?this.points[1]:o+this.anchorHeight,s=window.innerHeight;"top"===this.options.stickTo?(o-=i,a-=t+i):"bottom"===this.options.stickTo&&(o-=s-(t+r),a-=s-r),this.topPoint=o,this.bottomPoint=a,n&&n()}},{key:"destroy",value:function(){this._removeSticky(!0),this.$element.removeClass(this.options.stickyClass+" is-anchored is-at-top").css({height:"",top:"",bottom:"","max-width":""}).off("resizeme.zf.trigger"),this.$anchor.off("change.zf.sticky"),t(window).off(this.scrollListener),this.wasWrapped?this.$element.unwrap():this.$container.removeClass(this.options.containerClass).css({height:""}),Foundation.unregisterPlugin(this)}}]),n}();n.defaults={container:"<div data-sticky-container></div>",stickTo:"top",anchor:"",topAnchor:"",btmAnchor:"",marginTop:1,marginBottom:1,stickyOn:"medium",stickyClass:"sticky",containerClass:"sticky-container",checkEvery:-1},Foundation.plugin(n,"Sticky")}(jQuery);var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();!function(t){var e=function(){function e(n,i){_classCallCheck(this,e),this.$element=n,this.options=t.extend({},e.defaults,this.$element.data(),i),this._init(),Foundation.registerPlugin(this,"Tabs"),Foundation.Keyboard.register("Tabs",{ENTER:"open",SPACE:"open",ARROW_RIGHT:"next",ARROW_UP:"previous",ARROW_DOWN:"next",ARROW_LEFT:"previous"})}return _createClass(e,[{key:"_init",value:function(){var e=this;if(this.$tabTitles=this.$element.find("."+this.options.linkClass),this.$tabContent=t('[data-tabs-content="'+this.$element[0].id+'"]'),this.$tabTitles.each(function(){var n=t(this),i=n.find("a"),r=n.hasClass("is-active"),o=i[0].hash.slice(1),a=i[0].id?i[0].id:o+"-label",s=t("#"+o);n.attr({role:"presentation"}),i.attr({role:"tab","aria-controls":o,"aria-selected":r,id:a}),s.attr({role:"tabpanel","aria-hidden":!r,"aria-labelledby":a}),r&&e.options.autoFocus&&i.focus()}),this.options.matchHeight){var n=this.$tabContent.find("img");n.length?Foundation.onImagesLoaded(n,this._setHeight.bind(this)):this._setHeight()}this._events()}},{key:"_events",value:function(){this._addKeyHandler(),this._addClickHandler(),this.options.matchHeight&&t(window).on("changed.zf.mediaquery",this._setHeight.bind(this))}},{key:"_addClickHandler",value:function(){var e=this;this.$element.off("click.zf.tabs").on("click.zf.tabs","."+this.options.linkClass,function(n){n.preventDefault(),n.stopPropagation(),t(this).hasClass("is-active")||e._handleTabChange(t(this))})}},{key:"_addKeyHandler",value:function(){var e=this;e.$element.find("li:first-of-type"),e.$element.find("li:last-of-type"),this.$tabTitles.off("keydown.zf.tabs").on("keydown.zf.tabs",function(n){if(9!==n.which){n.stopPropagation(),n.preventDefault();var i,r,o=t(this),a=o.parent("ul").children("li");a.each(function(n){return t(this).is(o)?void(e.options.wrapOnKeys?(i=0===n?a.last():a.eq(n-1),r=n===a.length-1?a.first():a.eq(n+1)):(i=a.eq(Math.max(0,n-1)),r=a.eq(Math.min(n+1,a.length-1)))):void 0}),Foundation.Keyboard.handleKey(n,"Tabs",{open:function(){o.find('[role="tab"]').focus(),e._handleTabChange(o)},previous:function(){i.find('[role="tab"]').focus(),e._handleTabChange(i)},next:function(){r.find('[role="tab"]').focus(),e._handleTabChange(r)}})}})}},{key:"_handleTabChange",value:function(e){var n=e.find('[role="tab"]'),i=n[0].hash,r=this.$tabContent.find(i),o=this.$element.find("."+this.options.linkClass+".is-active").removeClass("is-active").find('[role="tab"]').attr({"aria-selected":"false"});t("#"+o.attr("aria-controls")).removeClass("is-active").attr({"aria-hidden":"true"}),e.addClass("is-active"),n.attr({"aria-selected":"true"}),r.addClass("is-active").attr({"aria-hidden":"false"}),this.$element.trigger("change.zf.tabs",[e])}},{key:"selectTab",value:function(t){var e;e="object"==typeof t?t[0].id:t,e.indexOf("#")<0&&(e="#"+e);var n=this.$tabTitles.find('[href="'+e+'"]').parent("."+this.options.linkClass);this._handleTabChange(n)}},{key:"_setHeight",value:function(){var e=0;this.$tabContent.find("."+this.options.panelClass).css("height","").each(function(){var n=t(this),i=n.hasClass("is-active");i||n.css({visibility:"hidden",display:"block"});var r=this.getBoundingClientRect().height;i||n.css({visibility:"",display:""}),e=r>e?r:e}).css("height",e+"px")}},{key:"destroy",value:function(){this.$element.find("."+this.options.linkClass).off(".zf.tabs").hide().end().find("."+this.options.panelClass).hide(),this.options.matchHeight&&t(window).off("changed.zf.mediaquery"),Foundation.unregisterPlugin(this)}}]),e}();e.defaults={autoFocus:!1,wrapOnKeys:!0,matchHeight:!1,linkClass:"tabs-title",panelClass:"tabs-panel"},Foundation.plugin(e,"Tabs")}(jQuery);var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();!function(t){var e=function(){function e(n,i){_classCallCheck(this,e),this.$element=n,this.options=t.extend({},e.defaults,n.data(),i),this.className="",this._init(),this._events(),Foundation.registerPlugin(this,"Toggler")}return _createClass(e,[{key:"_init",value:function(){var e;this.options.animate?(e=this.options.animate.split(" "),this.animationIn=e[0],this.animationOut=e[1]||null):(e=this.$element.data("toggler"),this.className="."===e[0]?e.slice(1):e);var n=this.$element[0].id;t('[data-open="'+n+'"], [data-close="'+n+'"], [data-toggle="'+n+'"]').attr("aria-controls",n),this.$element.attr("aria-expanded",!this.$element.is(":hidden"))}},{key:"_events",value:function(){this.$element.off("toggle.zf.trigger").on("toggle.zf.trigger",this.toggle.bind(this))}},{key:"toggle",value:function(){this[this.options.animate?"_toggleAnimate":"_toggleClass"]()}},{key:"_toggleClass",value:function(){this.$element.toggleClass(this.className);var t=this.$element.hasClass(this.className);t?this.$element.trigger("on.zf.toggler"):this.$element.trigger("off.zf.toggler"),this._updateARIA(t)}},{key:"_toggleAnimate",value:function(){var t=this;this.$element.is(":hidden")?Foundation.Motion.animateIn(this.$element,this.animationIn,function(){t._updateARIA(!0),this.trigger("on.zf.toggler")}):Foundation.Motion.animateOut(this.$element,this.animationOut,function(){t._updateARIA(!1),this.trigger("off.zf.toggler")})}},{key:"_updateARIA",value:function(t){this.$element.attr("aria-expanded",!!t)}},{key:"destroy",value:function(){this.$element.off(".zf.toggler"),Foundation.unregisterPlugin(this)}}]),e}();e.defaults={animate:!1},Foundation.plugin(e,"Toggler")}(jQuery);var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();!function(t){var e=function(){function e(n,i){_classCallCheck(this,e),this.$element=n,this.options=t.extend({},e.defaults,this.$element.data(),i),this.isActive=!1,this.isClick=!1,this._init(),Foundation.registerPlugin(this,"Tooltip")}return _createClass(e,[{key:"_init",value:function(){var e=this.$element.attr("aria-describedby")||Foundation.GetYoDigits(6,"tooltip");this.options.positionClass=this._getPositionClass(this.$element),this.options.tipText=this.options.tipText||this.$element.attr("title"),this.template=this.options.template?t(this.options.template):this._buildTemplate(e),this.template.appendTo(document.body).text(this.options.tipText).hide(),this.$element.attr({title:"","aria-describedby":e,"data-yeti-box":e,"data-toggle":e,"data-resize":e}).addClass(this.triggerClass),this.usedPositions=[],this.counter=4,this.classChanged=!1,this._events()}},{key:"_getPositionClass",value:function(t){if(!t)return"";var e=t[0].className.match(/\b(top|left|right)\b/g);return e=e?e[0]:""}},{key:"_buildTemplate",value:function(e){var n=(this.options.tooltipClass+" "+this.options.positionClass+" "+this.options.templateClasses).trim(),i=t("<div></div>").addClass(n).attr({role:"tooltip","aria-hidden":!0,"data-is-active":!1,"data-is-focus":!1,id:e});return i}},{key:"_reposition",value:function(t){this.usedPositions.push(t?t:"bottom"),!t&&this.usedPositions.indexOf("top")<0?this.template.addClass("top"):"top"===t&&this.usedPositions.indexOf("bottom")<0?this.template.removeClass(t):"left"===t&&this.usedPositions.indexOf("right")<0?this.template.removeClass(t).addClass("right"):"right"===t&&this.usedPositions.indexOf("left")<0?this.template.removeClass(t).addClass("left"):!t&&this.usedPositions.indexOf("top")>-1&&this.usedPositions.indexOf("left")<0?this.template.addClass("left"):"top"===t&&this.usedPositions.indexOf("bottom")>-1&&this.usedPositions.indexOf("left")<0?this.template.removeClass(t).addClass("left"):"left"===t&&this.usedPositions.indexOf("right")>-1&&this.usedPositions.indexOf("bottom")<0?this.template.removeClass(t):"right"===t&&this.usedPositions.indexOf("left")>-1&&this.usedPositions.indexOf("bottom")<0?this.template.removeClass(t):this.template.removeClass(t),this.classChanged=!0,this.counter--}},{key:"_setPosition",value:function(){var t=this._getPositionClass(this.template),e=Foundation.Box.GetDimensions(this.template),n=Foundation.Box.GetDimensions(this.$element),i="left"===t?"left":"right"===t?"left":"top",r="top"===i?"height":"width";if("height"===r?this.options.vOffset:this.options.hOffset,e.width>=e.windowDims.width||!this.counter&&!Foundation.Box.ImNotTouchingYou(this.template))return this.template.offset(Foundation.Box.GetOffsets(this.template,this.$element,"center bottom",this.options.vOffset,this.options.hOffset,!0)).css({width:n.windowDims.width-2*this.options.hOffset,height:"auto"}),!1;for(this.template.offset(Foundation.Box.GetOffsets(this.template,this.$element,"center "+(t||"bottom"),this.options.vOffset,this.options.hOffset));!Foundation.Box.ImNotTouchingYou(this.template)&&this.counter;)this._reposition(t),this._setPosition()}},{key:"show",value:function(){if("all"!==this.options.showOn&&!Foundation.MediaQuery.atLeast(this.options.showOn))return!1;var t=this;this.template.css("visibility","hidden").show(),this._setPosition(),this.$element.trigger("closeme.zf.tooltip",this.template.attr("id")),this.template.attr({"data-is-active":!0,"aria-hidden":!1}),t.isActive=!0,this.template.stop().hide().css("visibility","").fadeIn(this.options.fadeInDuration,function(){}),this.$element.trigger("show.zf.tooltip")}},{key:"hide",value:function(){var t=this;this.template.stop().attr({"aria-hidden":!0,"data-is-active":!1}).fadeOut(this.options.fadeOutDuration,function(){t.isActive=!1,t.isClick=!1,t.classChanged&&(t.template.removeClass(t._getPositionClass(t.template)).addClass(t.options.positionClass),t.usedPositions=[],t.counter=4,t.classChanged=!1)}),this.$element.trigger("hide.zf.tooltip")}},{key:"_events",value:function(){var t=this,e=(this.template,!1);this.options.disableHover||this.$element.on("mouseenter.zf.tooltip",function(){t.isActive||(t.timeout=setTimeout(function(){t.show()},t.options.hoverDelay))}).on("mouseleave.zf.tooltip",function(){clearTimeout(t.timeout),(!e||!t.isClick&&t.options.clickOpen)&&t.hide()}),this.options.clickOpen&&this.$element.on("mousedown.zf.tooltip",function(e){e.stopImmediatePropagation(),t.isClick?t.hide():(t.isClick=!0,!t.options.disableHover&&t.$element.attr("tabindex")||t.isActive||t.show())}),this.options.disableForTouch||this.$element.on("tap.zf.tooltip touchend.zf.tooltip",function(){t.isActive?t.hide():t.show()}),this.$element.on({"close.zf.trigger":this.hide.bind(this)}),this.$element.on("focus.zf.tooltip",function(){return e=!0,t.isClick?!1:void t.show()}).on("focusout.zf.tooltip",function(){e=!1,t.isClick=!1,t.hide()}).on("resizeme.zf.trigger",function(){t.isActive&&t._setPosition()})}},{key:"toggle",value:function(){this.isActive?this.hide():this.show()}},{key:"destroy",value:function(){this.$element.attr("title",this.template.text()).off(".zf.trigger .zf.tootip").removeAttr("aria-describedby").removeAttr("data-yeti-box").removeAttr("data-toggle").removeAttr("data-resize"),this.template.remove(),Foundation.unregisterPlugin(this)}}]),e}();e.defaults={disableForTouch:!1,hoverDelay:200,fadeInDuration:150,fadeOutDuration:150,disableHover:!1,templateClasses:"",tooltipClass:"tooltip",triggerClass:"has-tip",showOn:"small",template:"",tipText:"",touchCloseText:"Tap to close.",clickOpen:!0,positionClass:"",vOffset:10,hOffset:12},Foundation.plugin(e,"Tooltip")}(jQuery),/**
 * PV - WebGL protein viewer v1.8.1
 * http://biasmv.github.io/pv
 * 
 * Copyright 2013-2015 Marco Biasini
 * Released under the MIT license
 */
!function(t,e){if("function"==typeof define&&define.amd)define([],e);else if("object"==typeof exports)exports=e(),"object"==typeof module&&(module.exports=exports);else{var n=e();t.pv=n,t.io=n.io,t.mol=n.mol,t.color=n.color,t.rgb=n.rgb,t.viewpoint=n.viewpoint,t.vec3=n.vec3,t.vec4=n.vec4,t.mat3=n.mat3,t.mat4=n.mat4,t.quat=n.quat}}(this,function(){var t,e,n,i,r,o,a,s,u,l,c,h,f,d,p,v,g,m,_,y,b,w,x,C,A,M,k,E,S,T,F,R,N,D,$,z,P,O,L,I,q,j,H,B,V,U,W;return t=function(){var t={};if(!e)var e=1e-6;if(!n)var n="undefined"!=typeof Float32Array?Float32Array:Array;if(!i)var i=Math.random;var r={};r.setMatrixArrayType=function(t){n=t},t.glMatrix=r;var o={};o.create=function(){var t=new n(3);return t[0]=0,t[1]=0,t[2]=0,t},o.clone=function(t){var e=new n(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},o.fromValues=function(t,e,i){var r=new n(3);return r[0]=t,r[1]=e,r[2]=i,r},o.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},o.set=function(t,e,n,i){return t[0]=e,t[1]=n,t[2]=i,t},o.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},o.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t},o.sub=o.subtract,o.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t},o.mul=o.multiply,o.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t},o.div=o.divide,o.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t},o.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t},o.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},o.scaleAndAdd=function(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t},o.distance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2];return Math.sqrt(n*n+i*i+r*r)},o.dist=o.distance,o.squaredDistance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2];return n*n+i*i+r*r},o.sqrDist=o.squaredDistance,o.length=function(t){var e=t[0],n=t[1],i=t[2];return Math.sqrt(e*e+n*n+i*i)},o.len=o.length,o.squaredLength=function(t){var e=t[0],n=t[1],i=t[2];return e*e+n*n+i*i},o.sqrLen=o.squaredLength,o.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},o.normalize=function(t,e){var n=e[0],i=e[1],r=e[2],o=n*n+i*i+r*r;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t},o.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},o.cross=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=n[0],s=n[1],u=n[2];return t[0]=r*u-o*s,t[1]=o*a-i*u,t[2]=i*s-r*a,t},o.lerp=function(t,e,n,i){var r=e[0],o=e[1],a=e[2];return t[0]=r+i*(n[0]-r),t[1]=o+i*(n[1]-o),t[2]=a+i*(n[2]-a),t},o.random=function(t,e){e=e||1;var n=2*i()*Math.PI,r=2*i()-1,o=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*o,t[1]=Math.sin(n)*o,t[2]=r*e,t},o.transformMat4=function(t,e,n){var i=e[0],r=e[1],o=e[2];return t[0]=n[0]*i+n[4]*r+n[8]*o+n[12],t[1]=n[1]*i+n[5]*r+n[9]*o+n[13],t[2]=n[2]*i+n[6]*r+n[10]*o+n[14],t},o.transformMat3=function(t,e,n){var i=e[0],r=e[1],o=e[2];return t[0]=i*n[0]+r*n[3]+o*n[6],t[1]=i*n[1]+r*n[4]+o*n[7],t[2]=i*n[2]+r*n[5]+o*n[8],t},o.transformQuat=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=n[0],s=n[1],u=n[2],l=n[3],c=l*i+s*o-u*r,h=l*r+u*i-a*o,f=l*o+a*r-s*i,d=-a*i-s*r-u*o;return t[0]=c*l+d*-a+h*-u-f*-s,t[1]=h*l+d*-s+f*-a-c*-u,t[2]=f*l+d*-u+c*-s-h*-a,t},o.forEach=function(){var t=o.create();return function(e,n,i,r,o,a){var s,u;for(n||(n=3),i||(i=0),u=r?Math.min(r*n+i,e.length):e.length,s=i;u>s;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],o(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2];return e}}(),o.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},t.vec3=o;var a={};a.create=function(){var t=new n(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},a.clone=function(t){var e=new n(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},a.fromValues=function(t,e,i,r){var o=new n(4);return o[0]=t,o[1]=e,o[2]=i,o[3]=r,o},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},a.set=function(t,e,n,i,r){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t},a.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},a.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t},a.sub=a.subtract,a.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t},a.mul=a.multiply,a.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t},a.div=a.divide,a.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t},a.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t},a.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},a.scaleAndAdd=function(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t},a.distance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(n*n+i*i+r*r+o*o)},a.dist=a.distance,a.squaredDistance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2],o=e[3]-t[3];return n*n+i*i+r*r+o*o},a.sqrDist=a.squaredDistance,a.length=function(t){var e=t[0],n=t[1],i=t[2],r=t[3];return Math.sqrt(e*e+n*n+i*i+r*r)},a.len=a.length,a.squaredLength=function(t){var e=t[0],n=t[1],i=t[2],r=t[3];return e*e+n*n+i*i+r*r},a.sqrLen=a.squaredLength,a.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},a.normalize=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=n*n+i*i+r*r+o*o;return a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t[3]=e[3]*a),t},a.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},a.lerp=function(t,e,n,i){var r=e[0],o=e[1],a=e[2],s=e[3];return t[0]=r+i*(n[0]-r),t[1]=o+i*(n[1]-o),t[2]=a+i*(n[2]-a),t[3]=s+i*(n[3]-s),t},a.random=function(t,e){return e=e||1,t[0]=i(),t[1]=i(),t[2]=i(),t[3]=i(),a.normalize(t,t),a.scale(t,t,e),t},a.transformMat4=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3];return t[0]=n[0]*i+n[4]*r+n[8]*o+n[12]*a,t[1]=n[1]*i+n[5]*r+n[9]*o+n[13]*a,t[2]=n[2]*i+n[6]*r+n[10]*o+n[14]*a,t[3]=n[3]*i+n[7]*r+n[11]*o+n[15]*a,t},a.transformQuat=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=n[0],s=n[1],u=n[2],l=n[3],c=l*i+s*o-u*r,h=l*r+u*i-a*o,f=l*o+a*r-s*i,d=-a*i-s*r-u*o;return t[0]=c*l+d*-a+h*-u-f*-s,t[1]=h*l+d*-s+f*-a-c*-u,t[2]=f*l+d*-u+c*-s-h*-a,t},a.forEach=function(){var t=a.create();return function(e,n,i,r,o,a){var s,u;for(n||(n=4),i||(i=0),u=r?Math.min(r*n+i,e.length):e.length,s=i;u>s;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],o(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}(),a.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},t.vec4=a;var s={};s.create=function(){var t=new n(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},s.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},s.clone=function(t){var e=new n(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},s.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},s.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},s.transpose=function(t,e){if(t===e){var n=e[1],i=e[2],r=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=i,t[7]=r}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},s.invert=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],h=c*a-s*l,f=-c*o+s*u,d=l*o-a*u,p=n*h+i*f+r*d;return p?(p=1/p,t[0]=h*p,t[1]=(-c*i+r*l)*p,t[2]=(s*i-r*a)*p,t[3]=f*p,t[4]=(c*n-r*u)*p,t[5]=(-s*n+r*o)*p,t[6]=d*p,t[7]=(-l*n+i*u)*p,t[8]=(a*n-i*o)*p,t):null},s.adjoint=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8];return t[0]=a*c-s*l,t[1]=r*l-i*c,t[2]=i*s-r*a,t[3]=s*u-o*c,t[4]=n*c-r*u,t[5]=r*o-n*s,t[6]=o*l-a*u,t[7]=i*u-n*l,t[8]=n*a-i*o,t},s.determinant=function(t){var e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],a=t[5],s=t[6],u=t[7],l=t[8];return e*(l*o-a*u)+n*(-l*r+a*s)+i*(u*r-o*s)},s.multiply=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],f=n[0],d=n[1],p=n[2],v=n[3],g=n[4],m=n[5],_=n[6],y=n[7],b=n[8];return t[0]=f*i+d*a+p*l,t[1]=f*r+d*s+p*c,t[2]=f*o+d*u+p*h,t[3]=v*i+g*a+m*l,t[4]=v*r+g*s+m*c,t[5]=v*o+g*u+m*h,t[6]=_*i+y*a+b*l,t[7]=_*r+y*s+b*c,t[8]=_*o+y*u+b*h,t},s.mul=s.multiply,s.translate=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],f=n[0],d=n[1];return t[0]=i,t[1]=r,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=f*i+d*a+l,t[7]=f*r+d*s+c,t[8]=f*o+d*u+h,t},s.rotate=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],f=Math.sin(n),d=Math.cos(n);return t[0]=d*i+f*a,t[1]=d*r+f*s,t[2]=d*o+f*u,t[3]=d*a-f*i,t[4]=d*s-f*r,t[5]=d*u-f*o,t[6]=l,t[7]=c,t[8]=h,t},s.fromQuat=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=n+n,s=i+i,u=r+r,l=n*a,c=n*s,h=n*u,f=i*s,d=i*u,p=r*u,v=o*a,g=o*s,m=o*u;return t[0]=1-(f+p),t[3]=c+m,t[6]=h-g,t[1]=c-m,t[4]=1-(l+p),t[7]=d+v,t[2]=h+g,t[5]=d-v,t[8]=1-(l+f),t},s.normalFromMat4=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],h=e[9],f=e[10],d=e[11],p=e[12],v=e[13],g=e[14],m=e[15],_=n*s-i*a,y=n*u-r*a,b=n*l-o*a,w=i*u-r*s,x=i*l-o*s,C=r*l-o*u,A=c*v-h*p,M=c*g-f*p,k=c*m-d*p,E=h*g-f*v,S=h*m-d*v,T=f*m-d*g,F=_*T-y*S+b*E+w*k-x*M+C*A;return F?(F=1/F,t[0]=(s*T-u*S+l*E)*F,t[1]=(u*k-a*T-l*M)*F,t[2]=(a*S-s*k+l*A)*F,t[3]=(r*S-i*T-o*E)*F,t[4]=(n*T-r*k+o*M)*F,t[5]=(i*k-n*S-o*A)*F,t[6]=(v*C-g*x+m*w)*F,t[7]=(g*b-p*C-m*y)*F,t[8]=(p*x-v*b+m*_)*F,t):null},s.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},t.mat3=s;var u={};u.create=function(){var t=new n(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},u.fromValues=function(t,e,i,r,o,a,s,u,l,c,h,f,d,p,v,g){var m=new n(16);return m[0]=t,m[1]=e,m[2]=i,m[3]=r,m[4]=o,m[5]=a,m[6]=s,m[7]=u,m[8]=l,m[9]=c,m[10]=h,m[11]=f,m[12]=d,m[13]=p,m[14]=v,m[15]=g,m},u.clone=function(t){var e=new n(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},u.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},u.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},u.transpose=function(t,e){if(t===e){var n=e[1],i=e[2],r=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=o,t[11]=e[14],t[12]=r,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},u.invert=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],h=e[9],f=e[10],d=e[11],p=e[12],v=e[13],g=e[14],m=e[15],_=n*s-i*a,y=n*u-r*a,b=n*l-o*a,w=i*u-r*s,x=i*l-o*s,C=r*l-o*u,A=c*v-h*p,M=c*g-f*p,k=c*m-d*p,E=h*g-f*v,S=h*m-d*v,T=f*m-d*g,F=_*T-y*S+b*E+w*k-x*M+C*A;return F?(F=1/F,t[0]=(s*T-u*S+l*E)*F,t[1]=(r*S-i*T-o*E)*F,t[2]=(v*C-g*x+m*w)*F,t[3]=(f*x-h*C-d*w)*F,t[4]=(u*k-a*T-l*M)*F,t[5]=(n*T-r*k+o*M)*F,t[6]=(g*b-p*C-m*y)*F,t[7]=(c*C-f*b+d*y)*F,t[8]=(a*S-s*k+l*A)*F,t[9]=(i*k-n*S-o*A)*F,t[10]=(p*x-v*b+m*_)*F,t[11]=(h*b-c*x-d*_)*F,t[12]=(s*M-a*E-u*A)*F,t[13]=(n*E-i*M+r*A)*F,t[14]=(v*y-p*w-g*_)*F,t[15]=(c*w-h*y+f*_)*F,t):null},u.adjoint=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],h=e[9],f=e[10],d=e[11],p=e[12],v=e[13],g=e[14],m=e[15];return t[0]=s*(f*m-d*g)-h*(u*m-l*g)+v*(u*d-l*f),t[1]=-(i*(f*m-d*g)-h*(r*m-o*g)+v*(r*d-o*f)),t[2]=i*(u*m-l*g)-s*(r*m-o*g)+v*(r*l-o*u),t[3]=-(i*(u*d-l*f)-s*(r*d-o*f)+h*(r*l-o*u)),t[4]=-(a*(f*m-d*g)-c*(u*m-l*g)+p*(u*d-l*f)),t[5]=n*(f*m-d*g)-c*(r*m-o*g)+p*(r*d-o*f),t[6]=-(n*(u*m-l*g)-a*(r*m-o*g)+p*(r*l-o*u)),t[7]=n*(u*d-l*f)-a*(r*d-o*f)+c*(r*l-o*u),t[8]=a*(h*m-d*v)-c*(s*m-l*v)+p*(s*d-l*h),t[9]=-(n*(h*m-d*v)-c*(i*m-o*v)+p*(i*d-o*h)),t[10]=n*(s*m-l*v)-a*(i*m-o*v)+p*(i*l-o*s),t[11]=-(n*(s*d-l*h)-a*(i*d-o*h)+c*(i*l-o*s)),t[12]=-(a*(h*g-f*v)-c*(s*g-u*v)+p*(s*f-u*h)),t[13]=n*(h*g-f*v)-c*(i*g-r*v)+p*(i*f-r*h),t[14]=-(n*(s*g-u*v)-a*(i*g-r*v)+p*(i*u-r*s)),t[15]=n*(s*f-u*h)-a*(i*f-r*h)+c*(i*u-r*s),t},u.determinant=function(t){var e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],a=t[5],s=t[6],u=t[7],l=t[8],c=t[9],h=t[10],f=t[11],d=t[12],p=t[13],v=t[14],g=t[15],m=e*a-n*o,_=e*s-i*o,y=e*u-r*o,b=n*s-i*a,w=n*u-r*a,x=i*u-r*s,C=l*p-c*d,A=l*v-h*d,M=l*g-f*d,k=c*v-h*p,E=c*g-f*p,S=h*g-f*v;return m*S-_*E+y*k+b*M-w*A+x*C},u.multiply=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],f=e[9],d=e[10],p=e[11],v=e[12],g=e[13],m=e[14],_=e[15],y=n[0],b=n[1],w=n[2],x=n[3];return t[0]=y*i+b*s+w*h+x*v,t[1]=y*r+b*u+w*f+x*g,t[2]=y*o+b*l+w*d+x*m,t[3]=y*a+b*c+w*p+x*_,y=n[4],b=n[5],w=n[6],x=n[7],t[4]=y*i+b*s+w*h+x*v,t[5]=y*r+b*u+w*f+x*g,t[6]=y*o+b*l+w*d+x*m,t[7]=y*a+b*c+w*p+x*_,y=n[8],b=n[9],w=n[10],x=n[11],t[8]=y*i+b*s+w*h+x*v,t[9]=y*r+b*u+w*f+x*g,t[10]=y*o+b*l+w*d+x*m,t[11]=y*a+b*c+w*p+x*_,y=n[12],b=n[13],w=n[14],x=n[15],t[12]=y*i+b*s+w*h+x*v,t[13]=y*r+b*u+w*f+x*g,t[14]=y*o+b*l+w*d+x*m,t[15]=y*a+b*c+w*p+x*_,t},u.fromMat3=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=0,t[4]=e[3],t[5]=e[4],t[6]=e[5],t[7]=0,t[8]=e[6],t[9]=e[7],t[10]=e[8],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},u.mul=u.multiply,u.translate=function(t,e,n){var i,r,o,a,s,u,l,c,h,f,d,p,v=n[0],g=n[1],m=n[2];return e===t?(t[12]=e[0]*v+e[4]*g+e[8]*m+e[12],t[13]=e[1]*v+e[5]*g+e[9]*m+e[13],t[14]=e[2]*v+e[6]*g+e[10]*m+e[14],t[15]=e[3]*v+e[7]*g+e[11]*m+e[15]):(i=e[0],r=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],f=e[9],d=e[10],p=e[11],t[0]=i,t[1]=r,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=l,t[7]=c,t[8]=h,t[9]=f,t[10]=d,t[11]=p,t[12]=i*v+s*g+h*m+e[12],t[13]=r*v+u*g+f*m+e[13],t[14]=o*v+l*g+d*m+e[14],t[15]=a*v+c*g+p*m+e[15]),t},u.scale=function(t,e,n){var i=n[0],r=n[1],o=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},u.rotate=function(t,n,i,r){var o,a,s,u,l,c,h,f,d,p,v,g,m,_,y,b,w,x,C,A,M,k,E,S,T=r[0],F=r[1],R=r[2],N=Math.sqrt(T*T+F*F+R*R);return Math.abs(N)<e?null:(N=1/N,T*=N,F*=N,R*=N,o=Math.sin(i),a=Math.cos(i),s=1-a,u=n[0],l=n[1],c=n[2],h=n[3],f=n[4],d=n[5],p=n[6],v=n[7],g=n[8],m=n[9],_=n[10],y=n[11],b=T*T*s+a,w=F*T*s+R*o,x=R*T*s-F*o,C=T*F*s-R*o,A=F*F*s+a,M=R*F*s+T*o,k=T*R*s+F*o,E=F*R*s-T*o,S=R*R*s+a,t[0]=u*b+f*w+g*x,t[1]=l*b+d*w+m*x,t[2]=c*b+p*w+_*x,t[3]=h*b+v*w+y*x,t[4]=u*C+f*A+g*M,t[5]=l*C+d*A+m*M,t[6]=c*C+p*A+_*M,t[7]=h*C+v*A+y*M,t[8]=u*k+f*E+g*S,t[9]=l*k+d*E+m*S,t[10]=c*k+p*E+_*S,t[11]=h*k+v*E+y*S,n!==t&&(t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t)},u.rotateX=function(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],l=e[8],c=e[9],h=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*r+l*i,t[5]=a*r+c*i,t[6]=s*r+h*i,t[7]=u*r+f*i,t[8]=l*r-o*i,t[9]=c*r-a*i,t[10]=h*r-s*i,t[11]=f*r-u*i,t},u.rotateY=function(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],l=e[8],c=e[9],h=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r-l*i,t[1]=a*r-c*i,t[2]=s*r-h*i,t[3]=u*r-f*i,t[8]=o*i+l*r,t[9]=a*i+c*r,t[10]=s*i+h*r,t[11]=u*i+f*r,t},u.rotateZ=function(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],l=e[4],c=e[5],h=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r+l*i,t[1]=a*r+c*i,t[2]=s*r+h*i,t[3]=u*r+f*i,t[4]=l*r-o*i,t[5]=c*r-a*i,t[6]=h*r-s*i,t[7]=f*r-u*i,t},u.fromRotationTranslation=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=i+i,u=r+r,l=o+o,c=i*s,h=i*u,f=i*l,d=r*u,p=r*l,v=o*l,g=a*s,m=a*u,_=a*l;return t[0]=1-(d+v),t[1]=h+_,t[2]=f-m,t[3]=0,t[4]=h-_,t[5]=1-(c+v),t[6]=p+g,t[7]=0,t[8]=f+m,t[9]=p-g,t[10]=1-(c+d),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},u.fromQuat=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=n+n,s=i+i,u=r+r,l=n*a,c=n*s,h=n*u,f=i*s,d=i*u,p=r*u,v=o*a,g=o*s,m=o*u;return t[0]=1-(f+p),t[1]=c+m,t[2]=h-g,t[3]=0,t[4]=c-m,t[5]=1-(l+p),t[6]=d+v,t[7]=0,t[8]=h+g,t[9]=d-v,t[10]=1-(l+f),t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},u.frustum=function(t,e,n,i,r,o,a){var s=1/(n-e),u=1/(r-i),l=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(r+i)*u,t[10]=(a+o)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*l,t[15]=0,t},u.perspective=function(t,e,n,i,r){var o=1/Math.tan(e/2),a=1/(i-r);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(r+i)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*r*i*a,t[15]=0,t},u.ortho=function(t,e,n,i,r,o,a){var s=1/(e-n),u=1/(i-r),l=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*s,t[13]=(r+i)*u,t[14]=(a+o)*l,t[15]=1,t},u.lookAt=function(t,n,i,r){var o,a,s,l,c,h,f,d,p,v,g=n[0],m=n[1],_=n[2],y=r[0],b=r[1],w=r[2],x=i[0],C=i[1],A=i[2];return Math.abs(g-x)<e&&Math.abs(m-C)<e&&Math.abs(_-A)<e?u.identity(t):(f=g-x,d=m-C,p=_-A,v=1/Math.sqrt(f*f+d*d+p*p),f*=v,d*=v,p*=v,o=b*p-w*d,a=w*f-y*p,s=y*d-b*f,v=Math.sqrt(o*o+a*a+s*s),v?(v=1/v,o*=v,a*=v,s*=v):(o=0,a=0,s=0),l=d*s-p*a,c=p*o-f*s,h=f*a-d*o,v=Math.sqrt(l*l+c*c+h*h),v?(v=1/v,l*=v,c*=v,h*=v):(l=0,c=0,h=0),t[0]=o,t[1]=l,t[2]=f,t[3]=0,t[4]=a,t[5]=c,t[6]=d,t[7]=0,t[8]=s,t[9]=h,t[10]=p,t[11]=0,t[12]=-(o*g+a*m+s*_),t[13]=-(l*g+c*m+h*_),t[14]=-(f*g+d*m+p*_),t[15]=1,t)},u.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},t.mat4=u;var l={};return l.create=function(){var t=new n(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},l.rotationTo=function(){var t=o.create(),e=o.fromValues(1,0,0),n=o.fromValues(0,1,0);return function(i,r,a){var s=o.dot(r,a);return-.999999>s?(o.cross(t,e,r),o.length(t)<1e-6&&o.cross(t,n,r),o.normalize(t,t),l.setAxisAngle(i,t,Math.PI),i):s>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(o.cross(t,r,a),i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=1+s,l.normalize(i,i))}}(),l.setAxes=function(){var t=s.create();return function(e,n,i,r){return t[0]=i[0],t[3]=i[1],t[6]=i[2],t[1]=r[0],t[4]=r[1],t[7]=r[2],t[2]=n[0],t[5]=n[1],t[8]=n[2],l.normalize(e,l.fromMat3(e,t))}}(),l.clone=a.clone,l.fromValues=a.fromValues,l.copy=a.copy,l.set=a.set,l.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},l.setAxisAngle=function(t,e,n){n=.5*n;var i=Math.sin(n);return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=Math.cos(n),t},l.add=a.add,l.multiply=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=n[0],u=n[1],l=n[2],c=n[3];return t[0]=i*c+a*s+r*l-o*u,t[1]=r*c+a*u+o*s-i*l,t[2]=o*c+a*l+i*u-r*s,t[3]=a*c-i*s-r*u-o*l,t},l.mul=l.multiply,l.scale=a.scale,l.rotateX=function(t,e,n){n*=.5;var i=e[0],r=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=i*u+a*s,t[1]=r*u+o*s,t[2]=o*u-r*s,t[3]=a*u-i*s,t},l.rotateY=function(t,e,n){n*=.5;var i=e[0],r=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=i*u-o*s,t[1]=r*u+a*s,t[2]=o*u+i*s,t[3]=a*u-r*s,t},l.rotateZ=function(t,e,n){n*=.5;var i=e[0],r=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=i*u+r*s,t[1]=r*u-i*s,t[2]=o*u+a*s,t[3]=a*u-o*s,t},l.calculateW=function(t,e){var n=e[0],i=e[1],r=e[2];return t[0]=n,t[1]=i,t[2]=r,t[3]=-Math.sqrt(Math.abs(1-n*n-i*i-r*r)),t},l.dot=a.dot,l.lerp=a.lerp,l.slerp=function(t,e,n,i){var r,o,a,s,u,l=e[0],c=e[1],h=e[2],f=e[3],d=n[0],p=n[1],v=n[2],g=n[3];return o=l*d+c*p+h*v+f*g,0>o&&(o=-o,d=-d,p=-p,v=-v,g=-g),1-o>1e-6?(r=Math.acos(o),a=Math.sin(r),s=Math.sin((1-i)*r)/a,u=Math.sin(i*r)/a):(s=1-i,u=i),t[0]=s*l+u*d,t[1]=s*c+u*p,t[2]=s*h+u*v,t[3]=s*f+u*g,t},l.invert=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=n*n+i*i+r*r+o*o,s=a?1/a:0;return t[0]=-n*s,t[1]=-i*s,t[2]=-r*s,t[3]=o*s,t},l.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},l.length=a.length,l.len=l.length,l.squaredLength=a.squaredLength,l.sqrLen=l.squaredLength,l.normalize=a.normalize,l.fromMat3=function(){var t="undefined"!=typeof Int8Array?new Int8Array([1,2,0]):[1,2,0];return function(e,n){var i,r=n[0]+n[4]+n[8];if(r>0)i=Math.sqrt(r+1),e[3]=.5*i,i=.5/i,e[0]=(n[7]-n[5])*i,e[1]=(n[2]-n[6])*i,e[2]=(n[3]-n[1])*i;else{var o=0;n[4]>n[0]&&(o=1),n[8]>n[3*o+o]&&(o=2);var a=t[o],s=t[a];i=Math.sqrt(n[3*o+o]-n[3*a+a]-n[3*s+s]+1),e[o]=.5*i,i=.5/i,e[3]=(n[3*s+a]-n[3*a+s])*i,e[a]=(n[3*a+o]+n[3*o+a])*i,e[s]=(n[3*s+o]+n[3*o+s])*i}return e}}(),l.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},t.quat=l,t}(),e=function(){function e(t,e){this._6=t;for(var n=0;n<this._6.length;++n)this._6[n]=a.forceRGB(this._6[n]);this._Q=e}function n(t,e,n){this.colorFor=t,this._dw=e,this._do=n}function i(t,e,n){var i=null,r=null;return t[e](function(t){var e=t.prop(n);return null===i&&null===r?void(i=r=e):(i=Math.min(i,e),void(r=Math.max(r,e)))}),{min:i,max:r}}function r(t,e,r,o,a){return e||(e=c("rainbow")),new n(function(n,i,r){var o=0;this._y!==this._A&&(o=(a(n).prop(t)-this._y)/(this._A-this._y)),f(i,r,e,o)},function(e){return void 0!==r?(this._y=r[0],void(this._A=r[1])):(r=i(e,o,t),this._y=r.min,void(this._A=r.max))},function(){})}var o=t.vec4,a={};a.rgb={};var s=a.rgb;a.rgb.create=o.create,a.rgb.scale=o.scale,a.rgb.copy=o.copy,a.rgb.fromValues=o.fromValues,a.rgb.mix=function(t,e,n,i){var r=1-i;return t[0]=e[0]*i+n[0]*r,t[1]=e[1]*i+n[1]*r,t[2]=e[2]*i+n[2]*r,t[3]=e[3]*i+n[3]*r,t};var u={white:s.fromValues(1,1,1,1),black:s.fromValues(0,0,0,1),grey:s.fromValues(.5,.5,.5,1),lightgrey:s.fromValues(.8,.8,.8,1),darkgrey:s.fromValues(.3,.3,.3,1),red:s.fromValues(1,0,0,1),darkred:s.fromValues(.5,0,0,1),lightred:s.fromValues(1,.5,.5,1),green:s.fromValues(0,1,0,1),darkgreen:s.fromValues(0,.5,0,1),lightgreen:s.fromValues(.5,1,.5,1),blue:s.fromValues(0,0,1,1),darkblue:s.fromValues(0,0,.5,1),lightblue:s.fromValues(.5,.5,1,1),yellow:s.fromValues(1,1,0,1),darkyellow:s.fromValues(.5,.5,0,1),lightyellow:s.fromValues(1,1,.5,1),cyan:s.fromValues(0,1,1,1),darkcyan:s.fromValues(0,.5,.5,1),lightcyan:s.fromValues(.5,1,1,1),magenta:s.fromValues(1,0,1,1),darkmagenta:s.fromValues(.5,0,.5,1),lightmagenta:s.fromValues(1,.5,1,1),orange:s.fromValues(1,.5,0,1),darkorange:s.fromValues(.5,.25,0,1),lightorange:s.fromValues(1,.75,.5,1)};a.hex2rgb=function(t){var e,n,i,r;if(4===t.length||5===t.length){e=parseInt(t[1],16),n=parseInt(t[2],16),i=parseInt(t[3],16),r=15,5===t.length&&(r=parseInt(t[4],16));var o=1/15;return s.fromValues(o*e,o*n,o*i,o*r)}if(7===t.length||9===t.length){e=parseInt(t.substr(1,2),16),n=parseInt(t.substr(3,2),16),i=parseInt(t.substr(5,2),16),r=255,9===t.length&&(r=parseInt(t.substr(7,2),16));var a=1/255;return s.fromValues(a*e,a*n,a*i,a*r)}},a.setColorPalette=function(t){u=t,a.initGradients()},a.forceRGB=function(t){if("string"==typeof t){var e=u[t];if(void 0!==e)return e;if(t.length>0&&"#"===t[0])return a.hex2rgb(t)}return 3===t.length?[t[0],t[1],t[2],1]:t},e.prototype={colorAt:function(t,e){if(e<=this._Q[0])return o.copy(t,this._6[0]);if(e>=this._Q[this._Q.length-1])return o.copy(t,this._6[this._Q.length-1]);for(var n=0,i=1;i<this._Q.length&&!(this._Q[i]>e);++i)n=i;var r=n+1,a=this._Q[n],u=this._Q[r],l=(e-a)/(u-a);return s.mix(t,this._6[r],this._6[n],l)}};var l={};a.gradient=function(t,n){if("string"==typeof t)return l[t];if(n=n||"equal","equal"===n){n=[];for(var i=0;i<t.length;++i)n.push(1*i/(t.length-1))}return new e(t,n)};var c=a.gradient;a.initGradients=function(){l.rainbow=c(["red","yellow","green","blue"]),l.reds=c(["lightred","darkred"]),l.greens=c(["lightgreen","darkgreen"]),l.blues=c(["lightblue","darkblue"]),l.trafficlight=c(["green","yellow","red"]),l.heatmap=c(["red","white","blue"])},n.prototype={begin:function(t){this._dw&&this._dw(t)},end:function(t){this._do&&this._do(t)}},a.ColorOp=n,a.uniform=function(t){return t=a.forceRGB(t||"white"),new n(function(e,n,i){n[i+0]=t[0],n[i+1]=t[1],n[i+2]=t[2],n[i+3]=t[3]},null,null)};var h={H:[1,1,1],C:[.83,.83,.83],N:[.13,.2,1],O:[1,.13,0],F:[.12,.94,.12],CL:[.12,.94,.12],BR:[.6,.13,0],I:[.4,0,.73],HE:[0,1,1],NE:[0,1,1],AR:[0,1,1],XE:[0,1,1],KR:[0,1,1],P:[1,.6,0],S:[.87,.87,0],B:[1,.67,.47],LI:[.47,0,1],NA:[.47,0,1],K:[.47,0,1],RB:[.47,0,1],CS:[.47,0,1],FR:[.47,0,1],BE:[0,.47,0],MG:[0,.47,0],SR:[0,.47,0],BA:[0,.47,0],RA:[0,.47,0],TI:[.6,.6,.6],FE:[.87,.47,0]};a.byElement=function(){return new n(function(t,e,n){var i=t.element(),r=h[i];return void 0!==r?(e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=1,e):(e[n]=1,e[n+1]=0,e[n+2]=1,e[n+3]=1,e)},null,null)},a.bySS=function(){return new n(function(t,e,n){switch(t.residue().ss()){case"C":return e[n]=.8,e[n+1]=.8,e[n+2]=.8,void(e[n+3]=1);case"H":return e[n]=.6,e[n+1]=.6,e[n+2]=.9,void(e[n+3]=1);case"E":return e[n]=.2,e[n+1]=.8,e[n+2]=.2,void(e[n+3]=1)}},null,null)},a.rainbow=function(t){t||(t=c("rainbow"));var e=new n(function(e,n,i){var r=0,o=this.chainLimits[e.residue().chain().name()];if(void 0!==o){var a=e.residue().index();r=(a-o[0])/(o[1]-o[0])}var s=[1,1,1,1];t.colorAt(s,r),n[i]=s[0],n[i+1]=s[1],n[i+2]=s[2],n[i+3]=s[3]},function(t){var e=t.chains();this.chainLimits={};for(var n=0;n<e.length;++n){var i=e[n].backboneTraces();if(0!==i.length){for(var r=i[0].residueAt(0).index(),o=i[0].residueAt(i[0].length()-1).index(),a=1;a<i.length;++a){var s=i[a];r=Math.min(r,s.residueAt(0).index()),o=Math.max(o,s.residueAt(s.length()-1).index())}r!==o&&(this.chainLimits[e[n].name()]=[r,o])}}},function(){this.chainLimits=null});return e},a.ssSuccession=function(t,e){t||(t=c("rainbow")),e||(e=a.forceRGB("lightgrey"));var i=new n(function(n,i,r){var o=n.residue().index(),a=this.chainLimits[n.residue().chain().name()],s=a.indices[o];if(-1===s)return i[r]=e[0],i[r+1]=e[1],i[r+2]=e[2],void(i[r+3]=e[3]);var u=0;null===a.max,null!==a.max&&(u=s/(a.max>0?a.max:1));var l=[0,0,0,0];t.colorAt(l,u),i[r]=l[0],i[r+1]=l[1],i[r+2]=l[2],i[r+3]=l[3]},function(t){var e=t.chains();this.chainLimits={};for(var n=0;n<e.length;++n){for(var i=e[n].residues(),r=null,o={},a=0,s="C",u=0;u<i.length;++u){var l=i[u].ss();"C"===l?("C"!==s&&a++,o[i[u].index()]=-1):(r=a,o[i[u].index()]=a),s=l}this.chainLimits[e[n].name()]={indices:o,max:r}}},function(){this.chainLimits=null});return i},a.byChain=function(t){t||(t=c("rainbow"));var e=new n(function(e,n,i){var r=this.chainIndices[e.residue().chain().name()],o=r*this.scale,a=[0,0,0,0];t.colorAt(a,o),n[i+0]=a[0],n[i+1]=a[1],n[i+2]=a[2],n[i+3]=a[3]},function(t){var e=t.chains();this.chainIndices={};for(var n=0;n<e.length;++n)this.chainIndices[e[n].name()]=n;this.scale=e.length>1?1/(e.length-1):1},function(){this.chainIndices=null});return e};var f=function(){var t=o.create();return function(e,n,i,r){i.colorAt(t,r),e[n+0]=t[0],e[n+1]=t[1],e[n+2]=t[2],e[n+3]=t[3]}}();return a.byAtomProp=function(t,e,n){return r(t,e,n,"eachAtom",function(t){return t})},a.byResidueProp=function(t,e,n){return r(t,e,n,"eachResidue",function(t){return t.residue()})},a.interpolateColor=function(t,e){for(var n=new Float32Array(4*(e*(t.length/4-1)+1)),i=0,r=o.create(),a=o.create(),s=1/e,u=0;u<t.length/4-1;++u){o.set(r,t[4*u+0],t[4*u+1],t[4*u+2],t[4*u+3]),o.set(a,t[4*u+4],t[4*u+5],t[4*u+6],t[4*u+7]);for(var l=0;e>l;++l){var c=s*l;n[i+0]=r[0]*(1-c)+a[0]*c,n[i+1]=r[1]*(1-c)+a[1]*c,n[i+2]=r[2]*(1-c)+a[2]*c,n[i+3]=r[3]*(1-c)+a[3]*c,i+=4}}return n[i+0]=a[0],n[i+1]=a[1],n[i+2]=a[2],n[i+3]=a[3],n},a.initGradients(),a}(),n=function(){function t(t,e,n){this._cW=t,this._bq=e,this._bx=e,this._dp=n}function e(){this.clear()}return t.prototype={nextId:function(t){var e=this._bx;return this._bx++,this._cW._m[e]=t,e},hasLeft:function(){return this._bx<this._dp},recycle:function(){this._cW.recycle(this)},length:function(){return this._dp-this._bq}},e.prototype={MAX_ID:16777216,getContinuousRange:function(e){for(var n=-1,i=null,r=0;r<this._bg.length;++r){var o=this._bg[r],a=o.length();a>=e&&(null===i||i>a)&&(i=a,n=r)}if(-1!==n){var s=this._bg[n];return this._bg.splice(n,1),this._bH++,s}var u=this._cG,l=u+e;if(l>this.MAX_ID)return null;this._cG=l;var c=new t(this,u,l);return this._bH++,c},clear:function(){this._m={},this._cG=1,this._bg=[],this._bH=0},recycle:function(t){for(var e=t._bq;e<t._bx;++e)delete this._m[e];t._bx=t._bq,this._bg.push(t),this._bH--,this._bg.length>0&&0===this._bH&&this.clear()},objectForId:function(t){return this._m[t]}},e}(),i=function(){function t(t,e){return e>t}function e(t,e){void 0===t||void 0===e?(this._bT=!0,this._y=this._A=null):(this._bT=!1,this._y=t,this._A=e)}var n={};return n.derive=function(t,e,n){for(var i in e.prototype)t.prototype[i]=e.prototype[i];if(void 0!==n)for(var r in n)t.prototype[r]=n[r]},n.bind=function(t,e){return function(){return e.apply(t,arguments)}},n.copy=function(t){t=t||{};var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},n.binarySearch=function(e,n,i){if(0===e.length)return-1;i=i||t;for(var r=0,o=e.length,a=r+o>>1;;){var s=e[a];if(i(n,s))o=a;else{if(!i(s,n))return a;r=a}var u=r+o>>1;if(u===a)return-1;a=u}return-1},n.indexFirstLargerEqualThan=function(e,n,i){if(i=i||t,0===e.length||i(e[e.length-1],n))return-1;for(var r=0,o=e.length,a=r+o>>1;;){var s=e[a];i(n,s)?o=a:i(s,n)?r=a+1:o=a;var u=r+o>>1;if(u===a)return a;a=u}},n.indexLastSmallerThan=function(e,n,i){if(i=i||t,0===e.length||i(e[e.length-1],n))return e.length-1;if(i(n,e[0])||!i(e[0],n))return-1;for(var r=0,o=e.length,a=r+o>>1;;){var s=e[a];i(n,s)||!i(s,n)?o=a:r=a;var u=r+o>>1;if(u===a)return a;a=u}},n.indexLastSmallerEqualThan=function(e,n,i){if(i=i||t,0===e.length||i(e[e.length-1],n))return e.length-1;if(i(n,e[0]))return-1;for(var r=0,o=e.length,a=r+o>>1;;){var s=e[a];i(n,s)?o=a:r=a;var u=r+o>>1;if(u===a)return a;a=u}},e.prototype={min:function(){return this._y},max:function(){return this._A},length:function(){return this._A-this._y},empty:function(){return this._bT},center:function(){return.5*(this._A+this._y)},extend:function(t){this._y-=t,this._A+=t},update:function(t){return this._bT?(this._y=this._A=t,void(this._bT=!1)):void(t<this._y?this._y=t:t>this._A&&(this._A=t))}},n.Range=e,n}(),r=function(){function t(t){if("complete"!==document.readyState&&"loaded"!==document.readyState&&"interactive"!==document.readyState)return!1;if(void 0===t)try{var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("experimental-webgl"))}catch(n){return!1}return!!t}function e(t,e){this._k=e.width,this._dy=e.antialias,this._l=e.height,this._2=!1,this._d9=null,this._E=t,this._cj(),this._cB=e.backgroundColor,this._dh=e.forceManualAntialiasing}return e.prototype={_cs:function(){if(this._2){this._2=!1;var t=this._k*this._br,e=this._l*this._br;this._bb=t,this._bc=e,this._b.viewport(0,0,t,e),this._c.width=t,this._c.height=e,this._br>1&&this._dd(this._br)}},resize:function(t,e){(t!==this._k||e!==this._l)&&(this._2=!0,this._k=t,this._l=e)},fitParent:function(){var t=this._E.getBoundingClientRect();this.resize(t.width,t.height)},gl:function(){return this._b},imageData:function(){return this._c.toDataURL()},_eh:function(){try{var t={antialias:this._dy&&!this._dh,preserveDrawingBuffer:!0};this._b=this._c.getContext("experimental-webgl",t)}catch(e){return!1}return!!this._b},_dd:function(t){var e=1/t,n=.5*-(1-e)*this._bb,i=.5*-(1-e)*this._bc,r="translate("+n+"px, "+i+"px)",o="scale("+e+", "+e+")",a=r+" "+o;this._c.style.webkitTransform=a,this._c.style.transform=a,this._c.style.ieTransform=a,this._c.width=this._bb,this._c.height=this._bc},initGL:function(){var t=1;if(!this._eh())return!1;var e=this._b;return e.getContextAttributes().antialias&&!this._dh||!this._dy||(t=2),this._bb=this._k*t,this._bc=this._l*t,this._br=t,t>1&&this._dd(t),e.viewportWidth=this._bb,e.viewportHeight=this._bc,e.clearColor(this._cB[0],this._cB[1],this._cB[2],1),e.lineWidth(2),e.cullFace(e.FRONT),e.enable(e.CULL_FACE),e.enable(e.DEPTH_TEST),!0},_cM:function(t,e,n){var i,r=this._b;if("fragment"===e)i=r.createShader(r.FRAGMENT_SHADER);else{if("vertex"!==e)return null;i=r.createShader(r.VERTEX_SHADER)}var o=t.replace("${PRECISION}",n);return r.shaderSource(i,o),r.compileShader(i),r.getShaderParameter(i,r.COMPILE_STATUS)?i:null},initShader:function(t,e,n){var r=this._b,o=this._cM(e,"fragment",n),a=this._cM(t,"vertex",n),s=r.createProgram();if(r.attachShader(s,a),r.attachShader(s,o),r.linkProgram(s),!r.getProgramParameter(s,r.LINK_STATUS))return null;
var u=i.bind(r,r.getAttribLocation),l=i.bind(r,r.getUniformLocation);return s.posAttrib=u(s,"attrPos"),s.colorAttrib=u(s,"attrColor"),s.normalAttrib=u(s,"attrNormal"),s.objIdAttrib=u(s,"attrObjId"),s.selectAttrib=u(s,"attrSelect"),s.symId=l(s,"symId"),s.projection=l(s,"projectionMat"),s.modelview=l(s,"modelviewMat"),s.rotation=l(s,"rotationMat"),s.fog=l(s,"fog"),s.fogFar=l(s,"fogFar"),s.fogNear=l(s,"fogNear"),s.fogColor=l(s,"fogColor"),s.outlineColor=l(s,"outlineColor"),s.outlineWidth=l(s,"outlineWidth"),s.relativePixelSize=l(s,"relativePixelSize"),s.screenDoorTransparency=l(s,"screenDoorTransparency"),s.selectionColor=l(s,"selectionColor"),s.pointSize=l(s,"pointSize"),s.zoom=l(s,"zoom"),s},on:function(t,e){this._c.addEventListener(t,e,!1)},removeEventListener:function(t,e){this._c.removeEventListener(t,e,!1)},onWheel:function(t,e){"onwheel"in this._c?this.on("wheel",t):this.on("mousewheel",e)},domElement:function(){return this._c},bind:function(){this._cs(),this._b.viewport(0,0,this._bb,this._bc)},superSamplingFactor:function(){return this._br},viewportWidth:function(){return this._bb},viewportHeight:function(){return this._bc},width:function(){return this._k},height:function(){return this._l},_cj:function(){this._c=document.createElement("canvas"),this._c.width=this._k,this._c.height=this._l,this._E.appendChild(this._c)},isWebGLSupported:function(){return t(this._b)},destroy:function(){this._c.width=1,this._c.height=1,this._c.parentElement.removeChild(this._c),this._c=null}},{Canvas:e,isWebGLSupported:t}}(),o=function(){function t(t,e){this._k=e.width,this._l=e.height,this._dt=this._k,this._du=this._l,this._b=t,this._ds=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,this._ds),this._bB=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this._bB),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,this._k,this._l),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,this._bB),this._bD=t.createTexture(),this._ei()}return t.prototype={width:function(){return this._k},height:function(){return this._l},bind:function(){var t=this._b;t.bindFramebuffer(t.FRAMEBUFFER,this._ds),t.bindRenderbuffer(t.RENDERBUFFER,this._bB),(this._dt!==this._k||this._du!==this._l)&&this._dN(),t.viewport(0,0,this._k,this._l)},colorTexture:function(){return this._bD},_ei:function(){this.bind();var t=this._b;t.bindTexture(t.TEXTURE_2D,this._bD),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this._k,this._l,0,t.RGBA,t.UNSIGNED_BYTE,null),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this._bD,0),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.bindTexture(t.TEXTURE_2D,null),this.release()},_dN:function(){var t=this._b;t.bindRenderbuffer(t.RENDERBUFFER,this._bB),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,this._k,this._l),t.bindTexture(t.TEXTURE_2D,this._bD),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this._k,this._l,0,t.RGBA,t.UNSIGNED_BYTE,null),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this._bD,0),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,this._bB),t.bindTexture(t.TEXTURE_2D,null),this._dt=this._k,this._du=this._l},resize:function(t,e){this._k=t,this._l=e},release:function(){var t=this._b;t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindRenderbuffer(t.RENDERBUFFER,null)}},t}(),a=function(){function t(t){this._bA=[],this._ev=t}return t.prototype.request=function(t){for(var e=-1,n=null,i=0;i<this._bA.length;++i){var r=this._bA[i],o=r.length;o>=t&&(null===n||n>o)&&(n=o,e=i)}if(-1!==e){var a=this._bA[e];return this._bA.splice(e,1),a}return new this._ev(t)},t.prototype.release=function(t){this._bA.push(t)},t}(),s=function(){function e(t){this._b7=i.create(),this._N=i.create(),this._c6=i.create(),this._o=i.create(),this._bI=i.create(),this._bd=.1,this._5=4e3,this._di=-5,this._dj=50,this._bS=!0,this._cp=45*Math.PI/180,this._dk=n.fromValues(1,1,1),this._c0=n.fromValues(.1,.1,.1),this._ca=1,this._cO=n.fromValues(.1,1,.1),this._U=n.create(),this._L=50,this._cP=!1,this._7=!0,this._F=!0,this._0=1,this._b=t,this._bU=null,this._bp=0,this.setViewportSize(t.viewportWidth,t.viewportHeight)}var n=t.vec3,i=t.mat4;return e.prototype={_bz:function(){this._bp+=1,this._bp>68719476735&&(this._bp=0)},setScreenDoorTransparency:function(t){this._cP=t,this._bz()},setOutlineWidth:function(t){this._ca!==t&&(this._ca=t,this._bz())},setRotation:function(t){16===t.length?i.copy(this._o,t):i.fromMat3(this._o,t),this._F=!0},upsamplingFactor:function(){return this._0},setUpsamplingFactor:function(t){if(this._0!==t){this._bz(),this._0=t;var e=this._0/this._k,n=this._0/this._l;this._cS=new Float32Array([e,n])}},mainAxes:function(){return[n.fromValues(this._o[0],this._o[4],this._o[8]),n.fromValues(this._o[1],this._o[5],this._o[9]),n.fromValues(this._o[2],this._o[6],this._o[10])]},fieldOfViewY:function(){return this._cp},setFieldOfViewY:function(t){this._cp=t,this._7=!0},aspectRatio:function(){return this._k/this._l},rotation:function(){return this._o},_dE:function(){var t=!1;return this._F&&(i.identity(this._N),i.translate(this._N,this._N,[-this._U[0],-this._U[1],-this._U[2]]),i.mul(this._N,this._o,this._N),i.identity(this._bI),i.translate(this._bI,this._bI,[0,0,-this._L]),i.mul(this._N,this._bI,this._N),t=!0),this._7&&(i.identity(this._b7),i.perspective(this._b7,this._cp,this._k/this._l,this._bd,this._5),t=!0),this._7=!1,this._F=!1,t&&this._bz(),t},setViewportSize:function(t,e){this._7=!0,this._k=t,this._l=e,this._cS=new Float32Array([this._0/t,this._0/e])},viewportWidth:function(){return this._k},viewportHeight:function(){return this._l},setCenter:function(t){this._F=!0,n.copy(this._U,t)},fog:function(t){return void 0!==t&&t!==this._bS&&(this._bS=t,this._bz()),this._bS},rotateZ:function(){var t=i.create();return function(e){i.identity(t),this._F=!0,i.rotate(t,t,e,[0,0,1]),i.mul(this._o,t,this._o)}}(),rotateX:function(){var t=i.create();return function(e){i.identity(t),this._F=!0,i.rotate(t,t,e,[1,0,0]),i.mul(this._o,t,this._o)}}(),rotateY:function(){var t=i.create();return function(e){i.identity(t),this._F=!0,i.rotate(t,t,e,[0,1,0]),i.mul(this._o,t,this._o)}}(),panX:function(t){return this.panXY(t,0)},panY:function(t){return this.panXY(0,t)},panXY:function(){var t=i.create(),e=n.create();return function(r,o){i.transpose(t,this._o),this._F=!0,n.set(e,-r,o,0),n.transformMat4(e,e,t),n.add(e,e,this._U),this.setCenter(e)}}(),nearOffset:function(){return this._bd},farOffset:function(){return this._5},setNearFar:function(t,e){(t!==this._bd||e!==this._5)&&(this._bd=t,this._5=e,this._7=!0)},setFogNearFar:function(t,e){this._di=t,this._dj=e,this._7=!0},setZoom:function(t){return this._F=!0,this._L=t,this._L},zoom:function(t){if(void 0===t)return this._L;this._F=!0;var e=1+.1*t;return this._L=Math.min(1e3,Math.max(2,e*this._L)),this._L},center:function(){return this._U},setFogColor:function(t){this._dk=n.clone(t)},currentShader:function(){return this._bU},invalidateCurrentShader:function(){this._bU=null},setOutlineColor:function(t){this._c0=n.clone(t)},setSelectionColor:function(t){this._cO=n.clone(t)},bind:function(t,e){var n=!1,r=this._b;if(this._bU!==t&&(this._bU=t,r.useProgram(t),n=!0),n=this._dE()||n,e?(i.mul(this._c6,this._N,e),r.uniformMatrix4fv(t.modelview,!1,this._c6)):r.uniformMatrix4fv(t.modelview,!1,this._N),this._bp!==t.stateId){t.stateId=this._bp,r.uniformMatrix4fv(t.projection,!1,this._b7),t.rotation&&r.uniformMatrix4fv(t.rotation,!1,this._o),r.uniform1i(t.fog,this._bS);var o=this._L;r.uniform1f(t.fogFar,this._dj+o),r.uniform1f(t.zoom,this._L),r.uniform1f(t.fogNear,this._di+o),r.uniform3fv(t.fogColor,this._dk),r.uniform3fv(t.outlineColor,this._c0),r.uniform3fv(t.selectionColor,this._cO),r.uniform2fv(t.relativePixelSize,this._cS),r.uniform1f(t.outlineWidth,this._ca),r.uniform1i(t.screenDoorTransparency,this._cP)}}},e}(),u={PRELUDE_FS:"\nprecision ${PRECISION} float;\nuniform bool screenDoorTransparency;\nvec4 handleAlpha(vec4 inColor) {\n  if (screenDoorTransparency) {\n    ivec2 pxCoord = ivec2(gl_FragCoord.xy);\n    ivec2 mod = pxCoord - (pxCoord/2) * 2;\n    if (inColor.a < 0.99 &&\n        (inColor.a < 0.01 || mod.x != 0 || mod.y != 0)) { discard; }\n    return vec4(inColor.rgb, 1.0);\n  } else {\n    if (inColor.a == 0.0) { discard; }\n    return inColor;\n  } \n} \nuniform vec3 selectionColor;\n\nvec3 handleSelect(vec3 inColor, float vertSelect) { \n  return mix(inColor, selectionColor, step(0.5, vertSelect) * 0.7); \n} \n\nuniform bool fog;\nuniform float fogNear;\nuniform float fogFar;\nuniform vec3 fogColor;\nvec3 handleFog(vec3 inColor) {\n  if (fog) {\n    float depth = gl_FragCoord.z / gl_FragCoord.w;\n    float fogFactor = smoothstep(fogNear, fogFar, depth);\n    return mix(inColor, fogColor, fogFactor);\n  } else {\n    return inColor;\n  }\n}",LINES_FS:"\nvarying vec4 vertColor;\nvarying vec3 vertNormal;\n\nvoid main(void) {\n  gl_FragColor = handleAlpha(vertColor);\n  gl_FragColor.rgb = handleFog(gl_FragColor.rgb);\n}",SELECT_LINES_FS:"\nprecision ${PRECISION} float;\n\nvarying float vertSelect;\nvarying vec3 vertNormal;\nuniform float fogNear;\nuniform float fogFar;\nuniform vec3 fogColor;\nuniform bool fog;\nuniform vec3 selectionColor;\n\nvoid main(void) {\n  gl_FragColor = mix(vec4(0.0, 0.0, 0.0, 0.0), vec4(selectionColor, 1.0), \n                     vertSelect);\n  gl_FragColor.a = step(0.5, vertSelect);\n  if (gl_FragColor.a == 0.0) { discard; }\n  float depth = gl_FragCoord.z / gl_FragCoord.w;\n  if (fog) {\n    float fog_factor = smoothstep(fogNear, fogFar, depth);\n    gl_FragColor = mix(gl_FragColor, vec4(fogColor, gl_FragColor.w),\n                        fog_factor);\n  }\n}",SELECT_LINES_VS:"\nattribute vec3 attrPos;\nattribute float attrSelect;\n\nuniform mat4 projectionMat;\nuniform mat4 modelviewMat;\nuniform float pointSize;\nvarying float vertSelect;\nvoid main(void) {\n  gl_Position = projectionMat * modelviewMat * vec4(attrPos, 1.0);\n  gl_Position.z += gl_Position.w * 0.000001; \n  float distToCamera = vec4(modelviewMat * vec4(attrPos, 1.0)).z;\n  gl_PointSize = pointSize * 200.0 / abs(distToCamera); \n  vertSelect = attrSelect;\n}",SELECT_VS:"\nprecision ${PRECISION} float;\nuniform mat4 projectionMat;\nuniform mat4 modelviewMat;\nuniform float pointSize;\nattribute vec3 attrPos;\nattribute float attrObjId;\n\nvarying float objId;\n\nvoid main(void) {\n  gl_Position = projectionMat * modelviewMat * vec4(attrPos, 1.0);\n  float distToCamera = vec4(modelviewMat * vec4(attrPos, 1.0)).z;\n  gl_PointSize = pointSize * 200.0 / abs(distToCamera); \n  objId = attrObjId;\n}",SELECT_FS:"\nprecision ${PRECISION} float;\n\nvarying float objId;\nuniform int symId;\n\nint intMod(int x, int y) { \n  int z = x/y;\n  return x-y*z;\n}\nvoid main(void) {\n  // ints are only required to be 7bit...\n  int integralObjId = int(objId+0.5);\n  int red = intMod(integralObjId, 256);\n  integralObjId/=256;\n  int green = intMod(integralObjId, 256);\n  integralObjId/=256;\n  int blue = intMod(integralObjId, 256);\n  int alpha = symId;\n  gl_FragColor = vec4(float(red), float(green), \n                      float(blue), float(alpha))/255.0;\n}",LINES_VS:"\nattribute vec3 attrPos;\nattribute vec4 attrColor;\n\nuniform mat4 projectionMat;\nuniform mat4 modelviewMat;\nvarying vec4 vertColor;\nuniform float pointSize;\nvoid main(void) {\n  gl_Position = projectionMat * modelviewMat * vec4(attrPos, 1.0);\n  float distToCamera = vec4(modelviewMat * vec4(attrPos, 1.0)).z;\n  gl_PointSize = pointSize * 200.0 / abs(distToCamera); \n  vertColor = attrColor;\n}",HEMILIGHT_FS:"\nvarying vec4 vertColor;\nvarying vec3 vertNormal;\nvarying float vertSelect;\n\nvoid main(void) {\n  float dp = dot(vertNormal, vec3(0.0, 0.0, 1.0));\n  float hemi = min(1.0, max(0.0, dp)*0.6+0.5);\n  gl_FragColor = vec4(vertColor.rgb*hemi, vertColor.a);\n  gl_FragColor.rgb = handleFog(handleSelect(gl_FragColor.rgb, vertSelect));\n  gl_FragColor = handleAlpha(gl_FragColor);\n}",PHONG_FS:"\nvarying vec4 vertColor;\nvarying vec3 vertNormal;\nvarying vec3 vertPos;\nuniform float zoom;\nvarying float vertSelect;\n\nvoid main(void) {\n  vec3 eyePos = vec3(0.0, 0.0, zoom);\n  float dp = dot(vertNormal, normalize(eyePos - vertPos));\n  float hemi = min(1.0, max(0.3, dp)+0.2);\n  //hemi *= vertColor.a;\n  vec3 rgbColor = vertColor.rgb * hemi; \n  rgbColor += min(vertColor.rgb, 0.8) * pow(max(0.0, dp), 18.0);\n  rgbColor = handleSelect(rgbColor, vertSelect);\n  gl_FragColor = vec4(clamp(rgbColor, 0.0, 1.0), vertColor.a);\n  gl_FragColor.rgb = handleFog(gl_FragColor.rgb);\n  gl_FragColor = handleAlpha(gl_FragColor);\n}",HEMILIGHT_VS:"\nattribute vec3 attrPos;\nattribute vec4 attrColor;\nattribute vec3 attrNormal;\nattribute float attrSelect;\n\nuniform mat4 projectionMat;\nuniform mat4 modelviewMat;\nvarying vec4 vertColor;\nvarying vec3 vertNormal;\nvarying vec3 vertPos;\nvarying float vertSelect;\nvoid main(void) {\n  vertPos = (modelviewMat * vec4(attrPos, 1.0)).xyz;\n  gl_Position = projectionMat * modelviewMat * vec4(attrPos, 1.0);\n  vec4 n = (modelviewMat * vec4(attrNormal, 0.0));\n  vertNormal = n.xyz;\n  vertColor = attrColor;\n  vertSelect = attrSelect;\n}",OUTLINE_FS:"\nvarying float vertAlpha;\nvarying float vertSelect;\n\nuniform vec3 outlineColor;\n\nvoid main() {\n  gl_FragColor = vec4(mix(outlineColor, selectionColor, \n                          step(0.5, vertSelect)), \n                      vertAlpha);\n  gl_FragColor.rgb = handleFog(gl_FragColor.rgb);\n  gl_FragColor = handleAlpha(gl_FragColor);\n}",OUTLINE_VS:"\nprecision ${PRECISION} float;\n\nattribute vec3 attrPos;\nattribute vec3 attrNormal;\nattribute vec4 attrColor;\nattribute float attrSelect;\n\nuniform vec3 outlineColor;\nuniform mat4 projectionMat;\nuniform mat4 modelviewMat;\nvarying float vertAlpha;\nvarying float vertSelect;\nuniform vec2 relativePixelSize;\nuniform float outlineWidth;\n\nvoid main(void) {\n  gl_Position = projectionMat * modelviewMat * vec4(attrPos, 1.0);\n  vec4 normal = modelviewMat * vec4(attrNormal, 0.0);\n  vertAlpha = attrColor.a;\n  vertSelect = attrSelect;\n  vec2 expansion = relativePixelSize * \n       (outlineWidth + 2.0 * step(0.5, attrSelect));\n  vec2 offset = normal.xy * expansion;\n  gl_Position.xy += gl_Position.w * offset;\n}",TEXT_VS:"\nprecision ${PRECISION} float;\n\nattribute vec3 attrCenter;\nattribute vec2 attrCorner;\nuniform mat4 projectionMat;\nuniform mat4 modelviewMat;\nuniform mat4 rotationMat;\nvarying vec2 vertTex;\nuniform float width;\nuniform float height;\nvoid main() { \n  vec4 pos = modelviewMat* vec4(attrCenter, 1.0);\n  pos.z += 4.0;\n  gl_Position = projectionMat * pos;\n  gl_Position.xy += vec2(width,height)*attrCorner*gl_Position.w; \n  vertTex = (attrCorner+abs(attrCorner))/(2.0*abs(attrCorner)); \n}",TEXT_FS:"\nprecision ${PRECISION} float;\n\nuniform mat4 projectionMat;\nuniform mat4 modelviewMat;\nuniform sampler2D sampler;\nuniform float xScale;\nuniform float yScale;\nvarying vec2 vertTex;\nvoid main() { \n  vec2 texCoord = vec2(vertTex.x*xScale, vertTex.y*yScale);\n  gl_FragColor = texture2D(sampler, texCoord);\n  if (gl_FragColor.a == 0.0) { discard; }\n}"},l=function(){function t(t,e,n){this._bh=t,this._bh.addEventListener("touchmove",i.bind(this,this._dG)),this._bh.addEventListener("touchstart",i.bind(this,this._dF)),this._bh.addEventListener("touchend",i.bind(this,this._cH)),this._bh.addEventListener("touchcancel",i.bind(this,this._cH)),this._8={scale:1,rotation:0,center:null},this._bP=null,this._w=e,this._d=n}function e(t){for(var e=0,n=0,i=0;i<t.length;++i)e+=t[i].clientX,n+=t[i].clientY;return e/=t.length,n/=t.length,{x:e,y:n}}function n(t,e){var n=e.x-t.x,i=e.y-t.y;return Math.sqrt(n*n+i*i)}function r(t,e){var i=n(t[0],t[1]),r=n(e[0],e[1]);return r/(0===i?1:i)}function o(t,e){var n=e.x-t.x,i=e.y-t.y;return Math.atan2(i,n)}function a(t,e){return o(e[1],e[0])-o(t[1],t[0])}return t.prototype={_dm:function(t,n){var i={};i.center=e(n.targetTouches),i.pointers=[];for(var o=0;o<n.targetTouches.length;++o){var s=n.targetTouches[o];i.pointers.push({x:s.clientX,y:s.clientY})}return i.numTouches=n.targetTouches.length,i.rotation=0,i.scale=1,i.deltaScale=0,i.deltaRotation=0,t.center&&(i.deltaCenter={x:i.center.x-t.center.x,y:i.center.y-t.center.y}),2!==t.numTouches||2!==i.numTouches?i:(i.initialPointers=t.initialPointers?t.initialPointers:t.pointers,i.scale=r(i.initialPointers,i.pointers),i.deltaScale=i.scale-t.scale,i.rotation=a(i.initialPointers,i.pointers),i.deltaRotation=i.rotation-t.rotation,i)},_dG:function(t){t.preventDefault();var e=this._dm(this._8,t),n=4*-e.deltaScale;if(0!==n&&this._d.zoom(n),2===e.numTouches&&2===this._8.numTouches){var i=.002*Math.tan(.5*this._d.fieldOfViewY())*this._d.zoom();this._d.panXY(e.deltaCenter.x*i,e.deltaCenter.y*i)}var r=-e.deltaRotation;this._d.rotateZ(r),1===e.numTouches&&1===this._8.numTouches&&(this._d.rotateX(.005*e.deltaCenter.y),this._d.rotateY(.005*e.deltaCenter.x)),this._w.requestRedraw(),this._8=e},_dF:function(t){if(t.preventDefault(),1===t.targetTouches.length){var e=(new Date).getTime();if(null!==this._bP){var n=e-this._bP;500>n&&this._w._c4({clientX:t.targetTouches[0].clientX,clientY:t.targetTouches[0].clientY})}this._bP=e}else this._bP=null;this._8=this._dm(this._8,t)},_cH:function(t){t.preventDefault()}},t}(),c=function(){function t(t,e,n,i){this._w=e,this._c=t,this._d=n,this._c=t,this._ey=i,this._cg=null,this._ej()}return t.prototype={_es:function(t){null!==t&&this._w.setCenter(t.pos(),this._ey)},_d2:function(t){var e=this._c,n=(new Date).getTime();if((null===this._cg||n-this._cg>300)&n-this._ea<300){var i=this._c.domElement().getBoundingClientRect(),r=this._w.pick({x:t.clientX-i.left,y:t.clientY-i.top});this._w._cv(t,"click",r)}this._cg=n,e.removeEventListener("mousemove",this._bN),e.removeEventListener("mousemove",this._bO),e.removeEventListener("mouseup",this._bM),document.removeEventListener("mouseup",this._bM),document.removeEventListener("mousemove",this._bN),document.removeEventListener("mousemove",this._bO)},setCam:function(t){this._d=t},_ej:function(){return this._bO=i.bind(this,this._d4),this._bN=i.bind(this,this._d3),this._bM=i.bind(this,this._d2),this._c.onWheel(i.bind(this,this._d0),i.bind(this,this._d1)),this._c.on("dblclick",i.bind(this,this._c4)),this._c.on("mousedown",i.bind(this,this._d5)),!0},_d1:function(t){this._d.zoom(t.wheelDelta<0?-1:1),t.preventDefault(),this._w.requestRedraw()},_d0:function(t){this._d.zoom(t.deltaY<0?1:-1),t.preventDefault(),this._w.requestRedraw()},_c4:function(){return function(t){var e=this._c.domElement().getBoundingClientRect(),n=this._w.pick({x:t.clientX-e.left,y:t.clientY-e.top});this._w._cv(t,"doubleClick",n),this._w.requestRedraw()}}(),_d5:function(t){0===t.button&&(this._ea=(new Date).getTime(),t.preventDefault(),t.shiftKey===!0?(this._c.on("mousemove",this._bO),document.addEventListener("mousemove",this._bO,!1)):(this._c.on("mousemove",this._bN),document.addEventListener("mousemove",this._bN,!1)),this._c.on("mouseup",this._bM),document.addEventListener("mouseup",this._bM,!1),this._be={x:t.pageX,y:t.pageY})},_d3:function(t){var e={x:t.pageX,y:t.pageY},n={x:e.x-this._be.x,y:e.y-this._be.y},i=.005;this._d.rotateX(i*n.y),this._d.rotateY(i*n.x),this._be=e,this._w.requestRedraw()},_d4:function(t){var e={x:t.pageX,y:t.pageY},n={x:e.x-this._be.x,y:e.y-this._be.y},i=.002*Math.tan(.5*this._d.fieldOfViewY())*this._d.zoom();this._d.panXY(i*n.x,i*n.y),this._be=e,this._w.requestRedraw()}},t}(),h=function(){function e(t,e,n){return n?t*e:e*(t-1)+1}function n(t,n,i,r,a,s){a=a||!1,r=r||.5;var u=null,l=3*e(n,i,a);u=s?s.request(l):new Float32Array(l);var c,h,d,p=0,v=1/i,g=o.create(),m=o.create(),_=o.create(),y=o.create(),b=o.create(),w=o.create();for(o.set(y,t[0],t[1],t[2]),o.set(b,t[3],t[4],t[5]),a?(o.set(_,t[t.length-3],t[t.length-2],t[t.length-1]),o.sub(g,b,_),o.scale(g,g,r)):(o.set(_,t[0],t[1],t[2]),o.set(g,0,0,0)),c=1,d=n-1;d>c;++c){for(o.set(w,t[3*(c+1)],t[3*(c+1)+1],t[3*(c+1)+2]),o.sub(m,w,y),o.scale(m,m,r),h=0;i>h;++h)f(u,y,g,b,m,v*h,p),p+=3;o.copy(_,y),o.copy(y,b),o.copy(b,w),o.copy(g,m)}for(a?(o.set(w,t[0],t[1],t[3]),o.sub(m,w,y),o.scale(m,m,r)):o.set(m,0,0,0),h=0;i>h;++h)f(u,y,g,b,m,v*h,p),p+=3;if(!a)return u[p]=t[3*(n-1)+0],u[p+1]=t[3*(n-1)+1],u[p+2]=t[3*(n-1)+2],u;for(o.copy(_,y),o.copy(y,b),o.copy(b,w),o.copy(g,m),o.set(w,t[3],t[4],t[5]),o.sub(m,w,y),o.scale(m,m,r),h=0;i>h;++h)f(u,y,g,b,m,v*h,p),p+=3;return u}function i(t,e){this._U=t||o.create(),this._dP=e||1}function r(t,e){for(var n=new Float32Array(e*(t.length-1)+1),i=0,r=0,o=0,a=1/e,s=0;s<t.length-1;++s){r=t[s],o=t[s+1];for(var u=0;e>u;++u){var l=a*u;n[i+0]=r*(1-l)+o*l,i+=1}}return n[i+0]=o,n}var o=t.vec3,a=t.vec4,s=t.mat3,u=t.quat,l=function(){var t=o.create();return function(e,n,i){return o.cross(t,e,n),Math.atan2(o.dot(t,i),o.dot(e,n))}}(),c=function(){var t=o.create();return function(e,n){return o.copy(t,n),Math.abs(n[0])<Math.abs(n[1])?Math.abs(n[0])<Math.abs(n[2])?t[0]+=1:t[2]+=1:Math.abs(n[1])<Math.abs(n[2])?t[1]+=1:t[2]+=1,o.cross(e,n,t)}}(),h=function(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[0],a=e[1],s=e[2],u=o*o,l=o*a,c=o*s,h=a*a,f=a*s,d=s*s;return t[0]=u+r-u*r,t[1]=l-r*l-i*s,t[2]=c-r*c+i*a,t[3]=l-r*l+i*s,t[4]=h+r-r*h,t[5]=f-r*f-i*o,t[6]=c-r*c-i*a,t[7]=f-r*f+i*o,t[8]=d+r-r*d,t},f=function(){var t=o.create();return function(e,n,i,r,a,s,u){var l=s*s,c=3-2*s,h=l*c,f=1-h,d=l*(s-2)+s,p=l*(s-1);o.copy(t,n),o.scale(t,t,f),o.scaleAndAdd(t,t,i,d),o.scaleAndAdd(t,t,r,h),o.scaleAndAdd(t,t,a,p),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2]}}(),d=function(){var t=s.create(),e=s.create(),n=s.create(),i=s.create(),r=u.create(),l=o.create(),c=o.create();return function(h){for(var f=24,d=u.fromValues(0,0,0,1),p=0;f>p;++p){s.fromQuat(t,d);var v=s.transpose(n,t);s.mul(e,t,s.mul(i,h,v)),o.set(l,e[5],e[2],e[1]),o.set(c,Math.abs(l[0]),Math.abs(l[1]),Math.abs(l[2]));var g=c[0]>c[1]&&c[0]>c[2]?0:c[1]>c[2]?1:2,m=(g+1)%3,_=(g+2)%3;if(0===l[g])break;var y=(e[3*_+_]-e[3*m+m])/(2*l[g]),b=y>0?1:-1;y*=b;var w=y+(1e6>y?Math.sqrt(y*y+1):y),x=b/w,C=1/Math.sqrt(x*x+1);if(1===C)break;if(a.set(r,0,0,0,0),r[g]=b*Math.sqrt((1-C)/2),r[g]*=-1,r[3]=Math.sqrt(1-r[g]*r[g]),1===r[3])break;d=u.mul(d,d,r),u.normalize(d,d)}return d}}();i.prototype.center=function(){return this._U},i.prototype.radius=function(){return this._dP};var p=function(){return function(t,e,n,i,r){r?o.cross(i,e,n):c(i,e),o.cross(n,i,e),o.normalize(i,i),o.normalize(n,n),t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=i[0],t[4]=i[1],t[5]=i[2],t[6]=e[0],t[7]=e[1],t[8]=e[2]}}();return{signedAngle:l,axisRotation:h,ortho:c,diagonalizer:d,catmullRomSpline:n,cubicHermiteInterpolate:f,interpolateScalars:r,catmullRomSplineNumPoints:e,Sphere:i,buildRotation:p}}(),f=function(){function e(t,e){this._f=e,this._b2=t,this._h=new Uint16Array(3*e*t*2),this._n=new Float32Array(3*e*t);var n,i,r=Math.PI/(t-1),o=2*Math.PI/e;for(n=0;n<this._b2;++n){var a=Math.sin(n*r),s=Math.cos(n*r);for(i=0;i<this._f;++i){var u=a*Math.cos(i*o),l=a*Math.sin(i*o);this._n[3*(i+n*this._f)]=u,this._n[3*(i+n*this._f)+1]=l,this._n[3*(i+n*this._f)+2]=s}}var c=0;for(n=0;n<this._b2-1;++n)for(i=0;i<this._f;++i)this._h[c]=n*this._f+i,this._h[c+1]=n*this._f+(i+1)%this._f,this._h[c+2]=(n+1)*this._f+i,c+=3,this._h[c]=n*this._f+(i+1)%this._f,this._h[c+1]=(n+1)*this._f+(i+1)%this._f,this._h[c+2]=(n+1)*this._f+i,c+=3}function n(t,e,n){var i=h.catmullRomSpline(t,t.length/3,e,n,!0);this._h=new Uint16Array(2*i.length),this._n=i,this._H=new Float32Array(i.length),this._f=i.length/3;for(var o=r.create(),a=0;a<this._f;++a){var s=0===a?this._f-1:a-1,u=a===this._f-1?0:a+1;o[0]=this._n[3*u+1]-this._n[3*s+1],o[1]=this._n[3*s]-this._n[3*u],r.normalize(o,o),this._H[3*a]=o[0],this._H[3*a+1]=o[1],this._H[3*a+2]=o[2]}for(a=0;a<this._f;++a)this._h[6*a]=a,this._h[6*a+1]=a+this._f,this._h[6*a+2]=(a+1)%this._f+this._f,this._h[6*a+3]=a,this._h[6*a+4]=(a+1)%this._f+this._f,this._h[6*a+5]=(a+1)%this._f}function i(t){this._f=t,this._h=new Uint16Array(3*t*2),this._n=new Float32Array(3*t*2),this._H=new Float32Array(3*t*2);for(var e=2*Math.PI/this._f,n=0;n<this._f;++n){var i=Math.cos(e*n),r=Math.sin(e*n);this._n[3*n]=i,this._n[3*n+1]=r,this._n[3*n+2]=-.5,this._n[3*t+3*n]=i,this._n[3*t+3*n+1]=r,this._n[3*t+3*n+2]=.5,this._H[3*n]=i,this._H[3*n+1]=r,this._H[3*t+3*n]=i,this._H[3*t+3*n+1]=r}for(n=0;n<this._f;++n)this._h[6*n]=n%this._f,this._h[6*n+1]=t+(n+1)%this._f,this._h[6*n+2]=(n+1)%this._f,this._h[6*n+3]=n%this._f,this._h[6*n+4]=t+n%this._f,this._h[6*n+5]=t+(n+1)%this._f}var r=t.vec3;return e.prototype={addTransformed:function(){var t=r.create(),e=r.create();return function(n,i,o,a,s){for(var u=n.numVerts(),l=0;l<this._b2*this._f;++l)r.set(e,this._n[3*l],this._n[3*l+1],this._n[3*l+2]),r.copy(t,e),r.scale(t,t,o),r.add(t,t,i),n.addVertex(t,e,a,s);for(l=0;l<this._h.length/3;++l)n.addTriangle(u+this._h[3*l],u+this._h[3*l+1],u+this._h[3*l+2])}}(),numIndices:function(){return this._h.length},numVerts:function(){return this._n.length/3}},n.prototype={addTransformed:function(){var t=r.create(),e=r.create();return function(n,i,o,a,s,u,l,c){for(var h=this._f,f=this._H,d=this._n,p=n.numVerts()-h,v=0;h>v;++v)r.set(t,o*d[3*v],o*d[3*v+1],0),r.transformMat3(t,t,a),r.add(t,t,i),r.set(e,f[3*v],f[3*v+1],0),r.transformMat3(e,e,a),n.addVertex(t,e,s,c);if(!u)if(0!==l)for(v=0;h>v;++v)n.addTriangle(p+(v+l)%h,p+v+h,p+(v+1)%h+h),n.addTriangle(p+(v+l)%h,p+(v+1)%h+h,p+(v+1+l)%h);else for(v=0;v<this._h.length/3;++v)n.addTriangle(p+this._h[3*v],p+this._h[3*v+1],p+this._h[3*v+2])}}()},i.prototype={numVerts:function(){return this._n.length/3},numIndices:function(){return this._h.length},addTransformed:function(){var t=r.create(),e=r.create();return function(n,i,o,a,s,u,l,c,h){for(var f=n.numVerts(),d=this._n,p=this._H,v=this._f,g=0;2*v>g;++g){r.set(t,a*d[3*g],a*d[3*g+1],o*d[3*g+2]),r.transformMat3(t,t,s),r.add(t,t,i),r.set(e,p[3*g],p[3*g+1],p[3*g+2]),r.transformMat3(e,e,s);var m=v>g?c:h;n.addVertex(t,e,v>g?u:l,m)}var _=this._h;for(g=0;g<_.length/3;++g)n.addTriangle(f+_[3*g],f+_[3*g+1],f+_[3*g+2])}}()},{TubeProfile:n,ProtoCylinder:i,ProtoSphere:e}}(),d=H=function(){function t(t){this._bE=[],this._P=!0,this._I=name||"",this._b=t,this._cb=1}return t.prototype={order:function(t){return void 0!==t&&(this._cb=t),this._cb},add:function(t){this._bE.push(t)},draw:function(t,e,n,i){for(var r=0,o=this._bE.length;r!==o;++r)this._bE[r].draw(t,e,n,i)},show:function(){this._P=!0},hide:function(){this._P=!1},name:function(t){return void 0!==t&&(this._I=t),this._I},destroy:function(){for(var t=0;t<this._bE.length;++t)this._bE[t].destroy()},visible:function(){return this._P}},t}(),p=U=function(){function e(t,e){t.eachResidue(function(t){var n=t.centralAtom();null!==n&&e(n,n.pos())})}function n(t){H.call(this,t),this._3=[],this._M=[],this._cL=null,this._bK=null}var r=t.vec3,o=function(){var t=r.create();return function(e,n,i){for(var o=0;o<n.length;++o)for(var a=n[o],s=e.chainsByName(a.chains()),u=0;u<a.matrices().length;++u)for(var l=a.matrix(u),c=0;c<s.length;++c)for(var h=s[c],f=0;f<h.residues().length;++f){var d=h.residues()[f].centralAtom();null!==d&&(r.transformMat4(t,d.pos(),l),i(d,t))}}}();return i.derive(n,H,{setShowRelated:function(t){return t&&"asym"!==t&&null===this.structure().assembly(t)?void 0:(this._cL=t,t)},symWithIndex:function(t){if("asym"===this.showRelated())return null;var e=this.structure().assembly(this.showRelated());if(!e)return null;for(var n=e.generators(),i=0;i<n.length;++i){if(n[i].matrices().length>t)return n[i].matrix(t);t-=n[i].matrices().length}return null},showRelated:function(){return this._cL},select:function(t){return this.structure().select(t)},structure:function(){return this._M[0]._i},getColorForAtom:function(t,e){return this._M[0].getColorForAtom(t,e)},addIdRange:function(t){this._3.push(t)},destroy:function(){H.prototype.destroy.call(this);for(var t=0;t<this._3.length;++t)this._3[t].recycle()},eachCentralAtom:function(t){var n=this,i=n.structure(),r=i.assembly(n.showRelated());return null===r?e(i,t):o(i,r.generators(),t)},addVertAssoc:function(t){this._M.push(t)},_b0:function(t){for(var e=this.vertArrays(),n=[],i={},r=0;r<t.length;++r)i[t[r]]=!0;for(var o=0;o<e.length;++o)i[e[o].chain()]===!0&&n.push(e[o]);return n},_em:function(t,e,n){for(var i=n.generators(),r=0;r<i.length;++r){var o=i[r],a=this._b0(o.chains());this._cu(t,e,a,o.matrices())}},_dD:function(t,e,n,i,r,o){for(var a=this.vertArrays(),s=0;s<a.length;++s)a[s].updateProjectionIntervals(t,e,n,i,r,o)},updateProjectionIntervals:function(t,e,n,i,r,o){if(this._P){var a=this.showRelated();if("asym"===a)return this._dD(t,e,n,i,r,o);for(var s=this.structure().assembly(a),u=s.generators(),l=0;l<u.length;++l)for(var c=u[l],h=this._b0(c.chains()),f=0;f<c.matrices().length;++f)for(var d=0;d<h.length;++d){var p=c.matrix(f);h[d].updateProjectionIntervals(t,e,n,i,r,o,p)}}},_dC:function(t,e){for(var n=this.vertArrays(),i=0;i<n.length;++i)e=n[i].updateSquaredSphereRadius(t,e);return e},updateSquaredSphereRadius:function(t,e){if(!this._P)return e;var n=this.showRelated();if("asym"===n)return this._dC(t,e);for(var i=this.structure().assembly(n),r=i.generators(),o=0;o<r.length;++o)for(var a=r[o],s=this._b0(a.chains()),u=0;u<a.matrices().length;++u)for(var l=0;l<s.length;++l)e=s[l].updateSquaredSphereRadius(t,e);return e},draw:function(t,e,n,i){if(this._P){var r=this.shaderForStyleAndPass(e,n,i);if(r){var o=this.showRelated();if("asym"===o)return this._cu(t,r,this.vertArrays(),null);var a=this.structure().assembly(o);return this._em(t,r,a)}}},colorBy:function(t,e){this._p=!1,e=e||this.structure();for(var n=0;n<this._M.length;++n)this._M[n].recolor(t,e)},setOpacity:function(t,e){this._p=!1,e=e||this.structure();for(var n=0;n<this._M.length;++n)this._M[n].setOpacity(t,e)},setSelection:function(t){this._bK=t,this._p=!1;for(var e=0;e<this._M.length;++e)this._M[e].setSelection(t)},selection:function(){return null===this._bK&&(this._bK=this.structure().createEmptyView()),this._bK}}),n}(),v=B=function(){function e(t,e,n){this._b=t,this._cE=t.createBuffer(),this._B=n||null,this._p=!1,this._bV=null;var i=this._t*e;this._e=n.request(i)}var n=t.vec3;return e.prototype={setColor:function(t,e,n,i,r){var o=t*this._t+this._bG;this._e[o+0]=e,this._e[o+1]=n,this._e[o+2]=i,this._e[o+3]=r,this._p=!1},getColor:function(t,e){var n=t*this._t+this._bG;return e[0]=this._e[n+0],e[1]=this._e[n+1],e[2]=this._e[n+2],e[3]=this._e[n+3],e},setOpacity:function(t,e){var n=t*this._t+this._bG;this._e[n+3]=e,this._p=!1},setSelected:function(t,e){var n=t*this._t+this._cC;this._e[n]=e,this._p=!1},boundingSphere:function(){return this._bV||(this._bV=this._et()),this._bV},_et:function(){var t=this.numVerts();if(0===t)return null;var e,i,r=n.create();for(i=0;t>i;++i)e=i*this._t,r[0]+=this._e[e+0],r[1]+=this._e[e+1],r[2]+=this._e[e+2];n.scale(r,r,1/t);var o=0;for(i=0;t>i;++i){e=i*this._t;var a=r[0]-this._e[e+0],s=r[1]-this._e[e+1],u=r[2]-this._e[e+2];o=Math.max(o,a*a+s*s+u*u)}return new h.Sphere(r,Math.sqrt(o))},destroy:function(){this._b.deleteBuffer(this._cE),this._B.release(this._e)},bindBuffers:function(){this._b.bindBuffer(this._b.ARRAY_BUFFER,this._cE),this._p||(this._b.bufferData(this._b.ARRAY_BUFFER,this._e,this._b.STATIC_DRAW),this._p=!0)},updateSquaredSphereRadius:function(){var t=n.create();return function(e,i,r){var o=this.boundingSphere();if(!o)return i;if(r)return n.transformMat4(t,o.center(),r),Math.max(n.sqrDist(t,e),i);var a=o.radius()*o.radius();return Math.max(n.sqrDist(o.center(),e)+a,i)}}(),updateProjectionIntervals:function(){var t=n.create();return function(e,i,r,o,a,s,u){var l=this.boundingSphere();if(l){u?n.transformMat4(t,l.center(),u):n.copy(t,l.center());var c=n.dot(e,t),h=n.dot(i,t),f=n.dot(r,t);o.update(c-l.radius()),o.update(c+l.radius()),a.update(h-l.radius()),a.update(h+l.radius()),s.update(f-l.radius()),s.update(f+l.radius())}}}()},e}(),g=function(){function t(t,e,n){B.call(this,t,e,n),this._x=0,this._cT=this._b.LINES}return i.derive(t,B,{_t:9,_dz:0,_bG:3,_eE:7,_cC:8,numVerts:function(){return this._x},setDrawAsPoints:function(t){this._cT=t?this._b.POINTS:this._b.LINES},addPoint:function(t,e,n){var i=this._t*this._x;this._e[i++]=t[0],this._e[i++]=t[1],this._e[i++]=t[2],this._e[i++]=e[0],this._e[i++]=e[1],this._e[i++]=e[2],this._e[i++]=e[3],this._e[i++]=n,this._e[i++]=0,this._x+=1,this._p=!1,this._bV=null},addLine:function(t,e,n,i,r,o){this.addPoint(t,e,r),this.addPoint(n,i,o)},bindAttribs:function(t){this._b.vertexAttribPointer(t.posAttrib,3,this._b.FLOAT,!1,4*this._t,4*this._dz),-1!==t.colorAttrib&&(this._b.vertexAttribPointer(t.colorAttrib,4,this._b.FLOAT,!1,4*this._t,4*this._bG),this._b.enableVertexAttribArray(t.colorAttrib)),this._b.enableVertexAttribArray(t.posAttrib),
-1!==t.objIdAttrib&&(this._b.vertexAttribPointer(t.objIdAttrib,1,this._b.FLOAT,!1,4*this._t,4*this._eE),this._b.enableVertexAttribArray(t.objIdAttrib)),-1!==t.selectAttrib&&(this._b.vertexAttribPointer(t.selectAttrib,1,this._b.FLOAT,!1,4*this._t,4*this._cC),this._b.enableVertexAttribArray(t.selectAttrib))},releaseAttribs:function(t){this._b.disableVertexAttribArray(t.posAttrib),-1!==t.colorAttrib&&this._b.disableVertexAttribArray(t.colorAttrib),-1!==t.objIdAttrib&&this._b.disableVertexAttribArray(t.objIdAttrib),-1!==t.selectAttrib&&this._b.disableVertexAttribArray(t.selectAttrib)},bind:function(t){this.bindBuffers(),this.bindAttribs(t)},draw:function(){this._b.drawArrays(this._cT,0,this._x)}}),t}(),m=V=function(){function t(t,e,n,i,r){B.call(this,t,e,i),this._de=t.createBuffer(),this._G=r,this._x=0,this._c7=e,this._bw=0,this._D=r.request(n)}return i.derive(t,B,{destroy:function(){B.prototype.destroy.call(this),this._b.deleteBuffer(this._de),this._G.release(this._D)},setIndexData:function(t){this._p=!1,this._bw=t.length/3;for(var e=0;e<t.length;++e)this._D[e]=t[e]},setVertData:function(t){this._p=!1,this._x=t.length/this._t;for(var e=0;e<t.length;++e)this._e[e]=t[e]},numVerts:function(){return this._x},maxVerts:function(){return this._c7},numIndices:function(){return 3*this._bw},addVertex:function(t,e,n,i){if(this._x!==this._c7){var r=this._x*this._t;this._e[r++]=t[0],this._e[r++]=t[1],this._e[r++]=t[2],this._e[r++]=e[0],this._e[r++]=e[1],this._e[r++]=e[2],this._e[r++]=n[0],this._e[r++]=n[1],this._e[r++]=n[2],this._e[r++]=n[3],this._e[r++]=i,this._e[r++]=0,this._x+=1,this._p=!1}},_t:12,_eG:48,_eM:10,_eC:40,_cC:11,_eA:44,_bG:6,_eF:24,_eN:3,_eD:12,_dz:0,_eB:0,addTriangle:function(t,e,n){var i=3*this._bw;i+2>=this._D.length||(this._D[i++]=t,this._D[i++]=e,this._D[i++]=n,this._bw+=1,this._p=!1)},bindBuffers:function(){var t=this._p,e=this._b;B.prototype.bindBuffers.call(this),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._de),t||e.bufferData(e.ELEMENT_ARRAY_BUFFER,this._D,e.STATIC_DRAW)},bindAttribs:function(t){var e=this._b,n=this._eG;e.enableVertexAttribArray(t.posAttrib),e.vertexAttribPointer(t.posAttrib,3,e.FLOAT,!1,n,this._eB),-1!==t.normalAttrib&&(e.enableVertexAttribArray(t.normalAttrib),e.vertexAttribPointer(t.normalAttrib,3,e.FLOAT,!1,n,this._eD)),-1!==t.colorAttrib&&(e.vertexAttribPointer(t.colorAttrib,4,e.FLOAT,!1,n,this._eF),e.enableVertexAttribArray(t.colorAttrib)),-1!==t.objIdAttrib&&(e.vertexAttribPointer(t.objIdAttrib,1,e.FLOAT,!1,n,this._eC),e.enableVertexAttribArray(t.objIdAttrib)),-1!==t.selectAttrib&&(e.vertexAttribPointer(t.selectAttrib,1,e.FLOAT,!1,n,this._eA),e.enableVertexAttribArray(t.selectAttrib))},releaseAttribs:function(t){var e=this._b;e.disableVertexAttribArray(t.posAttrib),-1!==t.colorAttrib&&e.disableVertexAttribArray(t.colorAttrib),-1!==t.normalAttrib&&e.disableVertexAttribArray(t.normalAttrib),-1!==t.objIdAttrib&&e.disableVertexAttribArray(t.objIdAttrib),-1!==t.selectAttrib&&e.disableVertexAttribArray(t.selectAttrib)},bind:function(t){this.bindBuffers(),this.bindAttribs(t)},draw:function(){var t=this._b;t.drawElements(t.TRIANGLES,3*this._bw,t.UNSIGNED_SHORT,0)}}),t}(),_=function(t){function e(e,n,i,r){t.call(this,n,i,r),this._J=e}function n(t,e,n,i,r,o){V.call(this,e,n,i,r,o),this._J=t}return i.derive(e,t,{chain:function(){return this._J},drawSymmetryRelated:function(t,e,n){this.bind(e);for(var i=0;i<n.length;++i)t.bind(e,n[i]),this._b.uniform1i(e.symId,i),this.draw();this.releaseAttribs(e)}}),i.derive(n,V,{chain:function(){return this._J}}),n.prototype.drawSymmetryRelated=e.prototype.drawSymmetryRelated,{LineChainData:e,MeshChainData:n}}(g),y=function(t,e){function n(t,e,n){U.call(this,t),this._z=[],this._B=e,this._G=n,this._bL=null,this._bt=null}var r=t.MeshChainData;return i.derive(n,U,{_cz:function(t){return Math.min(65536,t)},addChainVertArray:function(t,e,n){this._bL=e,this._bt=n;var i=new r(t.name(),this._b,this._cz(e),n,this._B,this._G);return this._z.push(i),i},addVertArray:function(t,n){this._bL=t,this._bt=n;var i=new e(this._b,this._cz(t),n,this._B,this._G);return this._z.push(i),i},vertArrayWithSpaceFor:function(t){var n=this._z[this._z.length-1],i=n.maxVerts()-n.numVerts();if(i>=t)return n;this._bL-=n.numVerts(),this._bt-=n.numIndices(),t=this._cz(this._bL);var o=null;return o=n instanceof r?new r(n.chain(),this._b,t,this._bt,this._B,this._G):new e(this._b,t,this._bt,this._B,this._G),this._z.push(o),o},vertArray:function(t){return this._z[t]},destroy:function(){U.prototype.destroy.call(this);for(var t=0;t<this._z.length;++t)this._z[t].destroy();this._z=[]},numVerts:function(){return this._z[0].numVerts()},shaderForStyleAndPass:function(t,e,n){if("normal"===n)return"hemilight"===e?t.hemilight:t.phong;if("select"===n)return t.select;if("outline"===n)return t.outline;var i=t[n];return void 0!==i?i:null},_cu:function(t,e,n,i){var r;if(i)for(r=0;r<n.length;++r)n[r].drawSymmetryRelated(t,e,i);else for(t.bind(e),this._b.uniform1i(e.symId,255),r=0;r<n.length;++r)n[r].bind(e),n[r].draw(),n[r].releaseAttribs(e)},vertArrays:function(){return this._z},addVertex:function(t,e,n,i){var r=this._z[0];r.addVertex(t,e,n,i)},addTriangle:function(t,e,n){var i=this._z[0];i.addTriangle(t,e,n)}}),n}(_,m),b=function(t){function e(t,e){U.call(this,t),this._bo=[],this._B=e,this._ce=.5,this._b8=1}var n=t.LineChainData;return i.derive(e,U,{addChainVertArray:function(t,e){var i=new n(t.name(),this._b,e,this._B);return this._bo.push(i),i},setLineWidth:function(t){this._ce=t},setPointSize:function(t){this._b8=t},vertArrays:function(){return this._bo},shaderForStyleAndPass:function(t,e,n){return"outline"===n?t.selectLines:"select"===n?t.select:t.lines},destroy:function(){U.prototype.destroy.call(this);for(var t=0;t<this._bo.length;++t)this._bo[t].destroy();this._bo=[]},_cu:function(t,e,n,i){var r=t.upsamplingFactor();-1!==e.selectAttrib&&(r=4*t.upsamplingFactor());var o;if(i)for(t.bind(e),this._b.lineWidth(r*this._ce),e.pointSize&&this._b.uniform1f(e.pointSize,r*this._b8),o=0;o<n.length;++o)n[o].drawSymmetryRelated(t,e,i);else for(t.bind(e),this._b.lineWidth(r*this._ce),this._b.uniform1i(e.symId,255),e.pointSize&&this._b.uniform1f(e.pointSize,r*this._b8),o=0;o<n.length;++o)n[o].bind(e),n[o].draw(),n[o].releaseAttribs(e)},vertArray:function(){return this._W}}),e}(_),w=function(){function t(t,e){this._i=t,this._s=[],this._bF=e}function n(t,e,n){this._i=t,this._s=[],this._bF=n,this._bf=e||1,this._bv={}}return t.prototype={addAssoc:function(t,e,n,i){this._s.push({atom:t,vertexArray:e,vertStart:n,vertEnd:i})},recolor:function(t,e){var n=new Float32Array(4*e.atomCount());this._bF&&t.begin(this._i);var i={};e.eachAtom(function(e,r){i[e.index()]=r,t.colorFor(e,n,4*r)}),this._bF&&t.end(this._i);for(var r=0;r<this._s.length;++r){var o=this._s[r],a=i[o.atom.index()];if(void 0!==a)for(var s=n[4*a+0],u=n[4*a+1],l=n[4*a+2],c=n[4*a+3],h=o.vertexArray,f=o.vertStart;f<o.vertEnd;++f)h.setColor(f,s,u,l,c)}},getColorForAtom:function(t,e){for(var n=0;n<this._s.length;++n){var i=this._s[n];if(i.atom.full()===t.full())return i.vertexArray.getColor(i.vertStart,e)}return null},setSelection:function(t){var e={};t.eachAtom(function(t){e[t.index()]=!0});for(var n=0;n<this._s.length;++n)for(var i=this._s[n],r=e[i.atom.index()],o=r!==!0?0:1,a=i.vertexArray,s=i.vertStart;s<i.vertEnd;++s)a.setSelected(s,o)},setOpacity:function(t,e){var n={};e.eachAtom(function(t){n[t.index()]=!0});for(var i=0;i<this._s.length;++i){var r=this._s[i],o=n[r.atom.index()];if(o===!0)for(var a=r.vertexArray,s=r.vertStart;s<r.vertEnd;++s)a.setOpacity(s,t)}}},n.prototype={setPerResidueColors:function(t,e){this._bv[t]=e},addAssoc:function(t,e,n,i,r){this._s.push({traceIndex:t,slice:n,vertStart:i,vertEnd:r,vertexArray:e})},recolor:function(t,n){this._bF&&t.begin(this._i);var i,r,o=[],a=this._i.backboneTraces();for(i=0;i<a.length;++i){var s=this._bv[i],u=0,l=a[i];for(r=0;r<l.length();++r)n.containsResidue(l.residueAt(r))?(t.colorFor(l.centralAtomAt(r),s,u),u+=4):u+=4;o.push(this._bf>1?e.interpolateColor(s,this._bf):s)}for(i=0;i<this._s.length;++i){var c=this._s[i],h=c.slice,f=o[c.traceIndex],d=f[4*h],p=f[4*h+1],v=f[4*h+2],g=f[4*h+3],m=c.vertexArray;for(r=c.vertStart;r<c.vertEnd;++r)m.setColor(r,d,p,v,g)}this._bF&&t.end(this._i)},getColorForAtom:function(t,e){var n,i,r=this._i.backboneTraces(),o=t.full().residue();for(n=0;n<r.length;++n){var a=this._bv[n],s=0,u=r[n];for(i=0;i<u.length();++i){if(o===u.residueAt(i).full())return e[0]=a[s+0],e[1]=a[s+1],e[2]=a[s+2],e[3]=a[s+3],e;s+=4}}return null},setSelection:function(t){var e,n,i=[],r=this._i.backboneTraces();for(e=0;e<r.length;++e){var o=new Float32Array(this._bv[e].length),a=0,s=r[e];for(n=0;n<s.length();++n){var u=t.containsResidue(s.residueAt(n))?1:0;o[a]=u,a+=1}i.push(this._bf>1?h.interpolateScalars(o,this._bf):o)}for(e=0;e<this._s.length;++e){var l=this._s[e],c=l.slice,f=i[l.traceIndex],d=f[c],p=l.vertexArray;for(n=l.vertStart;n<l.vertEnd;++n)p.setSelected(n,d)}},setOpacity:function(t,n){var i,r,o=[],a=this._i.backboneTraces();for(i=0;i<a.length;++i){var s=this._bv[i],u=0,l=a[i];for(r=0;r<l.length();++r)n.containsResidue(l.residueAt(r))?(s[u+3]=t,u+=4):u+=4;o.push(this._bf>1?e.interpolateColor(s,this._bf):s)}for(i=0;i<this._s.length;++i){var c=this._s[i],h=c.slice,f=o[c.traceIndex],d=f[4*h+3],p=c.vertexArray;for(r=c.vertStart;r<c.vertEnd;++r)p.setOpacity(r,d)}}},{TraceVertexAssoc:n,AtomVertexAssoc:t}}(),x=function(n,i,r,o){function a(t,e,n){for(var i=0;n-1>i;++i)t.addTriangle(e,e+1+i,e+2+i);t.addTriangle(e,e+n,e+1)}function s(t,e,n){for(var i=e+n,r=0;n-1>r;++r)t.addTriangle(i,e+r+1,e+r);t.addTriangle(i,e,e+n-1)}var u=t.vec3,l=t.vec4,c=t.mat3,f=n.TubeProfile,d=n.ProtoSphere,p=n.ProtoCylinder,v=o.TraceVertexAssoc,g=o.AtomVertexAssoc,m=e.interpolateColor,_={},y=.7071,b=[-y,-y,0,y,-y,0,y,y,0,-y,y,0],w=[-6*y,-.9*y,0,-5.8*y,-1*y,0,5.8*y,-1*y,0,6*y,-.9*y,0,6*y,.9*y,0,5.8*y,1*y,0,-5.8*y,1*y,0,-6*y,.9*y,0],x=[-10*y,-.9*y,0,-9.8*y,-1*y,0,9.8*y,-1*y,0,10*y,-.9*y,0,10*y,.9*y,0,9.8*y,1*y,0,-9.8*y,1*y,0,-10*y,.9*y,0],C=function(){var t=u.create(),e=u.create(),n=u.create();return function(i,r,o,a){r=Math.max(r,1),o=Math.min(a-1,o);var s=3*(r-1);u.set(t,i[s],i[s+1],i[s+2]),u.set(n,i[3*r],i[3*r+1],i[3*r+2]);for(var l=r;o>l;++l)s=3*(l+1),u.set(e,i[s],i[s+1],i[s+2]),i[3*l+0]=.25*e[0]+.5*n[0]+.25*t[0],i[3*l+1]=.25*e[1]+.5*n[1]+.25*t[1],i[3*l+2]=.25*e[2]+.5*n[2]+.25*t[2],u.copy(t,n),u.copy(n,e)}}(),A=function(){var t=l.fromValues(0,0,0,1);return function(e,n,i,r){var o=r.atomCount(),a=i.idPool.getContinuousRange(o);e.addIdRange(a);var s=i.protoSphere.numVerts(),u=i.protoSphere.numIndices(),l=1.5*i.radiusMultiplier;e.addChainVertArray(r,s*o,u*o),r.eachAtom(function(r){var o=e.vertArrayWithSpaceFor(s);i.color.colorFor(r,t,0);var u=o.numVerts(),c=a.nextId({geom:e,atom:r});i.protoSphere.addTransformed(o,r.pos(),l,t,c);var h=o.numVerts();n.addAssoc(r,o,u,h)})}}();_.spheres=function(t,e,n){var r=new d(n.sphereDetail,n.sphereDetail);n.protoSphere=r;var o=new i(e,n.float32Allocator,n.uint16Allocator),a=new g(t,!0);return o.addVertAssoc(a),o.setShowRelated(n.showRelated),n.color.begin(t),t.eachChain(function(t){A(o,a,n,t)}),n.color.end(t),o};var M=function(){var t=u.create(),e=u.create(),n=l.fromValues(0,0,0,1),i=u.create(),r=u.create(),o=c.create();return function(a,s,l,c){var f=c.atomCount(),d=0;c.eachAtom(function(t){d+=t.bonds().length});var p=f*l.protoSphere.numVerts()+d*l.protoCyl.numVerts(),v=f*l.protoSphere.numIndices()+d*l.protoCyl.numIndices();a.addChainVertArray(c,p,v);var g=l.idPool.getContinuousRange(f);a.addIdRange(g),c.eachAtom(function(c){var f=l.protoSphere.numVerts()+c.bondCount()*l.protoCyl.numVerts(),d=a.vertArrayWithSpaceFor(f),p=d.numVerts(),v=g.nextId({geom:a,atom:c});l.color.colorFor(c,n,0),l.protoSphere.addTransformed(d,c.pos(),l.radius,n,v),c.eachBond(function(a){a.mid_point(t),u.sub(e,c.pos(),t);var s=u.length(e);u.scale(e,e,1/s),h.buildRotation(o,e,i,r,!1),u.add(t,t,c.pos()),u.scale(t,t,.5),l.protoCyl.addTransformed(d,t,s,l.radius,o,n,n,v,v)});var m=d.numVerts();s.addAssoc(c,d,p,m)})}}();_.ballsAndSticks=function(t,e,n){var r=new g(t,!0),o=new d(n.sphereDetail,n.sphereDetail),a=new p(n.arcDetail);n.protoSphere=o,n.protoCyl=a;var s=new i(e,n.float32Allocator,n.uint16Allocator);return s.addVertAssoc(r),s.setShowRelated(n.showRelated),n.color.begin(t),t.eachChain(function(t){M(s,r,n,t)}),n.color.end(t),s};var k=function(){var t=l.fromValues(0,0,0,1);return function(e,n,i,r){var o=i.atomCount(),a=r.idPool.getContinuousRange(o);e.addIdRange(a);var s=e.addChainVertArray(i,o);s.setDrawAsPoints(!0),i.eachAtom(function(i){var o=s.numVerts();r.color.colorFor(i,t,0);var u=a.nextId({geom:e,atom:i});s.addPoint(i.pos(),t,u);var l=s.numVerts();n.addAssoc(i,s,o,l)})}}();_.points=function(t,e,n){var i=new g(t,!0);n.color.begin(t);var o=new r(e,n.float32Allocator);return o.setPointSize(n.pointSize),o.addVertAssoc(i),o.setShowRelated(n.showRelated),t.eachChain(function(t){k(o,i,t,n)}),n.color.end(t),o};var E=function(){var t=u.create(),e=l.fromValues(0,0,0,1);return function(n,i,r,o){var a=0,s=r.atomCount(),u=o.idPool.getContinuousRange(s);n.addIdRange(u),r.eachAtom(function(t){var e=t.bonds().length;a+=e?e:3});var l=n.addChainVertArray(r,2*a);r.eachAtom(function(r){var a=l.numVerts(),s=u.nextId({geom:n,atom:r});if(r.bonds().length)r.eachBond(function(n){n.mid_point(t),o.color.colorFor(r,e,0),l.addLine(r.pos(),e,t,e,s,s)});else{var c=.2,h=r.pos();o.color.colorFor(r,e,0),l.addLine([h[0]-c,h[1],h[2]],e,[h[0]+c,h[1],h[2]],e,s,s),l.addLine([h[0],h[1]-c,h[2]],e,[h[0],h[1]+c,h[2]],e,s,s),l.addLine([h[0],h[1],h[2]-c],e,[h[0],h[1],h[2]+c],e,s,s)}var f=l.numVerts();i.addAssoc(r,l,a,f)})}}();_.lines=function(t,e,n){var i=new g(t,!0);n.color.begin(t);var o=new r(e,n.float32Allocator);return o.setLineWidth(n.lineWidth),o.addVertAssoc(i),o.setShowRelated(n.showRelated),t.eachChain(function(t){E(o,i,t,n)}),n.color.end(t),o};var S=function(t){for(var e=0,n=0;n<t.length;++n)e+=2*(t[n].length()-1);return e},T=function(){var t=l.fromValues(0,0,0,1),e=l.fromValues(0,0,0,1),n=u.create(),i=u.create();return function(r,o,a,s,u,l){o.addAssoc(s,a,0,a.numVerts(),a.numVerts()+1);var c=l.float32Allocator.request(4*u.length()),h=l.idPool.getContinuousRange(u.length());r.addIdRange(h);for(var f,d=h.nextId({geom:r,atom:u.centralAtomAt(0)}),p=1;p<u.length();++p){l.color.colorFor(u.centralAtomAt(p-1),t,0),c[4*(p-1)+0]=t[0],c[4*(p-1)+1]=t[1],c[4*(p-1)+2]=t[2],c[4*(p-1)+3]=t[3],l.color.colorFor(u.centralAtomAt(p),e,0),u.posAt(n,p-1),u.posAt(i,p),f=h.nextId({geom:r,atom:u.centralAtomAt(p)}),a.addLine(n,t,i,e,d,f),d=f,f=null;var v=a.numVerts();o.addAssoc(s,a,p,v-1,v+(p===u.length()-1?0:1))}return c[4*u.length()-4]=e[0],c[4*u.length()-3]=e[1],c[4*u.length()-2]=e[2],c[4*u.length()-1]=e[3],o.setPerResidueColors(s,c),s+1}}(),F=function(t,e,n,i,r){for(var o=r.backboneTraces(),a=S(o),s=t.addChainVertArray(r,a),u=0;u<o.length;++u)i=T(t,e,s,i,o[u],n);return i};_.lineTrace=function(t,e,n){var i=new v(t,1,!0);n.color.begin(t);var o=new r(e,n.float32Allocator);o.setLineWidth(n.lineWidth);var a=0;return t.eachChain(function(t){a=F(o,i,n,a,t)}),o.addVertAssoc(i),o.setShowRelated(n.showRelated),n.color.end(t),o};var R=function(t,e){for(var n=0,i=0;i<t.length;++i)n+=2*(e*(t[i].length()-1)+1);return n},N=function(){var t=u.create(),e=u.create(),n=l.fromValues(0,0,0,1),i=l.fromValues(0,0,0,1);return function(r,o,a,s,u,l){var c,f=l.fullTraceIndex(0),d=s.float32Allocator.request(3*l.length()),p=s.float32Allocator.request(4*l.length()),v=[],g=s.idPool.getContinuousRange(l.length());for(r.addIdRange(g),c=0;c<l.length();++c){var _=l.centralAtomAt(c);l.smoothPosAt(t,c,s.strength),s.color.colorFor(_,p,4*c),d[3*c]=t[0],d[3*c+1]=t[1],d[3*c+2]=t[2],v.push(g.nextId({geom:r,atom:_}))}var y=v[0],b=0,w=h.catmullRomSpline(d,l.length(),s.splineDetail,s.strength,!1,s.float32Allocator),x=m(p,s.splineDetail),C=a.numVerts();o.addAssoc(u,a,f,C,C+1);var A=Math.floor(s.splineDetail/2),M=h.catmullRomSplineNumPoints(l.length(),s.splineDetail,!1);for(c=1;M>c;++c){t[0]=w[3*(c-1)],t[1]=w[3*(c-1)+1],t[2]=w[3*(c-1)+2],e[0]=w[3*(c-0)],e[1]=w[3*(c-0)+1],e[2]=w[3*(c-0)+2],n[0]=x[4*(c-1)+0],n[1]=x[4*(c-1)+1],n[2]=x[4*(c-1)+2],n[3]=x[4*(c-1)+3],i[0]=x[4*(c-0)+0],i[1]=x[4*(c-0)+1],i[2]=x[4*(c-0)+2],i[3]=x[4*(c-0)+3];var k=Math.floor((c+A)/s.splineDetail);b=v[Math.min(v.length-1,k)],a.addLine(t,n,e,i,y,b),y=b;var E=a.numVerts();o.addAssoc(u,a,f+c,E-1,E+(c===l.length-1?0:1))}return o.setPerResidueColors(u,p),s.float32Allocator.release(d),s.float32Allocator.release(w),u+1}}(),D=function(t,e,n,i,r){for(var o=i.backboneTraces(),a=R(o,n.splineDetail),s=t.addChainVertArray(i,a),u=0;u<o.length;++u)r=N(t,e,s,n,r,o[u]);return r};_.sline=function(t,e,n){n.color.begin(t);var i=new v(t,n.splineDetail,1,!0),o=new r(e,n.float32Allocator);o.addVertAssoc(i),o.setLineWidth(n.lineWidth),o.setShowRelated(n.showRelated);var a=0;return t.eachChain(function(t){a=D(o,i,n,t,a)}),n.color.end(t),o};var $=function(t,e,n){for(var i=0,r=0;r<t.length;++r)i+=t[r].length()*e,i+=(t[r].length()-1)*n;return i},z=function(t,e,n){for(var i=0,r=0;r<t.length;++r)i+=t[r].length()*e,i+=(t[r].length()-1)*n;return i},P=function(t,e,n,i,r){var o=r.backboneTraces(),a=$(o,n.protoSphere.numVerts(),n.protoCyl.numVerts()),s=z(o,n.protoSphere.numIndices(),n.protoCyl.numIndices());t.addChainVertArray(r,a,s);for(var u=0;u<o.length;++u)V(t,e,o[u],i,n),i++;return i};_.trace=function(t,e,n){n.protoCyl=new p(n.arcDetail),n.protoSphere=new d(n.sphereDetail,n.sphereDetail);var r=new i(e,n.float32Allocator,n.uint16Allocator),o=new v(t,1,!0);r.addVertAssoc(o),r.setShowRelated(n.showRelated),n.color.begin(t);var a=0;return t.eachChain(function(t){a=P(r,o,n,a,t)}),n.color.end(t),r};var O=function(t,e,n){for(var i=0,r=0;r<t.length;++r){var o=((t[r].length()-1)*n+1)*e,a=Math.ceil((o+2)/65536);i+=o+(a-1)*e,i+=2}return i},L=function(t,e,n){for(var i=0,r=0;r<t.length;++r)i+=(t[r].length()*n-1)*e*6,i+=6*e;return i},I=function(){var t=c.create(),e=u.create(),n=u.create(),i=u.create(),r=u.create(),o=l.create();return function(a,s,l,c){for(var f=1.8*c.radius,d=c.protoCyl.numVerts()+2*c.protoSphere.numVerts(),p=0;p<l.length;++p){var v=l[p],g=c.idPool.getContinuousRange(v.length());a.addIdRange(g);for(var m=0;m<v.length();++m){var _=a.vertArrayWithSpaceFor(d),y=_.numVerts(),b=v.residueAt(m),w=b.name(),x=b.atom("C3'"),C=null;if(C=b.atom("A"===w||"G"===w||"DA"===w||"DG"===w?"N1":"N3"),null!==C&&null!==x){var A=g.nextId({geom:a,atom:C});u.add(r,x.pos(),C.pos()),u.scale(r,r,.5),c.color.colorFor(C,o,0),u.sub(i,C.pos(),x.pos());var M=u.length(i);u.scale(i,i,1/M),h.buildRotation(t,i,n,e,!1),c.protoCyl.addTransformed(_,r,M,f,t,o,o,A,A),c.protoSphere.addTransformed(_,C.pos(),f,o,A),c.protoSphere.addTransformed(_,x.pos(),f,o,A);var k=_.numVerts();s.addAssoc(C,_,y,k)}}}}}(),q=function(t,e,n,i,r,o){for(var a=o.backboneTraces(),s=O(a,4*i.arcDetail,i.splineDetail),u=L(a,4*i.arcDetail,i.splineDetail),l=[],c=i.protoCyl.numVerts()+2*i.protoSphere.numVerts(),h=i.protoCyl.numIndices()+2*i.protoSphere.numIndices(),f=0;f<a.length;++f){var d=a[f];d.residueAt(0).isNucleotide()&&(l.push(d),s+=d.length()*c,u+=d.length()*h)}t.addChainVertArray(o,s,u);for(var p=0;p<a.length;++p)r=B(t,e,a[p],r,i);return I(t,n,l,i),r};_.cartoon=function(t,e,n){n.arrowSkip=Math.floor(3*n.splineDetail/4),n.coilProfile=new f(b,n.arcDetail,1),n.arrowProfile=new f(x,n.arcDetail/2,.1),n.helixProfile=new f(w,n.arcDetail/2,.1),n.strandProfile=new f(w,n.arcDetail/2,.1),n.protoCyl=new p(4*n.arcDetail),n.protoSphere=new d(4*n.arcDetail,4*n.arcDetail);var r=new i(e,n.float32Allocator,n.uint16Allocator),o=new v(t,n.splineDetail,!0);r.addVertAssoc(o),r.setShowRelated(n.showRelated),n.color.begin(t);var a=0,s=t.select({anames:["N1","N3"]}),u=new g(s,!0);return r.addVertAssoc(u),t.eachChain(function(t){a=q(r,o,u,n,a,t)}),n.color.end(t),r},_.surface=function(){var t=u.create(),e=u.create(),n=l.fromValues(.8,.8,.8,1);return function(r,o,a){var s=0;r.getUint32(0),s+=4;var l=r.getUint32(s);s+=4;var c=24,h=c*l+s,f=r.getUint32(h),d=new i(o,a.float32Allocator,a.uint16Allocator);d.setShowRelated("asym");var p,v=d.addVertArray(l,3*f);for(p=0;l>p;++p)u.set(t,r.getFloat32(s+0),r.getFloat32(s+4),r.getFloat32(s+8)),s+=12,u.set(e,r.getFloat32(s+0),r.getFloat32(s+4),r.getFloat32(s+8)),s+=12,v.addVertex(t,e,n,0);for(s=h+4,p=0;f>p;++p){var g=r.getUint32(s+0),m=r.getUint32(s+4),_=r.getUint32(s+8);s+=12,v.addTriangle(g-1,_-1,m-1)}return d}}();var j=function(){var t=c.create(),e=u.create();return function(n,i,r,o,a,s,l,c,f,d,p){var v=f.coilProfile;"C"===o||f.forceTube?c?h.ortho(r,a):u.cross(r,e,a):"H"===o?v=f.helixProfile:"E"===o?v=f.strandProfile:"A"===o&&(v=f.arrowProfile),h.buildRotation(t,a,r,e,!0),v.addTransformed(n,i,l,t,s,c,d,p)}}(),H=function(){var t=u.create(),e=u.create(),n=u.create();return function(i,r,o,a,s,l,c,h){var f=null,d=null,p=r.length();u.set(n,0,0,0);for(var v=0;p>v;++v){l.push(c.nextId({geom:i,atom:r.centralAtomAt(v)})),r.smoothPosAt(t,v,h.strength),a[3*v]=t[0],a[3*v+1]=t[1],a[3*v+2]=t[2],r.smoothNormalAt(e,v,h.strength);var g=r.centralAtomAt(v);h.color.colorFor(g,o,4*v),u.dot(e,n)<0&&u.scale(e,e,-1),"E"!==r.residueAt(v).ss()||h.forceTube||(null===f&&(f=v),d=v),"C"===r.residueAt(v).ss()&&null!==f&&(C(a,f,d,p),C(s,f,d,p),f=null,d=null),s[3*v]=a[3*v]+e[0]+n[0],s[3*v+1]=a[3*v+1]+e[1]+n[1],s[3*v+2]=a[3*v+2]+e[2]+n[2],u.copy(n,e)}}}(),B=function(){var t=u.create(),e=u.create(),n=l.fromValues(0,0,0,1),i=u.create(),r=u.create();return function(o,c,f,d,p){var v=O([f],4*p.arcDetail,p.splineDetail),g=p.float32Allocator.request(3*f.length()),_=p.float32Allocator.request(4*f.length()),y=p.float32Allocator.request(3*f.length()),b=[],w=p.idPool.getContinuousRange(f.length());o.addIdRange(w),H(o,f,_,g,y,b,w,p);var x=o.vertArrayWithSpaceFor(v),C=h.catmullRomSpline(g,f.length(),p.splineDetail,p.strength,!1,p.float32Allocator),A=h.catmullRomSpline(y,f.length(),p.splineDetail,p.strength,!1,p.float32Allocator);c.setPerResidueColors(d,_);var M=p.radius*(f.residueAt(0).isAminoacid()?1:1.8),k=m(_,p.splineDetail);u.set(t,C[3]-C[0],C[4]-C[1],C[5]-C[2]),u.set(e,C[0],C[1],C[2]),u.set(i,A[0]-C[0],A[1]-C[0],A[2]-C[2]),u.normalize(t,t),u.normalize(i,i),l.set(n,k[0],k[1],k[2],k[3]);var E=x.numVerts();x.addVertex(e,[-t[0],-t[1],-t[2]],n,b[0]),j(x,e,i,f.residueAt(0).ss(),t,n,M,!0,p,0,b[0]),a(x,E,4*p.arcDetail);var S=x.numVerts(),T=0;c.addAssoc(d,x,T,E,S),T+=1;for(var F=Math.floor(p.splineDetail/2),R=h.catmullRomSplineNumPoints(f.length(),p.splineDetail,!1),N=4*p.arcDetail,D=1,$=R;$>D;++D){var z=3*D,P=4*D,L=3*(D+1),I=3*(D-1);u.set(e,C[z],C[z+1],C[z+2]),D===$-1?u.set(t,C[z]-C[I],C[z+1]-C[I+1],C[z+2]-C[I+2]):u.set(t,C[L]-C[I],C[L+1]-C[I+1],C[L+2]-C[I+2]),u.normalize(t,t),l.set(n,k[P],k[P+1],k[P+2],k[P+3]);var q=0,B=Math.floor(D/p.splineDetail),V=Math.floor((D-1)/p.splineDetail),U=Math.floor((D+p.arrowSkip)/p.splineDetail),W=!1,G=f.residueAt(B).ss();if(!p.forceTube){if(B!==V){var Y=f.residueAt(V).ss();if("C"===Y&&("H"===G||"E"===G)){u.set(r,A[I]-C[I],A[I+1]-C[I+1],A[I+2]-C[I+2]),u.normalize(r,r);var X=2*Math.PI/(4*p.arcDetail),K=h.signedAngle(i,r,t);q=Math.round(K/X),q=(q+4*p.arcDetail)%(4*p.arcDetail)}}if(U!==B&&U<f.length()){var Q=f.residueAt(U).ss();"C"===Q&&"E"===G&&(W=!0)}}u.set(i,A[3*D]-C[z],A[z+1]-C[z+1],A[z+2]-C[z+2]),u.normalize(i,i),E=x.numVerts();var Z=Math.floor((D+F)/p.splineDetail),J=b[Math.min(b.length-1,Z)];j(x,e,i,G,t,n,M,!1,p,q,J);var tt=D===$-1?1:N;x.numVerts()+tt>x.maxVerts()&&(S=x.numVerts(),c.addAssoc(d,x,T,E,S),x=o.vertArrayWithSpaceFor(tt),E=0,j(x,e,i,G,t,n,M,!0,p,0,J)),W&&(c.addAssoc(d,x,T,E,S),j(x,e,i,"A",t,n,M,!1,p,0,J),D+=p.arrowSkip),S=x.numVerts(),D===$-1&&(S+=1),c.addAssoc(d,x,T,E,S),T+=1,W&&(T+=p.arrowSkip)}return x.addVertex(e,t,n,b[b.length-1]),s(x,E,4*p.arcDetail),p.float32Allocator.release(y),p.float32Allocator.release(g),d+1}}(),V=function(){var t=c.create(),e=u.create(),n=u.create(),i=u.create(),r=u.create(),o=u.create(),a=u.create(),s=l.fromValues(0,0,0,1),f=l.fromValues(0,0,0,1);return function(l,c,d,p,v){if(0!==d.length()){var g=v.idPool.getContinuousRange(d.length());l.addIdRange(g),v.color.colorFor(d.centralAtomAt(0),s,0);var m=$([d],v.protoSphere.numVerts(),v.protoCyl.numVerts()),_=m,y=l.vertArrayWithSpaceFor(m),b=y.maxVerts(),w=y.numVerts();d.posAt(o,0);var x=g.nextId({geom:l,atom:d.centralAtomAt(0)}),C=0;v.protoSphere.addTransformed(y,o,v.radius,s,x);var A=null;c.addAssoc(p,y,0,w,A);var M=v.float32Allocator.request(4*d.length());M[0]=s[0],M[1]=s[1],M[2]=s[2],M[3]=s[3];for(var k=v.protoCyl.numVerts()+v.protoSphere.numVerts(),E=1;E<d.length();++E){C=g.nextId({geom:l,atom:d.centralAtomAt(E)}),d.posAt(o,E-1),d.posAt(a,E),v.color.colorFor(d.centralAtomAt(E),f,0),M[4*E+0]=f[0],M[4*E+1]=f[1],M[4*E+2]=f[2],M[4*E+3]=f[3],u.sub(e,a,o);var S=u.length(e);u.scale(e,e,1/S),h.buildRotation(t,e,n,i,!1),u.copy(r,o),u.add(r,r,a),u.scale(r,r,.5),k>b-y.numVerts()&&(y=l.vertArrayWithSpaceFor(_)),_-=k;var T=y.numVerts();v.protoCyl.addTransformed(y,r,S,v.radius,t,s,f,x,C),A=y.numVerts(),A-=(A-T)/2,v.protoSphere.addTransformed(y,a,v.radius,f,C),x=C,c.addAssoc(p,y,E,w,A),w=A,u.copy(s,f)}c.setPerResidueColors(p,M),c.addAssoc(p,y,d.length()-1,w,y.numVerts())}}}();return _}(f,y,b,w),C=function(){function t(t,e,n,i,r,o){H.call(this,t);var a=o||{};this._={},this._.fillStyle=a.fillStyle||"#000",this._.backgroundAlpha=a.backgroundAlpha||0,this._.fontSize=a.fontSize||24,this._.font=a.font||"Verdana",this._.fontStyle=a.fontStyle||"normal",this._.fontColor=a.fontColor||"#000",this._cb=100,this._bu=i,this._ec=this._b.createBuffer(),this._g=new Float32Array(30),this._dT(e,n,r);var s=.5,u=.5;this._g[0]=i[0],this._g[1]=i[1],this._g[2]=i[2],this._g[3]=-s,this._g[4]=-u,this._g[5]=i[0],this._g[6]=i[1],this._g[7]=i[2],this._g[8]=s,this._g[9]=u,this._g[10]=i[0],this._g[11]=i[1],this._g[12]=i[2],this._g[13]=s,this._g[14]=-u,this._g[15]=i[0],this._g[16]=i[1],this._g[17]=i[2],this._g[18]=-s,this._g[19]=-u,this._g[20]=i[0],this._g[21]=i[1],this._g[22]=i[2],this._g[23]=-s,this._g[24]=u,this._g[25]=i[0],this._g[26]=i[1],this._g[27]=i[2],this._g[28]=s,this._g[29]=u}function e(t){for(var e=1;t>e;)e*=2;return e}return i.derive(t,H,{updateProjectionIntervals:function(){},updateSquaredSphereRadius:function(t,e){return e},_cN:function(t){t.fillStyle=this._.fontColor,t.textAlign="left",t.textBaseline="bottom",t.font=this._.fontStyle+" "+this._.fontSize+"px "+this._.font},_dT:function(t,n,i){this._cN(n);var r=n.measureText(i).width,o=24;t.width=e(r),t.height=e(o),n.fillStyle=this._.fillStyle,n.globalAlpha=this._.backgroundAlpha,n.fillRect(0,0,t.width,t.height),this._cN(n),n.globalAlpha=1,n.lineWidth=.5,n.lineStyle="none",n.fillText(i,0,t.height),n.strokeText(i,0,t.height),this._cJ=this._b.createTexture(),this._dH(this._cJ,t),this._dB=r/t.width,this._dA=o/t.height,this._k=r,this._l=o},_dH:function(t,e){var n=this._b;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!0),n.bindTexture(n.TEXTURE_2D,t),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.generateMipmap(n.TEXTURE_2D),n.bindTexture(n.TEXTURE_2D,null)},bind:function(){var t=this._b;t.bindBuffer(t.ARRAY_BUFFER,this._ec),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this._cJ),this._p||(t.bufferData(t.ARRAY_BUFFER,this._g,t.STATIC_DRAW),this._p=!0)},draw:function(t,e,n,i){if(this._P&&"normal"===i){var r=e.text;t.bind(r),this.bind();var o=this._b,a=t.upsamplingFactor();o.uniform1f(o.getUniformLocation(r,"xScale"),this._dB),o.uniform1f(o.getUniformLocation(r,"yScale"),this._dA),o.uniform1f(o.getUniformLocation(r,"width"),2*a*this._k/t.viewportWidth()),o.uniform1f(o.getUniformLocation(r,"height"),2*a*this._l/t.viewportHeight()),o.uniform1i(o.getUniformLocation(r,"sampler"),0);var s=o.getAttribLocation(r,"attrCenter");o.enableVertexAttribArray(s),o.vertexAttribPointer(s,3,o.FLOAT,!1,20,0);var u=o.getAttribLocation(r,"attrCorner");o.vertexAttribPointer(u,2,o.FLOAT,!1,20,12),o.enableVertexAttribArray(u),o.enable(o.BLEND),o.blendFunc(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA),o.drawArrays(o.TRIANGLES,0,6),o.disableVertexAttribArray(s),o.disableVertexAttribArray(u),o.disable(o.BLEND)}}}),t}(),A=function(n){function r(){this._e=[],this._D=[],this._x=0}function o(t,e,i,o,a){H.call(this,e),this._B=i,this._G=o,this._C=new r,this._dQ=new n.ProtoSphere(8,8),this._dR=new n.ProtoCylinder(8),this._W=null,this._3=[],this._ek=a,this._p=!1,this._bC=null}function a(t,e,n){for(var i=0;n-1>i;++i)t.addTriangle(e,e+1+i,e+2+i);t.addTriangle(e,e+n,e+1)}function s(t,e,n){for(var i=e+n,r=0;n-1>r;++r)t.addTriangle(i,e+r+1,e+r);t.addTriangle(i,e,e+n-1)}var u=t.vec3,l=t.mat3,c=e.forceRGB,f=100;return r.prototype={numVerts:function(){return this._x},addVertex:function(t,e,n,i){this._x+=1,this._e.push(t[0],t[1],t[2],e[0],e[1],e[2],n[0],n[1],n[2],n[3],i,0)},addTriangle:function(t,e,n){this._D.push(t,e,n)},numIndices:function(){return this._D.length},indexData:function(){return this._D},vertData:function(){return this._e}},i.derive(o,H,{updateProjectionIntervals:function(){},updateSquaredSphereRadius:function(t,e){return e},addTube:function(){var t=u.create(),e=u.create(),n=u.create(),i=u.create(),r=l.create();return function(o,l,f,d){d=d||{};var p=c(d.color||"white"),v=!0;void 0!==d.cap&&(v=d.cap),u.sub(i,l,o);var g=u.length(i);if(u.normalize(i,i),u.add(t,o,l),u.scale(t,t,.5),h.buildRotation(r,i,e,n,!1),v){var m=this._C.numVerts();this._C.addVertex(o,[-i[0],-i[1],-i[2]],p,0),a(this._C,m,8)}var _=void 0!==d.userData?d.userData:null,y=this._c2({center:t,userData:_,geom:this});if(this._dR.addTransformed(this._C,t,g,f,r,p,p,y,y),v){var b=this._C.numVerts();this._C.addVertex(l,i,p,0),s(this._C,b-8,8)}this._p=!1}}(),_c2:function(t){return this._bC&&this._bC.hasLeft()||(this._bC=this._ek.getContinuousRange(f),this._3.push(this._bC)),this._bC.nextId(t)},destroy:function(){H.prototype.destroy.call(this);for(var t=0;t<this._3.length;++t)this._3[t].recycle()},addSphere:function(t,e,n){n=n||{};var i=c(n.color||"white"),r=void 0!==n.userData?n.userData:null,o=this._c2({center:t,userData:r,geom:this});this._dQ.addTransformed(this._C,t,e,i,o),this._p=!1},_dS:function(){this._p=!0,null!==this._W&&this._W.destroy(),this._W=new V(this._b,this._C.numVerts(),this._C.numIndices(),this._B,this._G),this._W.setIndexData(this._C.indexData()),this._W.setVertData(this._C.vertData())},draw:function(t,e,n,i){if(this._P){this._p||this._dS();var r=this.shaderForStyleAndPass(e,n,i);if(r){t.bind(r),this._b.uniform1i(r.symId,255);var o=this._W;o.bind(r),o.draw(),o.releaseAttribs(r)}}},shaderForStyleAndPass:function(t,e,n){if("normal"===n)return"hemilight"===e?t.hemilight:t.phong;if("select"===n)return t.select;if("outline"===n)return t.outline;var i=t[n];return void 0!==i?i:null}}),o}(f),M=function(){function e(t,e,n){this._co=t,this._b1=e,this._bi=n,this._eK=n,this._bq=Date.now(),this._c8=!1,this._cq=!1}function n(t,n,i){e.call(this,p.clone(t),p.clone(n),i),this._T=p.clone(t)}function r(t,n,i){var r=g.create(),o=g.create();g.fromMat4(r,t),g.fromMat4(o,n);var a=v.create(),s=v.create();v.fromMat3(a,r),v.fromMat3(s,o),this._T=g.create(),e.call(this,a,s,i)}function o(t,n){e.call(this,null,null,n),this._bW=p.clone(t),this.setLooping(!0),this._cV=0}function a(t,n){var i=1e3*(2*Math.PI/n);e.call(this,null,null,i),this._bW=p.clone(t),this.setLooping(!0),this._dL=n,this._cU=0}function s(){this._bn=[]}function u(t,e,i){return new n(t,e,i)}function l(t,e,n){return new r(t,e,n)}function c(t,n,i){return new e(t,n,i)}function f(t,e){return new a(t,e)}function d(){return new o([0,1,0],2e3)}var p=t.vec3,v=t.quat,g=t.mat3;return e.prototype={setLooping:function(t){this._c8=t},step:function(t){var e,n=Date.now(),i=n-this._bq;if(0===this._bi)e=1;else if(this._c8){var r=Math.floor(i/this._bi);e=(i-r*this._bi)/this._bi}else i=Math.min(this._bi,i),e=i/this._bi,this._cq=1===e;return this.apply(t,e),this._cq},apply:function(t,e){var n=(1-Math.cos(e*Math.PI))/2;this._T=this._co*(1-n)+this._b1*n,t.setZoom(this._T)},finished:function(){return this._cq}},i.derive(n,e,{apply:function(t,e){var n=(1-Math.cos(e*Math.PI))/2;p.lerp(this._T,this._co,this._b1,n),t.setCenter(this._T)}}),i.derive(r,e,{apply:function(){var t=v.create();return function(e,n){v.slerp(t,this._co,this._b1,n),g.fromQuat(this._T,t),e.setRotation(this._T)}}()}),i.derive(o,e,{apply:function(){var t=g.create(),e=g.create();return function(n,i){g.fromMat4(e,n.rotation());var r=.2*Math.sin(2*i*Math.PI),o=r-this._cV;this._cV=r,h.axisRotation(t,this._bW,o),g.mul(e,t,e),n.setRotation(e)}}()}),i.derive(a,e,{apply:function(){var t=g.create(),e=g.create();return function(n,i){g.fromMat4(e,n.rotation());var r=2*Math.PI*(i-this._cU);this._cU=i,h.axisRotation(t,this._bW,r),g.mul(e,t,e),n.setRotation(e)}}(),setSpeed:function(t){this._dL=t},setAxis:function(t){this._bW=t}}),s.prototype={run:function(t){
var e=Date.now();return this._bn=this._bn.filter(function(n){return!n.step(t,e)}),this._bn.length>0},add:function(t){this._bn.push(t)},remove:function(t){this._bn=this._bn.filter(function(e){return e!==t})}},{AnimationControl:s,move:u,rotate:l,zoom:c,rockAndRoll:d,spin:f}}(),k=function(){function t(t,e){this.near=t,this.far=e}function e(t){t=t||{},this._bd=t.near||.1,this._5=t.far||400}function n(){this._5=100}return e.prototype.update=function(){return new t(this._bd,this._5)},n.prototype.update=function(e,n){for(var i=n.center(),r=null,o=0;o<e.length;++o){var a=e[o];a.visible()&&(r=a.updateSquaredSphereRadius(i,r))}if(null===r)return null;r=Math.sqrt(r);var s=n.zoom(),u=1.05*(r+s),l=.1;return new t(l,u)},{FixedSlab:e,AutoSlab:n,Slab:t}}(),E=function(n,r,o,a,s,u,l,c,h,f,d,p){function v(){return/(iPad|iPhone|iPod)/g.test(navigator.userAgent)}function g(t,e){return t=t||"auto","fixed"===t?new k.FixedSlab(e):"auto"===t?new k.AutoSlab(e):null}function m(t,e,n,i,r,o){this._bu=i,this._dJ=t,this._dW=e,this._dK=n,this._d8=r,this._d7=o}function _(t,e){this._=this._ef(e,t),this._bQ=!1,this._m=[],this._E=t,this._b6=!1,this._2=!1,this._d9=null,this._c1=new n,this._R=null,this._ba=null,this.listenerMap={},this._V=new p.AnimationControl,this._eg(),this._cj(),this.quality(this._.quality),null!==this._.click&&this.on("click",this._.click),null!==this._.doubleClicked&&this.on("doubleClick",this._.doubleClick),"complete"===document.readyState||"loaded"===document.readyState||"interactive"===document.readyState?this._dc():document.addEventListener("DOMContentLoaded",i.bind(this,this._dc))}function y(t,e,n){return e in t?t[e]:n}function b(t){return t.atomDoubleClick?t.atomDoubleClick:t.atomDoubleClicked?t.atomDoubleClicked:t.doubleClick?t.doubleClick:"center"}function w(t){return t.atomClick?t.atomClick:t.atomClicked?t.atomClicked:t.click?t.click:null}var x='<div style="vertical-align:middle; text-align:center;"><h1>WebGL not supported</h1><p>Your browser does not support WebGL. You might want to try Chrome, Firefox, IE 11, or newer versions of Safari</p><p>If you are using a recent version of one of the above browsers, your graphic card might be blocked. Check the browser documentation for details on how to unblock it.</p></div>',C=t.vec3,A=t.mat4,M=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();return m.prototype={symIndex:function(){return this._dK},target:function(){return this._dJ},pos:function(){return this._bu},node:function(){return this._dW},transform:function(){return this._d7},object:function(){return this._d8}},_.prototype={_ef:function(t,n){t=t||{};var i={width:t.width||500,height:t.height||500,animateTime:t.animateTime||0,antialias:t.antialias,quality:y(t,"quality","low"),style:y(t,"style","hemilight"),background:e.forceRGB(t.background||"white"),slabMode:g(t.slabMode),outline:y(t,"outline",!0),outlineColor:e.forceRGB(y(t,"outlineColor","black")),outlineWidth:y(t,"outlineWidth",1.5),selectionColor:e.forceRGB(y(t,"selectionColor","#3f3")),fov:y(t,"fov",45),doubleClick:b(t),click:w(t),fog:y(t,"fog",!0),transparency:y(t,"transparency","alpha")},r=n.getBoundingClientRect();return"auto"===i.width&&(i.width=r.width),"auto"===i.height&&(i.height=r.height),i},_cs:function(){this._2&&(this._2=!1,this._d.setViewportSize(this._c.viewportWidth(),this._c.viewportHeight()),this._b9.resize(this._.width,this._.height))},resize:function(t,e){(t!==this._.width||e!==this._.height)&&(this._c.resize(t,e),this._2=!0,this._.width=t,this._.height=e,this.requestRedraw())},fitParent:function(){var t=this._E.getBoundingClientRect();this.resize(t.width,t.height)},gl:function(){return this._c.gl()},ok:function(){return this._bQ},options:function(t,n){if(void 0!==n)if(this._[t]=n,"fog"===t)this._d.fog(n),this.requestRedraw();else if("fov"===t)this._d.setFieldOfViewY(n*Math.PI/180);else if("selectionColor"===t)this._d.setSelectionColor(e.forceRGB(n));else if("outlineColor"===t)this._d.setOutlineColorColor(e.forceRGB(n));else if("outlineWidth"===t)this._d.setOutlineWidth(n+0);else if("transparency"===t){var i="screendoor"===n;this._d.setScreenDoorTransparency(i)}return this._[t]},quality:function(t){return this._.quality=t,"high"===t?(this._.arcDetail=4,this._.sphereDetail=16,void(this._.splineDetail=8)):"medium"===t?(this._.arcDetail=2,this._.sphereDetail=10,void(this._.splineDetail=5)):"low"===t?(this._.arcDetail=2,this._.sphereDetail=8,void(this._.splineDetail=3)):void 0},imageData:function(){return this._c.imageData()},_ee:function(){var t={width:this._.width,height:this._.height};this._b9=new o(this._c.gl(),t)},_dc:function(){if(!this._c.initGL())return this._E.removeChild(this._c.domElement()),this._E.innerHTML=x,this._E.style.width=this._.width+"px",this._E.style.height=this._.height+"px",!1;this._ee(),this._eH=this._bJ.getContext("2d"),this._B=new a(Float32Array),this._G=new a(Uint16Array),this._d=new s(this._c.gl()),this._d.setUpsamplingFactor(this._c.superSamplingFactor()),this._d.setOutlineWidth(this._.outlineWidth);var t="screendoor"===this._.transparency;this._d.setScreenDoorTransparency(t),this._d.fog(this._.fog),this._d.setFogColor(this._.background),this._d.setOutlineColor(this._.outlineColor),this._d.setSelectionColor(this._.selectionColor),this._d.setFieldOfViewY(this._.fov*Math.PI/180),this._cc.setCam(this._d);var e=this._c,n=v()?"highp":"mediump";return this._dM={hemilight:e.initShader(u.HEMILIGHT_VS,u.PRELUDE_FS+u.HEMILIGHT_FS,n),phong:e.initShader(u.HEMILIGHT_VS,u.PRELUDE_FS+u.PHONG_FS,n),outline:e.initShader(u.OUTLINE_VS,u.PRELUDE_FS+u.OUTLINE_FS,n),lines:e.initShader(u.LINES_VS,u.PRELUDE_FS+u.LINES_FS,n),text:e.initShader(u.TEXT_VS,u.TEXT_FS,n),selectLines:e.initShader(u.SELECT_LINES_VS,u.SELECT_LINES_FS,n),select:e.initShader(u.SELECT_VS,u.SELECT_FS,n)},this._ew=i.bind(this,this._eo),this._eI=new l(this._c.domElement(),this,this._d),this._bQ||(this._bQ=!0,this._cv({name:"viewerReadyEvent"},"viewerReady",this)),!0},requestRedraw:function(){this._b6||(this._b6=!0,M(this._ew))},boundingClientRect:function(){return this._c.domElement().getBoundingClientRect()},_ct:function(t){for(var e=0,n=this._m.length;e!==n;++e)this._m[e].draw(this._d,this._dM,this._.style,t)},_eg:function(){var t=document.createElement("div");t.setAttribute("style","overflow:hidden;width:0;height:0"),this._by=document.createElement("textarea"),this._E.appendChild(t),t.appendChild(this._by),this._by.focus()},focus:function(){this._by.focus()},_cj:function(){var t={antialias:this._.antialias,height:this._.height,width:this._.width,backgroundColor:this._.background};this._c=new r.Canvas(this._E,t),this._bJ=document.createElement("canvas"),this._bJ.style.display="none",this._E.appendChild(this._bJ),this._cc=new c(this._c,this,this._d,this._.animateTime),this._c.domElement().addEventListener("mousedown",i.bind(this,this._el))},_el:function(){this._by.focus()},setRotation:function(t,e){if(e|=0,0===e)return this._d.setRotation(t),void this.requestRedraw();var n;9===t.length?(n=A.create(),A.fromMat3(n,t)):n=A.clone(t),this._V.add(p.rotate(this._d.rotation(),n,e)),this.requestRedraw()},setCamera:function(t,e,n,i){i|=0,this.setCenter(e,i),this.setRotation(t,i),this.setZoom(n,i)},_ez:function(){var t=this._V.run(this._d);t&&this.requestRedraw()},_eo:function(){if(null!==this._c){this._b6=!1,this._ez(),this._c.bind(),this._cs();var t=this._c.gl();t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT);var e=this._.slabMode.update(this._m,this._d);null!==e&&this._d.setNearFar(e.near,e.far),t.enable(t.CULL_FACE),this._.outline&&(t.cullFace(t.BACK),t.enable(t.CULL_FACE),this._ct("outline")),t.cullFace(t.FRONT),t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),this._ct("normal")}},setCenter:function(t,e){return e|=0,0===e?void this._d.setCenter(t):(this._V.add(p.move(this._d.center(),C.clone(t),e)),void this.requestRedraw())},setZoom:function(t,e){return e|=0,0===e?void this._d.setZoom(t):(this._V.add(p.zoom(this._d.zoom(),t,e)),void this.requestRedraw())},centerOn:function(t,e){this.setCenter(t.center(),e)},clear:function(){for(var t=0;t<this._m.length;++t)this._m[t].destroy();this._m=[]},addListener:function(t,e){if("keypress"===t||"keydown"===t||"keyup"===t)this._by.addEventListener(t,e,!1);else{var n=this.listenerMap[t];if("undefined"==typeof n&&(n=[],this.listenerMap[t]=n),"center"===e){var r=i.bind(this._cc,this._cc._es);n.push(r)}else n.push(e);this._bQ&&"viewerReady"===t&&e(this,null)}},_cv:function(t,e,n){var i=this.listenerMap[e];i&&i.forEach(function(e){e(n,t)})},RENDER_MODES:["sline","lines","trace","lineTrace","cartoon","tube","spheres","ballsAndSticks","points"],renderAs:function(t,e,n,i){for(var r=!1,o=0;o<this.RENDER_MODES.length;++o)if(this.RENDER_MODES[o]===n){r=!0;break}return r?this[n](t,e,i):void 0},_S:function(t,e){return t=this._cm(t),t.showRelated=t.showRelated||"asym",t.showRelated&&"asym"!==t.showRelated&&null===e.assembly(t.showRelated)&&(t.showRelated="asym"),t},_cm:function(t){return t=i.copy(t),t.float32Allocator=this._B,t.uint16Allocator=this._G,t.idPool=this._c1,t},lineTrace:function(t,n,i){var r=this._S(i,n);r.color=r.color||e.uniform([1,0,1]),r.lineWidth=r.lineWidth||4;var o=h.lineTrace(n,this._c.gl(),r);return this.add(t,o)},spheres:function(t,n,i){var r=this._S(i,n);r.color=r.color||e.byElement(),r.sphereDetail=this.options("sphereDetail"),r.radiusMultiplier=r.radiusMultiplier||1;var o=h.spheres(n,this._c.gl(),r);return this.add(t,o)},sline:function(t,n,i){var r=this._S(i,n);r.color=r.color||e.uniform([1,0,1]),r.splineDetail=r.splineDetail||this.options("splineDetail"),r.strength=r.strength||1,r.lineWidth=r.lineWidth||4;var o=h.sline(n,this._c.gl(),r);return this.add(t,o)},cartoon:function(t,n,i){var r=this._S(i,n);r.color=r.color||e.bySS(),r.strength=r.strength||1,r.splineDetail=r.splineDetail||this.options("splineDetail"),r.arcDetail=r.arcDetail||this.options("arcDetail"),r.radius=r.radius||.3,r.forceTube=r.forceTube||!1;var o=h.cartoon(n,this._c.gl(),r),a=this.add(t,o);return a},surface:function(t,e,n){var i=this._cm(n),r=h.surface(e,this._c.gl(),i);return this.add(t,r)},tube:function(t,e,n){return n=n||{},n.forceTube=!0,this.cartoon(t,e,n)},ballsAndSticks:function(t,n,i){var r=this._S(i,n);r.color=r.color||e.byElement(),r.radius=r.radius||.3,r.arcDetail=2*(r.arcDetail||this.options("arcDetail")),r.sphereDetail=r.sphereDetail||this.options("sphereDetail");var o=h.ballsAndSticks(n,this._c.gl(),r);return this.add(t,o)},lines:function(t,n,i){var r=this._S(i,n);r.color=r.color||e.byElement(),r.lineWidth=r.lineWidth||4;var o=h.lines(n,this._c.gl(),r);return this.add(t,o)},points:function(t,n,i){var r=this._S(i,n);r.color=r.color||e.byElement(),r.pointSize=r.pointSize||1;var o=h.points(n,this._c.gl(),r);return this.add(t,o)},trace:function(t,n,i){var r=this._S(i,n);r.color=r.color||e.uniform([1,0,0]),r.radius=r.radius||.3,r.arcDetail=2*(r.arcDetail||this.options("arcDetail")),r.sphereDetail=r.sphereDetail||this.options("sphereDetail");var o=h.trace(n,this._c.gl(),r);return this.add(t,o)},_cF:function(t,e,n){n.eachAtom(function(n){for(var i=n.pos(),r=0;3>r;++r)e[r].update(C.dot(i,t[r]))});for(var i=0;3>i;++i)e[i].extend(1.5)},fitTo:function(t){var e=this._d.mainAxes(),n=[new i.Range,new i.Range,new i.Range];if(t instanceof H)t.updateProjectionIntervals(e[0],e[1],e[2],n[0],n[1],n[2]);else if(void 0!==t.eachAtom)this._cF(e,n,t);else if(void 0!==t.length)for(var r=0;r<t.length;++r)this._cF(e,n,t[r]);this._dl(e,n)},_dl:function(t,e){if(!(e[0].empty()||e[1].empty()||e[2].empty())){var n=e[0].center(),i=e[1].center(),r=e[2].center(),o=[n*t[0][0]+i*t[1][0]+r*t[2][0],n*t[0][1]+i*t[1][1]+r*t[2][1],n*t[0][2]+i*t[1][2]+r*t[2][2]],a=this._d.fieldOfViewY(),s=this._d.aspectRatio(),u=e[0].length()/s,l=e[1].length(),c=.5*Math.max(u,l),h=c/Math.tan(.5*a),f=h+.5*e[2].length(),d=.5,p=Math.max(h-d,.1),v=2*d+h+e[2].length();this._d.setNearFar(p,v),this.setCamera(this._d.rotation(),o,f,this._.animateTime),this.requestRedraw()}},autoZoom:function(){var t=this._d.mainAxes(),e=[new i.Range,new i.Range,new i.Range];this.forEach(function(n){n.visible()&&n.updateProjectionIntervals(t[0],t[1],t[2],e[0],e[1],e[2])}),this._dl(t,e)},slabInterval:function(){},autoSlab:function(){var t=this._._eJ.update(this._m,this._d);null!==t&&this._d.setNearFar(t.near,t.far),this.requestRedraw()},rockAndRoll:function(t){return void 0===t?null!==this._ba:t?(null===this._ba&&(this._ba=p.rockAndRoll(),this._V.add(this._ba),this.requestRedraw()),!0):(this._V.remove(this._ba),this._ba=null,this.requestRedraw(),!1)},spin:function(t,e){return void 0===t?null!==this._R:t===!1?(this._V.remove(this._R),this._R=null,this.requestRedraw(),!1):(t===!0&&(t=Math.PI/8),e=e||[0,1,0],null===this._R?(this._R=p.spin(e,t),this._V.add(this._R)):(this._R.setSpeed(t),this._R.setAxis(e)),this.requestRedraw(),!0)},slabMode:function(t,e){e=e||{};var n=g(t,e),i=n.update(this._m,this._d);null!==i&&this._d.setNearFar(i.near,i.far),this._.slabMode=n,this.requestRedraw()},label:function(t,e,n,i){var r=new f(this._c.gl(),this._bJ,this._eH,n,e,i);return this.add(t,r),r},customMesh:function(t,e){var n=this._cm(e),i=new d(t,this._c.gl(),n.float32Allocator,n.uint16Allocator,n.idPool);return this.add(t,i),i},_en:function(){var t=this._c.gl();t.clearColor(0,0,0,0),t.disable(t.BLEND),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),t.clearColor(this._.background[0],this._.background[1],this._.background[2],1),t.cullFace(t.FRONT),t.enable(t.CULL_FACE),this._ct("select")},pick:function(){return function(t){this._b9.bind(),this._en();var e=new Uint8Array(4),n=this._c.gl();n.readPixels(t.x,this._.height-t.y,1,1,n.RGBA,n.UNSIGNED_BYTE,e),this._b9.release(),e.data&&(e=e.data);var i=e[0]|e[1]<<8|e[2]<<16,r=e[3],o=this._c1.objectForId(i);if(void 0===o)return null;var a=C.create(),s=null,u=null;return 255!==r?(s=o.atom,u=o.geom.symWithIndex(r),C.transformMat4(a,o.atom.pos(),u)):void 0!==o.atom?(s=o.atom,a=o.atom.pos()):(s=o.userData,a=o.center),new m(s,o.geom,255>r?r:null,a,o,u)}}(),add:function(t,e){return e.name(t),this._m.push(e),this._m.sort(function(t,e){return t.order()-e.order()}),this.requestRedraw(),e},_df:function(t){var e=t.replace(".","\\.").replace("*",".*");return new RegExp("^"+e+"$")},forEach:function(){var t,e="*";2===arguments.length?(t=arguments[1],e=arguments[0]):t=arguments[0];for(var n=this._df(e),i=0;i<this._m.length;++i){var r=this._m[i];n.test(r.name())&&t(r,i)}},get:function(t){for(var e=0;e<this._m.length;++e)if(this._m[e].name()===t)return this._m[e];return null},hide:function(t){this.forEach(t,function(t){t.hide()})},show:function(t){this.forEach(t,function(t){t.show()})},rm:function(t){for(var e=[],n=this._df(t),i=0;i<this._m.length;++i){var r=this._m[i];n.test(r.name())?r.destroy():e.push(r)}this._m=e},all:function(){return this._m},isWebGLSupported:function(){return this._c.isWebGLSupported()},destroy:function(){this.clear(),this._c.destroy(),this._c=null}},_.prototype.on=_.prototype.addListener,{Viewer:function(t,e){return new _(t,e)},isWebGLSupported:r.isWebGLSupported}}(n,r,o,a,s,u,l,c,x,C,A,M),S=function(){function t(t,e){this._j=t||[],this._cd=e||[]}function e(t){this._I=t,this._cn=[]}return t.prototype={addChain:function(t){this._j.push(t)},chains:function(){return this._j},addMatrix:function(t){this._cd.push(t)},matrices:function(){return this._cd},matrix:function(t){return this._cd[t]}},e.prototype={name:function(){return this._I},generators:function(){return this._cn},generator:function(t){return this._cn[t]},addGenerator:function(t){this._cn.push(t)}},{SymGenerator:t,Assembly:e}}(),T=function(){function e(){}function n(t,n,i,r,o,a,s,u){e.call(this),this._v=t,this._cA=[],this._eb=!!a,this._I=n,this._bu=i,this._ck=o,this._bh=r,this._dU=void 0!==s?s:null,this._dI=void 0!==u?u:null}function r(t,n){e.call(this),this._dO=t,this._K=n,this._cA=[]}var o=t.vec3;return e.prototype={bondCount:function(){return this.bonds().length},eachBond:function(t){for(var e=this.bonds(),n=0,i=e.length;i>n;++n)t(e[n])},isConnectedTo:function(t){if(null===t)return!1;for(var e=t.full(),n=this.full(),i=this.bonds(),r=0,o=i.length;o>r;++r){var a=i[r];if(a.atom_one()===n&&a.atom_two()===e||a.atom_one()===e&&a.atom_two()===n)return!0}return!1}},i.derive(n,e,{addBond:function(t){this._cA.push(t)},name:function(){return this._I},bonds:function(){return this._cA},residue:function(){return this._v},structure:function(){return this._v.structure()},full:function(){return this},qualifiedName:function(){return this.residue().qualifiedName()+"."+this.name()},pos:function(){return this._bu},setPos:function(t){o.copy(this._bu,t)},element:function(){return this._bh},index:function(){return this._ck},prop:function(t){return this[t]()},occupancy:function(){return this._dU},tempFactor:function(){return this._dI},isHetatm:function(){return this._eb}}),i.derive(r,e,{full:function(){return this._K},name:function(){return this._K.name()},pos:function(){return this._K.pos()},element:function(){return this._K.element()},residue:function(){return this._dO},bonds:function(){return this._K.bonds()},index:function(){return this._K.index()},occupancy:function(){return this._K.occupancy()},tempFactor:function(){return this._K.tempFactor()},qualifiedName:function(){return this._K.qualifiedName()},isHetatm:function(){return this._K.isHetatm()}}),{Atom:n,AtomView:r}}(),F=function(e){function n(){}function r(t,e,i,r){n.call(this),this._I=e,this._dV=i,this._ed=r,this._r=[],this._cK="C",this._J=t,this._da=!1,this._c9=!1,this._ck=t.residues().length}function o(t,e){n.call(this),this._er=t,this._r=[],this._v=e}var a=t.vec3,s=e.Atom,u=e.AtomView;return n.prototype={prop:function(t){return this[t]()},isWater:function(){return"HOH"===this.name()||"DOD"===this.name()},eachAtom:function(t,e){e|=0;for(var n=0;n<this._r.length;n+=1){if(t(this._r[n],e)===!1)return!1;e+=1}return e},qualifiedName:function(){var t=this.chain().name()+"."+this.name()+this.num();return"\x00"===this.insCode()?t:t+this.insCode()},atom:function(t){if("string"==typeof t){for(var e=0;e<this._r.length;++e)if(this._r[e].name()===t)return this._r[e];return null}return t>=this._r.length&&0>t?null:this._r[t]},centralAtom:function(){return this.isAminoacid()?this.atom("CA"):this.isNucleotide()?this.atom("C3'"):null},center:function(){var t=0,e=a.create();return this.eachAtom(function(n){a.add(e,e,n.pos()),t+=1}),t>0&&a.scale(e,e,1/t),e},isAminoacid:function(){return this._da},isNucleotide:function(){return this._c9}},i.derive(r,n,{_ep:function(){this._c9=null!==this.atom("P")&&null!==this.atom("C3'"),this._da=null!==this.atom("N")&&null!==this.atom("CA")&&null!==this.atom("C")&&null!==this.atom("O")},name:function(){return this._I},insCode:function(){return this._ed},num:function(){return this._dV},full:function(){return this},addAtom:function(t,e,n,i,r,o){var a=new s(this,t,e,n,this.structure().nextAtomIndex(),i,r,o);return this._r.push(a),a},ss:function(){return this._cK},setSS:function(t){this._cK=t},index:function(){return this._ck},atoms:function(){return this._r},chain:function(){return this._J},structure:function(){return this._J.structure()}}),i.derive(o,n,{addAtom:function(t,e){if(e)for(var n=0;n<this._r.length;++n){var i=this._r[n];if(i.index()===t.index())return i}var r=new u(this,t.full());return this._r.push(r),r},removeAtom:function(t){var e=this._r.length;return this._r=this._r.filter(function(e){return e.index()!==t.index()}),e!==this._r.length},full:function(){return this._v},num:function(){return this._v.num()},insCode:function(){return this._v.insCode()},ss:function(){return this._v.ss()},index:function(){return this._v.index()},chain:function(){return this._er},name:function(){return this._v.name()},atoms:function(){return this._r},qualifiedName:function(){return this._v.qualifiedName()},containsResidue:function(t){return this._v.full()===t.full()},isAminoacid:function(){return this._v.isAminoacid()},isNucleotide:function(){return this._v.isNucleotide()},isWater:function(){return this._v.isWater()}}),{ResidueView:o,Residue:r}}(T),R=function(){function e(){this._u=[]}function n(t,e,n){this._bR=t,this._4=e,this._dg=n,this._ch=0===this._4,this._ci=this._bR.length()===this._dg;var i=this._dg-this._4;this._ci||++i,this._ch||(++i,this._4-=1),this._cf=i}var i=t.vec3;return e.prototype={push:function(t){this._u.push(t)},length:function(){return this._u.length},residueAt:function(t){return this._u[t]},posAt:function(t,e){return i.copy(t,this._u[e].centralAtom().pos()),t},normalAt:function(t,e){var n=this._u[e];return n.isAminoacid()&&i.sub(t,n.atom("O").pos(),n.atom("C").pos()),i.normalize(t,t),t},centralAtomAt:function(t){return this._u[t].centralAtom()},tangentAt:function(){var t=i.create(),e=i.create();return function(n,r){r>0?this.posAt(t,r-1):this.posAt(t,r),r<this._u.length-1?this.posAt(e,r+1):this.posAt(e,r),i.sub(n,e,t)}}(),fullTraceIndex:function(t){return t},subsets:function(t){for(var e=0,i=0,r=[];i<t.length&&e<this._u.length;){for(var o=t[i].full().index();this._u.length>e&&this._u[e].index()<o;)++e;if(e>=this._u.length)break;for(var a=this._u[e].index();t.length>i&&t[i].full().index()<a;)++i;if(i>=t.length)break;for(var s=e;t.length>i&&this._u.length>e&&t[i].full().index()===this._u[e].index();)++i,++e;var u=e;r.push(new n(this,s,u))}return r}},e.prototype.smoothPosAt=e.prototype.posAt,e.prototype.smoothNormalAt=e.prototype.normalAt,n.prototype={length:function(){return this._cf},residueAt:function(t){return this._bR.residueAt(this._4+t)},_db:function(){var t=i.create(),e=i.create();return function(n,r,o,a){return this.tangentAt(t,r),this.tangentAt(e,o),i.scale(t,t,a),i.scale(e,e,a),h.cubicHermiteInterpolate(n,this.centralAtomAt(r).pos(),t,this.centralAtomAt(o).pos(),e,.5,0),n}}(),smoothPosAt:function(){return function(t,e,n){if(0===e&&!this._ch)return this._db(t,e,e+1,n);if(e===this._cf-1&&!this._ci)return this._db(t,e-1,e,n);var r=this.centralAtomAt(e);return i.copy(t,r.pos()),t}}(),smoothNormalAt:function(){return function(t,e){return this._bR.normalAt(t,e+this._4),t}}(),posAt:function(t,e){var n=this.centralAtomAt(e),r=null;return i.copy(t,n.pos()),0!==e||this._ch||(r=this.centralAtomAt(e+1),i.add(t,t,r.pos()),i.scale(t,t,.5)),e!==this._cf-1||this._ci||(r=this.centralAtomAt(e-1),i.add(t,t,r.pos()),i.scale(t,t,.5)),t},centralAtomAt:function(t){return this.residueAt(t).centralAtom()},fullTraceIndex:function(t){return this._4+t},tangentAt:function(t,e){return this._bR.tangentAt(t,e+this._4)}},{TraceSubset:n,BackboneTrace:e}}(),N=function(e,n){function r(t,e){return t<<8|e.charCodeAt(0)}function o(t,e){return t.num()<e.num()}function a(t){return{num:function(){return t}}}function s(){}function u(t,e){s.call(this),this._i=t,this._I=e,this._bm=[],this._q=[],this._1=!0}function l(t,e,n){var i,r;if(t?(i=e.atom("C"),r=n.atom("N")):(i=e.atom("O3'"),r=n.atom("P")),i.isConnectedTo(r))return!1;var o=d.sqrDist(i.pos(),r.pos());return Math.abs(o-2.25)>1}function c(t,e){e.length()<2||t.push(e)}function h(t,e,n){if(0===t.length)return!0;if(!e)return!1;var i=r(n.num(),n.insCode()),o=t[t.length-1],a=r(o.num(),o.insCode());return i>a}function f(t,e){s.call(this),this._J=e,this._q=[],this._d6=t,this._bs={},this._1=!0}var d=t.vec3,p=e.Residue,v=e.ResidueView;return s.prototype={eachAtom:function(t,e){e|=0;for(var n=0;n<this._q.length;n+=1)if(e=this._q[n].eachAtom(t,e),e===!1)return!1;return e},atomCount:function(){for(var t=0,e=this.residues(),n=0;n<e.length;++n)t+=e[n].atoms().length;return t},eachResidue:function(t){for(var e=0;e<this._q.length;e+=1)if(t(this._q[e])===!1)return!1},residues:function(){return this._q},structure:function(){return this._i},asView:function(){var t=this.structure().createEmptyView();return t.addChain(this,!0),t},residueByRnum:function(t){var e=this.residues();if(this._1){var n=i.binarySearch(e,a(t),o);return-1===n?null:e[n]}for(var r=0;r<e.length;++r)if(e[r].num()===t)return e[r];return null},residuesInRnumRange:function(t,e){var n,r,s=[],u=this.residues();if(this._1===!0){var l=i.indexFirstLargerEqualThan(u,a(t),o);if(-1===l)return s;var c=i.indexLastSmallerEqualThan(u,a(e),o);if(-1===c)return s;for(n=l;c>=n;++n)s.push(this._q[n])}else for(n=0,r=u.length;n!==r;++n){var h=u[n];h.num()>=t&&h.num()<=e&&s.push(h)}return s},prop:function(t){return this[t]()}},i.derive(u,s,{name:function(){return this._I},full:function(){return this},addResidue:function(t,e,n){n=n||"\x00";var i=new p(this,t,e,n);return this._1=h(this._q,this._1,i),this._q.push(i),i},assignSS:function(t,e,n){for(var i=r(t[0],t[1]),o=r(e[0],e[1]),a=1;a<this._q.length-1;++a){var s=this._q[a],u=r(s.num(),s.insCode());i>=u||u>=o||s.setSS(n)}},eachBackboneTrace:function(t){this._eu();for(var e=0;e<this._bm.length;++e)t(this._bm[e])},_eu:function(){if(!(this._bm.length>0)){for(var t=new n.BackboneTrace,e=null,i=0;i<this._q.length;i+=1){var r=this._q[i],o=r.isAminoacid(),a=r.isNucleotide();if(e===!0&&!o||e===!1&&!a||null===e&&!a&&!o)c(this._bm,t),e=null,t=new n.BackboneTrace;else if(0!==t.length()){var s=this._q[i-1];l(e,s,r)&&(c(this._bm,t),t=new n.BackboneTrace),t.push(r)}else t.push(r),e=r.isAminoacid()}c(this._bm,t)}},backboneTraces:function(){var t=[];return this.eachBackboneTrace(function(e){t.push(e)}),t}}),i.derive(f,s,{addResidue:function(t,e){var n=new v(this,t.full());if(this._1=h(this._q,this._1,t),this._q.push(n),this._bs[t.full().index()]=n,e)for(var i=t.atoms(),r=0;r<i.length;++r)n.addAtom(i[r].full(),!1);return n},addAtom:function(t){var e=this._bs[t.residue().full().index()];return void 0===e&&(e=this.addResidue(t.residue())),e.addAtom(t,!0)},removeAtom:function(t,e){var n=this._bs[t.residue().full().index()];if(void 0===n)return!1;var i=n.removeAtom(t);return i&&0===n.atoms().length&&e&&(delete this._bs[t.residue().full().index()],this._q=this._q.filter(function(t){return t!==n})),i},containsResidue:function(t){var e=this._bs[t.full().index()];return void 0===e?!1:e.full()===t.full()},eachBackboneTrace:function(t){for(var e=this._J.backboneTraces(),n=0;n<e.length;++n)for(var i=e[n].subsets(this._q),r=0;r<i.length;++r)t(i[r])},backboneTraces:function(){var t=[];return this.eachBackboneTrace(function(e){t.push(e)}),t},full:function(){return this._J},name:function(){return this._J.name()},structure:function(){return this._d6}}),{Chain:u,ChainView:f}}(F,R),D=function(){var e=t.vec3,n=function(t,n){var i={atom_one:t,atom_two:n};return{atom_one:function(){return i.atom_one},atom_two:function(){return i.atom_two},mid_point:function(t){return t||(t=e.create()),e.add(t,i.atom_one.pos(),i.atom_two.pos()),e.scale(t,t,.5),t}}};return{Bond:n}}(),$=function(){function t(t,e){for(var n=0;n<e.length;++n)if(!e[n](t))return!1;return!0}function e(t){var e=[];return void 0!==t.aname&&e.push(function(e){return e.name()===t.aname}),void 0!==t.hetatm&&e.push(function(e){return e.isHetatm()===t.hetatm}),void 0!==t.anames&&e.push(function(e){for(var n=e.name(),i=0;i<t.anames.length;++i)if(n===t.anames[i])return!0;return!1}),e}function n(t){var e=[];if(void 0!==t.rname&&e.push(function(e){return e.name()===t.rname}),void 0!==t.rnames&&e.push(function(e){for(var n=e.name(),i=0;i<t.rnames.length;++i)if(n===t.rnames[i])return!0;return!1}),void 0!==t.rnums){for(var n={},i=0;i<t.rnums.length;++i)n[t.rnums[i]]=!0;e.push(function(t){var e=t.num();return n[e]===!0})}return void 0!==t.rnum&&e.push(function(e){return e.num()===t.rnum}),e}function i(t){var e=[];return void 0!==t.cname&&(t.chain=t.cname),void 0!==t.cnames&&(t.chains=t.cnames),void 0!==t.chain&&e.push(function(e){return e.name()===t.chain}),void 0!==t.chains&&e.push(function(e){for(var n=e.name(),i=0;i<t.chains.length;++i)if(n===t.chains[i])return!0;return!1}),e}function r(t,e){var n=t.residues();e.rnumRange&&(n=t.residuesInRnumRange(e.rnumRange[0],e.rnumRange[1]));var i,r,o=[];if(void 0!==e.rindexRange){for(i=e.rindexRange[0],r=Math.min(n.length-1,e.rindexRange[1]);r>=i;++i)o.push(n[i]);return o}if(e.rindices&&void 0!==e.rindices.length){for(o=[],i=0;i<e.rindices.length;++i)o.push(n[e.rindices[i]]);return o}return n}function o(o,a,s){var u=n(s),l=e(s),c=i(s);s.rindex&&(s.rindices=[s.rindex]);for(var h=0;h<o._j.length;++h){var f=o._j[h];if(t(f,c))for(var d=r(f,s),p=null,v=0;v<d.length;++v)if(t(d[v],u)){p||(p=a.addChain(f,!1));for(var g=null,m=d[v].atoms(),_=0;_<m.length;++_)t(m[_],l)&&(g||(g=p.addResidue(d[v],!1)),g.addAtom(m[_]))}}return a}return{dict:o}}(),z=W=function(e,n,r){function o(t){var e=g[t.toUpperCase()];return void 0!==e?e:1.5}function a(t,e,n){var i=e.atom("C"),r=n.atom("N");if(i&&r){var o=f.sqrDist(i.pos(),r.pos());1.6*1.6>o&&t.connect(r,i)}}function s(t,e,n){var i=e.atom("O3'"),r=n.atom("P");if(i&&r){var o=f.sqrDist(i.pos(),r.pos());1.7*1.7>o&&t.connect(i,r)}}function u(){}function l(){u.call(this),this._j=[],this._O=[],this._c3=0}function c(t){u.call(this),this._c5=t,this._j=[]}var f=t.vec3,d=e.Chain,p=e.ChainView,v=n.Bond,g={H:.31,HE:.28,LI:1.28,BE:.96,B:.84,C:.76,N:.71,O:.66,F:.57,NE:.58,NA:1.66,MG:1.41,AL:1.21,SI:1.11,P:1.07,S:1.05,CL:1.02,AR:1.06,K:2.03,CA:1.76,SC:1.7,TI:1.6,V:1.53,CR:1.39,MN:1.39,FE:1.32,CO:1.26,NI:1.24,CU:1.32,ZN:1.22,GA:1.22,GE:1.2,AS:1.19,SE:1.2,BR:1.2,KR:1.16,RB:2.2,SR:1.95,Y:1.9,ZR:1.75,NB:1.64,MO:1.54,TC:1.47,RU:1.46,RH:1.42,PD:1.39,AG:1.45,CD:1.44,IN:1.42,SN:1.39,SB:1.39,TE:1.38,I:1.39,XE:1.4,CS:2.44,BA:2.15,LA:2.07,CE:2.04,PR:2.03,ND:2.01,PM:1.99,SM:1.98,EU:1.98,GD:1.96,TB:1.94,DY:1.92,HO:1.92,ER:1.89,TM:1.9,YB:1.87,LU:1.87,HF:1.75,TA:1.7,W:1.62,RE:1.51,OS:1.44,IR:1.41,PT:1.36,AU:1.36,HG:1.32,TL:1.45,PB:1.46,BI:1.48,PO:1.4,AT:1.5,RN:1.5,FR:2.6,RA:2.21,AC:2.15,TH:2.06,PA:2,U:1.96,NP:1.9,PU:1.87,AM:1.8,CM:1.69};return u.prototype={eachResidue:function(t){for(var e=0;e<this._j.length;e+=1)if(this._j[e].eachResidue(t)===!1)return!1},eachAtom:function(t,e){e|=0;for(var n=0;n<this._j.length;n+=1)if(e=this._j[n].eachAtom(t,e),e===!1)return!1},residueCount:function(){for(var t=this.chains(),e=0,n=0;n<t.length;++n)e+=t[n].residues().length;return e},eachChain:function(t){for(var e=this.chains(),n=0;n<e.length;++n)if(t(e[n])===!1)return},atomCount:function(){for(var t=this.chains(),e=0,n=0;n<t.length;++n)e+=t[n].atomCount();return e},atoms:function(){var t=[];return this.eachAtom(function(e){t.push(e)}),t},atom:function(t){var e=t.split("."),n=this.chain(e[0]);if(null===n)return null;var i=n.residueByRnum(parseInt(e[1],10));return null===i?null:i.atom(e[2])},center:function(){var t=f.create(),e=0;return this.eachAtom(function(n){f.add(t,t,n.pos()),e+=1}),e&&f.scale(t,t,1/e),t},boundingSphere:function(){var t=this.center(),e=0;return this.eachAtom(function(n){e=Math.max(e,f.sqrDist(t,n.pos()))}),new h.Sphere(t,Math.sqrt(e))},backboneTraces:function(){for(var t=this.chains(),e=[],n=0;n<t.length;++n)Array.prototype.push.apply(e,t[n].backboneTraces());return e},select:function(t){return"protein"===t?this.residueSelect(function(t){return t.isAminoacid()}):"water"===t?this.residueSelect(function(t){return t.isWater()}):"ligand"===t?this.residueSelect(function(t){return!t.isAminoacid()&&!t.isWater()}):r.dict(this,new c(this),t||{})},residueSelect:function(t){for(var e=new c(this.full()),n=0;n<this._j.length;++n)for(var i=this._j[n],r=null,o=i.residues(),a=0;a<o.length;++a)t(o[a])&&(r||(r=e.addChain(i,!1)),r.addResidue(o[a],!0));return e},atomSelect:function(t){for(var e=new c(this.full()),n=0;n<this._j.length;++n)for(var i=this._j[n],r=null,o=i.residues(),a=0;a<o.length;++a)for(var s=null,u=o[a],l=u.atoms(),h=0;h<l.length;++h)t(l[h])&&(r||(r=e.addChain(i,!1)),s||(s=r.addResidue(u,!1)),s.addAtom(l[h]));return e},assembly:function(t){for(var e=this.assemblies(),n=0;n<e.length;++n)if(e[n].name()===t)return e[n];return null},chainsByName:function(t){for(var e={},n=this.chains(),i=0;i<n.length;++i)e[n[i].name()]=n[i];for(var r=[],o=0;o<t.length;++o){var a=e[t[o]];void 0!==a&&r.push(a)}return r},selectWithin:function(){var t=f.create();return function(e,n){n=n||{};var i=n.radius||4,r=i*i,o=!!n.matchResidues,a=[];e.eachAtom(function(t){a.push(t)});for(var s=new c(this.full()),u=null,l=null,h=this.chains(),d=!1,p=0;p<h.length;++p){var v=h[p].residues();l=null;for(var g=0;g<v.length;++g){u=null,d=!1;for(var m=v[g].atoms(),_=0;_<m.length&&!d;++_)for(var y=0;y<a.length;++y)if(f.sub(t,m[_].pos(),a[y].pos()),!(f.sqrLen(t)>r)){if(l||(l=s.addChain(h[p].full(),!1)),u||(u=l.addResidue(v[g].full(),o)),o){d=!0;break}u.addAtom(m[_].full());break}}}return s}}(),createEmptyView:function(){return new c(this.full())}},i.derive(l,u,{addAssembly:function(t){this._O.push(t)},setAssemblies:function(t){this._O=t},assemblies:function(){return this._O},chains:function(){return this._j},full:function(){return this},containsResidue:function(t){return t.full().structure()===this},chainByName:function(t){for(var e=0;e<this._j.length;++e)if(this._j[e].name()===t)return this._j[e];
return null},chain:function(t){return this.chainByName(t)},nextAtomIndex:function(){var t=this._c3;return this._c3+=1,t},addChain:function(t){var e=new d(this,t);return this._j.push(e),e},connect:function(t,e){var n=new v(t,e);return t.addBond(n),e.addBond(n),n},deriveConnectivity:function(){var t=this,e=null;this.eachResidue(function(n){for(var i,r=n.atoms(),u=r.length,l=0;u>l;l+=1)for(var c=r[l],h=c.pos(),d=o(c.element()),p=0;l>p;p+=1){var v=r[p],g=o(v.element());i=f.sqrDist(h,v.pos());var m=d+g-.3,_=d+g+.3;_*_>i&&i>m*m&&t.connect(c,v)}n._ep(),null!==e&&(n.isAminoacid()&&e.isAminoacid()&&a(t,e,n),n.isNucleotide()&&e.isNucleotide()&&s(t,e,n)),e=n})}}),i.derive(c,u,{full:function(){return this._c5},assemblies:function(){return this._c5.assemblies()},addChain:function(t,e){var n=new p(this,t.full());if(this._j.push(n),e)for(var i=t.residues(),r=0;r<i.length;++r)n.addResidue(i[r],!0);return n},addAtom:function(t){var e=this.chain(t.residue().chain().name());return null===e&&(e=this.addChain(t.residue().chain())),e.addAtom(t)},removeAtom:function(t,e){if(null===t)return!1;var n=this.chain(t.residue().chain().name());if(null===n)return!1;var i=n.removeAtom(t,e);return i&&0===n.residues().length&&(this._j=this._j.filter(function(t){return t!==n})),i},containsResidue:function(t){if(!t)return!1;var e=this.chain(t.chain().name());return e?e.containsResidue(t):!1},addResidues:function(t,e){var n=this,i={};return t.forEach(function(t){var r=t.chain().name();"undefined"==typeof i[r]&&(i[r]=n.addChain(t.chain(),!1)),i[r].addResidue(t,e)}),i},chains:function(){return this._j},chain:function(t){for(var e=0;e<this._j.length;++e)if(this._j[e].name()===t)return this._j[e];return null}}),{MolView:c,Mol:l}}(N,D,$),P=function(){function t(t){function e(t,e){return t=Math.abs(t),e=Math.abs(e),t>e?t*Math.sqrt(1+e*e/t/t):0==e?t:e*Math.sqrt(1+t*t/e/e)}var n,i=Math.pow(2,-52),r=1e-64/i,o=50,a=0,s=0,u=0,l=0,c=0,h=t,f=h.length,d=h[0].length;if(d>f)throw"Need more rows than columns";var p=new Array(d),v=new Array(d);for(s=0;d>s;s++)p[s]=v[s]=0;for(var g=[],s=0;d>s;++s){var m=[];g.push([]);for(var u=0;d>u;++u)m.push(0);g.push(m)}var _=0,y=0,b=0,w=0,x=0,C=0,A=0;for(s=0;d>s;s++){for(p[s]=y,A=0,c=s+1,u=s;f>u;u++)A+=h[u][s]*h[u][s];if(r>=A)y=0;else for(_=h[s][s],y=Math.sqrt(A),_>=0&&(y=-y),b=_*y-A,h[s][s]=_-y,u=c;d>u;u++){for(A=0,l=s;f>l;l++)A+=h[l][s]*h[l][u];for(_=A/b,l=s;f>l;l++)h[l][u]+=_*h[l][s]}for(v[s]=y,A=0,u=c;d>u;u++)A+=h[s][u]*h[s][u];if(r>=A)y=0;else{for(_=h[s][s+1],y=Math.sqrt(A),_>=0&&(y=-y),b=_*y-A,h[s][s+1]=_-y,u=c;d>u;u++)p[u]=h[s][u]/b;for(u=c;f>u;u++){for(A=0,l=c;d>l;l++)A+=h[u][l]*h[s][l];for(l=c;d>l;l++)h[u][l]+=A*p[l]}}x=Math.abs(v[s])+Math.abs(p[s]),x>w&&(w=x)}for(s=d-1;-1!=s;s+=-1){if(0!=y){for(b=y*h[s][s+1],u=c;d>u;u++)g[u][s]=h[s][u]/b;for(u=c;d>u;u++){for(A=0,l=c;d>l;l++)A+=h[s][l]*g[l][u];for(l=c;d>l;l++)g[l][u]+=A*g[l][s]}}for(u=c;d>u;u++)g[s][u]=0,g[u][s]=0;g[s][s]=1,y=p[s],c=s}for(s=d-1;-1!=s;s+=-1){for(c=s+1,y=v[s],u=c;d>u;u++)h[s][u]=0;if(0!=y){for(b=h[s][s]*y,u=c;d>u;u++){for(A=0,l=c;f>l;l++)A+=h[l][s]*h[l][u];for(_=A/b,l=s;f>l;l++)h[l][u]+=_*h[l][s]}for(u=s;f>u;u++)h[u][s]=h[u][s]/y}else for(u=s;f>u;u++)h[u][s]=0;h[s][s]+=1}for(i*=w,l=d-1;-1!=l;l+=-1)for(var M=0;o>M;M++){var k=!1;for(c=l;-1!=c;c+=-1){if(Math.abs(p[c])<=i){k=!0;break}if(Math.abs(v[c-1])<=i)break}if(!k){a=0,A=1;var E=c-1;for(s=c;l+1>s&&(_=A*p[s],p[s]=a*p[s],!(Math.abs(_)<=i));s++)for(y=v[s],b=e(_,y),v[s]=b,a=y/b,A=-_/b,u=0;f>u;u++)x=h[u][E],C=h[u][s],h[u][E]=x*a+C*A,h[u][s]=-x*A+C*a}if(C=v[l],c==l){if(0>C)for(v[l]=-C,u=0;d>u;u++)g[u][l]=-g[u][l];break}if(M>=o-1)throw"Error: no convergence.";for(w=v[c],x=v[l-1],y=p[l-1],b=p[l],_=((x-C)*(x+C)+(y-b)*(y+b))/(2*b*x),y=e(_,1),_=0>_?((w-C)*(w+C)+b*(x/(_-y)-b))/w:((w-C)*(w+C)+b*(x/(_+y)-b))/w,a=1,A=1,s=c+1;l+1>s;s++){for(y=p[s],x=v[s],b=A*y,y=a*y,C=e(_,b),p[s-1]=C,a=_/C,A=b/C,_=w*a+y*A,y=-w*A+y*a,b=x*A,x*=a,u=0;d>u;u++)w=g[u][s-1],C=g[u][s],g[u][s-1]=w*a+C*A,g[u][s]=-w*A+C*a;for(C=e(_,b),v[s-1]=C,a=_/C,A=b/C,_=a*y+A*x,w=-A*y+a*x,u=0;f>u;u++)x=h[u][s-1],C=h[u][s],h[u][s-1]=x*a+C*A,h[u][s]=-x*A+C*a}p[c]=0,p[l]=_,v[l]=w}for(s=0;s<v.length;s++)v[s]<i&&(v[s]=0);for(s=0;d>s;s++)for(u=s-1;u>=0;u--)if(v[u]<v[s]){for(a=v[u],v[u]=v[s],v[s]=a,l=0;l<h.length;l++)n=h[l][s],h[l][s]=h[l][u],h[l][u]=n;for(l=0;l<g.length;l++)n=g[l][s],g[l][s]=g[l][u],g[l][u]=n;s=u}return{U:h,S:v,V:g}}return t}(),O=function(){function e(t){if(void 0===t||null===t||"all"===t)return null;if("backbone"===t)return{CA:!0,C:!0,O:!0,N:!0};if(void 0!==t.substr){for(var e={},n=t.split(","),i=0;i<n.length;++i)e[n[i].trim()]=!0;return e}for(var e={},i=0;i<t.length;++i)e[t[i]]=!0;return e}function n(t,e,n,i,r){for(var o=t.atoms(),a=e.atoms(),s=0;s<o.length;++s){var u=o[s];if(null===r||r[u.name()]===!0)for(var l=0;l<a.length;++l){var c=a[l];if(c.name()===u.name()){n.push(u),i.push(c);break}}}}function i(t,i,r,o){for(var a=t.full().createEmptyView(),s=i.full().createEmptyView(),u=Math.min(t.chains().length,i.chains().length),l=e(r),c=0;u>c;++c){var h=t.chains()[c],f=i.chains()[c],d=o(h,f),p=d[0],v=d[1];if(p.length!==v.length)return null;for(var g=a.addChain(h),m=s.addChain(f),_=0;_<p.length;++_){var y=p[_],b=v[_],w=[],x=[];if(n(y,b,w,x,l),0!==w.length)for(var C=g.addResidue(y),A=m.addResidue(b),M=0;M<w.length;++M)C.addAtom(w[M]),A.addAtom(x[M])}}return[a,s]}function r(t,e,n){return i(t,e,n,function(t,e){return[t.residues(),e.residues()]})}function o(t,e,n){return i(t,e,n,function(t,e){for(var n=[],i=[],r=t.residues(),o=0;o<r.length;++o){var a=e.residueByRnum(r[o].num());null!==a&&(n.push(r[o]),i.push(a))}return[n,i]})}var a=t.vec3,s=t.mat3,u=(t.quat,function(t,e){if(a.set(e,0,0,0),0!==t.length){for(var n=0;n<t.length;++n){var i=t[n];a.add(e,e,i.pos())}a.scale(e,e,1/t.length)}}),l=function(){var t=a.create(),e=a.create();return function(n,i,r,o,s){s[0]=0,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=0,s[6]=0,s[7]=0,s[8]=0;for(var u=0;u<i.length;++u){a.sub(t,n[u].pos(),r),a.sub(e,i[u].pos(),o);var l=t,c=e;s[0]+=l[0]*c[0],s[1]+=l[0]*c[1],s[2]+=l[0]*c[2],s[3]+=l[1]*c[0],s[4]+=l[1]*c[1],s[5]+=l[1]*c[2],s[6]+=l[2]*c[0],s[7]+=l[2]*c[1],s[8]+=l[2]*c[2]}}}(),c=function(){var t=a.create(),e=a.create(),n=a.create(),i=s.create(),r=s.create(),o=s.create(),c=s.create(),h=s.create();return function(f,d){var p=f.atoms(),v=d.atoms();if(u(v,t),u(p,e),p.length!==v.length)return!1;if(p.length<3)return!1;l(p,v,e,t,r);var g=[[r[0],r[1],r[2]],[r[3],r[4],r[5]],[r[6],r[7],r[8]]],m=P(g);c[0]=m.U[0][0],c[1]=m.U[0][1],c[2]=m.U[0][2],c[3]=m.U[1][0],c[4]=m.U[1][1],c[5]=m.U[1][2],c[6]=m.U[2][0],c[7]=m.U[2][1],c[8]=m.U[2][2];var _=s.determinant(c);h[0]=m.V[0][0],h[1]=m.V[0][1],h[2]=m.V[0][2],h[3]=m.V[1][0],h[4]=m.V[1][1],h[5]=m.V[1][2],h[6]=m.V[2][0],h[7]=m.V[2][1],h[8]=m.V[2][2];var y=s.determinant(h);s.identity(o),0>_*y&&(o[8]=-1,s.mul(c,c,o)),s.mul(i,s.transpose(h,h),c);for(var b=f.full().atoms(),w=0;w<b.length;++w){var x=b[w];a.sub(n,x.pos(),e),a.transformMat3(n,n,i),a.add(n,t,n),x.setPos(n)}return!0}}();return{superpose:c,matchResiduesByNum:o,matchResiduesByIndex:r,parseAtomNames:e,addAtomsPresentInBoth:n}}(),L=W=function(e){function n(t){for(var e=0;e<t.length();++e)t.residueAt(e).setSS(a(t,e)?"H":s(t,e)?"E":"C")}function i(t){for(var e=t.chains(),i=0;i<e.length;++i){var r=e[i];r.eachBackboneTrace(n)}}var r=t.vec3,o=function(){var t=r.create(),e=r.create();return function(n,i,o,a){for(var s=Math.max(0,i-2);i>=s;++s)for(var u=2;5>u;++u)if(!(s+u>=n.length())){var l=r.dist(n.posAt(t,s),n.posAt(e,s+u));if(Math.abs(l-o[u-2])>a)return!1}return!0}}(),a=function(t,e){var n=[5.45,5.18,6.37],i=2.1;return o(t,e,n,i)},s=function(t,e){var n=[6.1,10.4,13],i=1.42;return o(t,e,n,i)};return{Mol:W.Mol,MolView:W.MolView,assignHelixSheet:i,superpose:e.superpose,matchResiduesByIndex:e.matchResiduesByIndex,matchResiduesByNum:e.matchResiduesByNum}}(O),I=function(e){function n(){this._O={},this._T=null}function i(t){if(" "!==t[0]){var e=t.trim();if(4===e.length){for(var n=0,i=e.charCodeAt(n);4>n&&(65>i||i>122||i>90&&97>i);)++n,i=e.charCodeAt(n);return e[n]}var r=e.charCodeAt(0);return r>=48&&57>=r?e[1]:e.substr(0,2)}return t[1]}function r(t){this._cl=[],this._b3=[],this._cy=[],this._b4={},this._i=new W.Mol,this._cR=new n,this._bl=null,this._bk=null,this._eq=null,this._={},this._.conectRecords=!!t.conectRecords}function o(t){return t.split(/\r\n|\r|\n/g)}function a(t,e){for(var n=e||{},i=o(t),a=new r(n),s=[],u=0;u<i.length;u++){var l=a.processLine(i[u]);if(l===a.ERROR)return null;if(l!==a.CONTINUE){var c=a.finish();if(null!==c&&s.push(c),l!==a.MODEL_COMPLETE||!n.loadAllModels)break}}var h=a.finish();return null!==h&&s.push(h),n.loadAllModels?s:s[0]}function s(){this._i=new W.Mol,this._cQ(),this._b5=!1}function u(t){for(var e=new s,n=o(t),i=0;i<n.length&&e.processLine(n[i]);i++);var r=e.finish();return r}function l(t,e){var n=new XMLHttpRequest;n.open("GET",t,!0),n.onload=function(){n.response&&e(n.response)},n.send(null)}function c(t,e,n){l(t,function(t){var i=a(t,n);e(i)})}function h(t,e){l(t,function(t){var n=u(t);e(n)})}var f=t.vec3,d=t.mat4;return n.prototype={assemblies:function(){var t=[];for(var e in this._O)this._O.hasOwnProperty(e)&&t.push(this._O[e]);return t},assembly:function(t){return this._O[t]},nextLine:function(t){if(t=t.substr(11),"B"===t[0]&&"BIOMOLECULE:"===t.substr(0,12)){var n=t.substr(13).trim();return this._dr=new e.Assembly(n),void(this._O[n]=this._dr)}if("APPLY THE FOLLOWING TO CHAINS:"!==t.substr(0,30)&&"                   AND CHAINS:"!==t.substr(0,30)){if("  BIOMT"===t.substr(0,7)){for(var i=parseInt(t[7],10)-1,r=0;" "!==t[12+r];)r+=1;var o=parseFloat(t.substr(13+r,9)),a=parseFloat(t.substr(23+r,9)),s=parseFloat(t.substr(33+r,9)),u=parseFloat(t.substr(43+r,14));return this._bj[0+i]=o,this._bj[4+i]=a,this._bj[8+i]=s,this._bj[12+i]=u,void(2===i&&(this._cw.addMatrix(this._bj),this._bj=d.create()))}}else{var l=t.substr(30).split(",");"A"===t[0]&&(this._cw=new e.SymGenerator,this._dr.addGenerator(this._cw)),this._bj=d.create();for(var c=0;c<l.length;++c){var h=l[c].trim();h.length&&this._cw.addChain(h)}}}},r.prototype={CONTINUE:1,MODEL_COMPLETE:2,FILE_END:3,ERROR:4,parseHelixRecord:function(t){var e=parseInt(t.substr(21,4),10),n=" "===t[25]?"\x00":t[25],i=parseInt(t.substr(33,4),10),r=" "===t[37]?"\x00":t[37],o=t[19];return this._cl.push({first:[e,n],last:[i,r],chainName:o}),!0},parseSheetRecord:function(t){var e=parseInt(t.substr(22,4),10),n=" "===t[26]?"\x00":t[26],i=parseInt(t.substr(33,4),10),r=" "===t[37]?"\x00":t[37],o=t[21];return this._b3.push({first:[e,n],last:[i,r],chainName:o}),!0},parseAndAddAtom:function(t){var e=t[16];if(" "!==e&&"A"!==e)return!0;var n="H"===t[0],r=t[21],o=t.substr(17,3).trim(),a=t.substr(12,4),s=a.trim(),u=parseInt(t.substr(22,4),10);u!==u&&(u=1);var l=" "===t[26]?"\x00":t[26],c=!1,h=!1;this._bl&&this._bl.name()===r||(h=!0,c=!0),this._bk&&this._bk.num()===u&&this._bk.insCode()===l||(c=!0),h&&(this._bl=this._i.chain(r)||this._i.addChain(r)),c&&(this._bk=this._bl.addResidue(o,u,l));for(var d=f.create(),p=0;3>p;++p)d[p]=parseFloat(t.substr(30+8*p,8));var v=t.substr(76,2).trim();""===v&&(v=i(a));var g=parseFloat(t.substr(54,6).trim()),m=parseFloat(t.substr(60,6).trim()),_=this._bk.addAtom(s,d,v,n,isNaN(g)?null:g,isNaN(m)?null:m);if(this._.conectRecords){var y=parseInt(t.substr(6,5).trim(),10);this._b4[y]=_}return!0},parseConectRecord:function(t){for(var e=parseInt(t.substr(6,5).trim(),10),n=[],i=0;4>i;++i){var r=parseInt(t.substr(11+5*i,6).trim(),10);isNaN(r)||r>e||n.push(r)}return this._cy.push({from:e,to:n}),!0},processLine:function(t){var e=t.substr(0,6);if("ATOM  "===e||"HETATM"===e)return this.parseAndAddAtom(t)?this.CONTINUE:this.ERROR;if("REMARK"===e){var n=t.substr(7,3);return"350"===n&&this._cR.nextLine(t),this.CONTINUE}return"HELIX "===e?this.parseHelixRecord(t)?this.CONTINUE:this.ERROR:"SHEET "===e?this.parseSheetRecord(t)?this.CONTINUE:this.ERROR:this._.conectRecords&&"CONECT"===e?this.parseConectRecord(t)?this.CONTINUE:this.ERROR:"END   "===e?this.FILE_END:"ENDMDL"===e?this.MODEL_COMPLETE:this.CONTINUE},finish:function(){if(null===this._bl)return null;var t,e=null;for(t=0;t<this._b3.length;++t){var n=this._b3[t];e=this._i.chain(n.chainName),e&&e.assignSS(n.first,n.last,"E")}for(t=0;t<this._cl.length;++t){var i=this._cl[t];e=this._i.chain(i.chainName),e&&e.assignSS(i.first,i.last,"H")}this._i.setAssemblies(this._cR.assemblies()),this._.conectRecords&&this._ex(this._i),this._i.deriveConnectivity();var r=this._i;return this._i=new W.Mol,this._bl=null,this._bk=null,this._eq=null,r},_ex:function(t){for(var e=0;e<this._cy.length;++e)for(var n=this._cy[e],i=this._b4[n.from],r=0;r<n.to.length;++r){var o=this._b4[n.to[r]];t.connect(i,o)}}},s.prototype={processLine:function(t){var e=this._9;if(3>e){if(0===e){var n=t.trim();if(0===n.length)return!1;this._cI=n}return this._b5=!1,this._9++,!0}if(3===e){if(this._cr=parseInt(t.substr(0,3).trim(),10),this._dn=parseInt(t.substr(3,3).trim(),10),isNaN(this._cr)||isNaN(this._dn))return!1;this._9++;var i=""+(this._i.chains().length+1);this._dq=this._i.addChain(i),this._cx=this._dq.addResidue(this._cI,1)}if(4===e){for(var r=[0,0,0],o=0;3>o;++o)if(r[o]=parseFloat(t.substr(10*o,10).trim()),isNaN(r[o]))return!1;var a=t.substr(31,3).trim();this._cx.addAtom(a,r,a,!1),this._dx++,this._dx===this._cr&&this._9++}if(5===e){var s=parseInt(t.substr(0,3).trim(),10)-1,u=parseInt(t.substr(3,3).trim(),10)-1;if(isNaN(s)||isNaN(u))return!1;var l=this._cx.atoms();this._i.connect(l[s],l[u]),this._dv++,this._dv===this._dn&&this._9++}return"M  END"===t.substr(0,6)&&(this._b5=!0,this._9++),"$$$$"===t.substr(0,4)&&this._cQ(),!0},_cQ:function(){this._9=0,this._cx=null,this._dq=null,this._cr=null,this._eL=null,this._dx=0,this._dv=0,this._cI=""},finish:function(){return this._b5?this._i:null}},{pdb:a,sdf:u,Remark350Reader:n,fetchPdb:c,fetchSdf:h,guessAtomElementFromName:i}}(S),q=function(){var e=t.vec3,n=t.mat3,i=function(){var t=e.create(),n=e.create();return function(i,r){e.set(t,0,0,0);var o=0;i.eachCentralAtom(function(n,i){e.add(t,t,i),o+=1}),0!==o&&(e.scale(t,t,1/o),r[0]=0,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=0,r[6]=0,r[7]=0,r[8]=0,i.eachCentralAtom(function(i,o){e.sub(n,o,t);var a=n[0],s=n[1],u=n[2];r[0]+=s*s+u*u,r[1]-=a*s,r[2]-=a*u,r[5]-=s*u,r[4]+=a*a+u*u,r[8]+=a*a+s*s}),r[3]=r[1],r[6]=r[2],r[7]=r[5])}}(),r=function(){var t=n.create(),r=n.create(),o=e.create(),a=e.create(),s=e.create(),u=e.create(),l=e.create(),c=e.create(),f=e.create();return function(d){i(d,t);var p=h.diagonalizer(t);n.fromQuat(r,p);var v=!0;d.eachCentralAtom(function(t,n){e.transformMat3(s,n,r),v?(e.copy(o,s),e.copy(a,s),v=!1):(e.min(o,o,s),e.max(a,a,s))}),e.sub(u,a,o);var g=[[u[0],0],[u[1],1],[u[2],2]];g.sort(function(t,e){return e[0]-t[0]});var m=g[0][1],_=g[1][1];e.set(l,r[m+0],r[m+3],r[m+6]),e.set(c,r[_+0],r[_+3],r[_+6]),e.cross(f,l,c);var y=n.create();return y[0]=l[0],y[1]=c[0],y[2]=f[0],y[3]=l[1],y[4]=c[1],y[5]=f[1],y[6]=l[2],y[7]=c[2],y[8]=f[2],y}}();return{principalAxes:r}}(),j=function(){return{Viewer:E.Viewer,isWebGLSupported:E.isWebGLSupported,io:I,color:e,mol:W,rgb:{setColorPalette:e.setColorPalette,hex2rgb:e.hex2rgb},vec3:t.vec3,vec4:t.vec4,mat3:t.mat3,mat4:t.mat4,quat:t.quat,viewpoint:q}}()}),function(){var t;t="undefined"!=typeof exports&&null!==exports?exports:this,t.motionplanning=function(){var t,e,n,i,r,o,a,s,u,l,c,h,f,d,p,v,g,m,_,y,b,w,x;return r=0,s=-2.0914073464,m=600,c=400,_=d3.select("#workspace").append("svg").attr("width",m).attr("height",c),_.append("path").attr("d","m 160,113.397 -150,0 0,-100 350,0 0,350 -350,0 0,-86.6 150,0 z").style("fill","lightblue"),_.append("circle").attr("cx",200).attr("cy",200).attr("r",100).style("fill","white").style("stroke","lightgrey"),_.append("text").attr("x",20).attr("y",40).attr("font-size","18px").attr("fill","dodgerblue").text("obstacle"),a=_.append("text").attr("x",370).attr("y",40).attr("font-size","18px"),l=_.append("text").attr("x",370).attr("y",80).attr("font-size","18px"),_.append("text").attr("x",250).attr("y",305).attr("font-size","20px").attr("text-anchor","middle").attr("fill","sienna").style("font-weight","bold").text("A"),_.append("text").attr("x",250).attr("y",110).attr("font-size","20px").attr("text-anchor","middle").attr("fill","sienna").style("font-weight","bold").text("B"),p=_.append("path").attr("d","m 200,200").style("stroke","mediumseagreen").style("stroke-width",2.5).style("fill","none").style("stroke-linecap","round"),o=d3.select("#workspace").append("input").attr("type","range").attr("min",0).attr("max",6.28).attr("step",1e-10).attr("id","f1Slider").attr("value",r),u=d3.select("#workspace").append("input").attr("type","range").attr("min",-3.14).attr("max",3.14).attr("step",1e-10).attr("id","f2Slider").attr("value",s),f={top:40,right:40,bottom:40,left:40},m=500-f.left-f.right,c=500-f.top-f.bottom,y=d3.scale.linear().domain([0,2*Math.PI]).range([0,m]),w=d3.scale.linear().domain([Math.PI,-Math.PI]).range([0,c]),t=d3.select("#cspacesvg").append("svg").attr("class","cspace").attr("width",m+f.left+f.right).attr("height",c+f.top+f.bottom).append("g").attr("transform","translate("+f.left+","+f.top+")"),t.selectAll("line.x").data([1,2,3,4,5,6,7,8].map(function(t){return t*Math.PI/4})).enter().append("line").attr("class","x").attr("x1",y).attr("x2",y).attr("y1",0).attr("y2",m).style("stroke","#ccc"),t.selectAll("line.y").data([-3,-2,-1,0,1,2,3,4].map(function(t){return t*Math.PI/4})).enter().append("line").attr("class","y").attr("x1",0).attr("x2",c).attr("y1",w).attr("y2",w).style("stroke","#ccc"),b=d3.svg.axis().scale(y).tickValues([0,1,2,3,4,5,6,7,8].map(function(t){return t*Math.PI/4})).orient("bottom"),x=d3.svg.axis().scale(w).tickValues([-4,-3,-2,-1,0,1,2,3,4].map(function(t){return t*Math.PI/4})).orient("left"),t.append("g").attr("class","x axis").attr("transform","translate(0,"+c+")").call(b),t.append("g").attr("class","y axis").call(x),v=[[0,s],[3.1,s],[2.83,-.27],[2.1,1],[1.97,1.68],[1.82,1.78],[1.5,1.8],[1,-s],[0,-s]],d=v.map(function(t){return[-1*(t[0]-Math.PI)+Math.PI,-1*t[1]]}),h=d3.svg.line().x(function(t){return y(t[0])}).y(function(t){return w(t[1])}).interpolate("cardinal"),t.append("path").attr("d",h(v)).style("stroke","lightblue").style("fill","lightblue").style("fill-opacity",.5),t.append("path").attr("d",h(d)).style("stroke","lightblue").style("fill","lightblue").style("fill-opacity",.5),t.append("path").attr("d",h([[0,s],[3.8,s],[2.5,-s],[6.28,-s]])).style("stroke","tomato").style("fill","none"),t.append("text").attr("x",y(0)).attr("y",w(s)+5).attr("font-size","20px").attr("text-anchor","middle").attr("fill","sienna").style("font-weight","bold").text("A"),t.append("text").attr("x",y(6.28)).attr("y",w(-s)+5).attr("font-size","20px").attr("text-anchor","middle").attr("fill","sienna").style("font-weight","bold").text("B"),i=function(t){return n.attr("cx",t.x=Math.max(0,Math.min(420,d3.event.x))).attr("cy",t.y=Math.max(0,Math.min(420,d3.event.y))),r=Math.round(1e10*y.invert(n.attr("cx")))/1e10,s=Math.round(1e10*w.invert(n.attr("cy")))/1e10,g()},e=d3.behavior.drag().origin(Object).on("drag",i),n=t.append("g").data([{x:y(r),y:w(s)}]).append("circle").attr("cx",function(t){return t.x}).attr("cy",function(t){return t.y}).attr("r",5).attr("stroke","palegreen").style("stroke-width",30).style("stroke-opacity",.5).style("fill-opacity",1).style("fill","palegreen").attr("cursor","move"),g=function(){var t,e,i,c,h;return c=-100*Math.sin(r),e=100*Math.cos(r),i=-100*Math.cos(Math.PI-r-s),h=-100*Math.sin(Math.PI-r-s),t="m 200,200 "+e+","+c+" "+i+","+h,p.transition().duration(500).ease("elastic").attr("d",t),a.text("\u03c6\u2081: "+r),l.text("\u03c6\u2082: "+s),o[0][0].value=r,u[0][0].value=s,n.attr("cx",y(r)),n.attr("cy",w(s)),n.datum().x=y(r),n.datum().y=w(s)},o.on("input",function(){return r=this.value,g()}),u.on("input",function(){return s=this.value,g()}),n.call(e),g()}}.call(this),/*! highlight.js v9.2.0 | BSD3 License | git.io/hljslicense */
!function(t){var e="object"==typeof window&&window||"object"==typeof self&&self;"undefined"!=typeof exports?t(exports):e&&(e.hljs=t({}),"function"==typeof define&&define.amd&&define([],function(){return e.hljs}))}(function(t){function e(t){return t.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;")}function n(t){return t.nodeName.toLowerCase()}function i(t,e){var n=t&&t.exec(e);return n&&0==n.index}function r(t){return/^(no-?highlight|plain|text)$/i.test(t)}function o(t){var e,n,i,o=t.className+" ";if(o+=t.parentNode?t.parentNode.className:"",n=/\blang(?:uage)?-([\w-]+)\b/i.exec(o))return b(n[1])?n[1]:"no-highlight";for(o=o.split(/\s+/),e=0,i=o.length;i>e;e++)if(b(o[e])||r(o[e]))return o[e]}function a(t,e){var n,i={};for(n in t)i[n]=t[n];if(e)for(n in e)i[n]=e[n];return i}function s(t){var e=[];return function i(t,r){for(var o=t.firstChild;o;o=o.nextSibling)3==o.nodeType?r+=o.nodeValue.length:1==o.nodeType&&(e.push({event:"start",offset:r,node:o}),r=i(o,r),n(o).match(/br|hr|img|input/)||e.push({event:"stop",offset:r,node:o}));return r}(t,0),e}function u(t,i,r){function o(){return t.length&&i.length?t[0].offset!=i[0].offset?t[0].offset<i[0].offset?t:i:"start"==i[0].event?t:i:t.length?t:i}function a(t){function i(t){return" "+t.nodeName+'="'+e(t.value)+'"'}c+="<"+n(t)+Array.prototype.map.call(t.attributes,i).join("")+">"}function s(t){c+="</"+n(t)+">"}function u(t){("start"==t.event?a:s)(t.node)}for(var l=0,c="",h=[];t.length||i.length;){var f=o();if(c+=e(r.substr(l,f[0].offset-l)),l=f[0].offset,f==t){h.reverse().forEach(s);do u(f.splice(0,1)[0]),f=o();while(f==t&&f.length&&f[0].offset==l);h.reverse().forEach(a)}else"start"==f[0].event?h.push(f[0].node):h.pop(),u(f.splice(0,1)[0])}return c+e(r.substr(l))}function l(t){function e(t){return t&&t.source||t}function n(n,i){return new RegExp(e(n),"m"+(t.cI?"i":"")+(i?"g":""))}function i(r,o){if(!r.compiled){if(r.compiled=!0,r.k=r.k||r.bK,r.k){var s={},u=function(e,n){t.cI&&(n=n.toLowerCase()),n.split(" ").forEach(function(t){var n=t.split("|");s[n[0]]=[e,n[1]?Number(n[1]):1]})};"string"==typeof r.k?u("keyword",r.k):Object.keys(r.k).forEach(function(t){u(t,r.k[t])}),r.k=s}r.lR=n(r.l||/\b\w+\b/,!0),o&&(r.bK&&(r.b="\\b("+r.bK.split(" ").join("|")+")\\b"),r.b||(r.b=/\B|\b/),r.bR=n(r.b),r.e||r.eW||(r.e=/\B|\b/),r.e&&(r.eR=n(r.e)),r.tE=e(r.e)||"",r.eW&&o.tE&&(r.tE+=(r.e?"|":"")+o.tE)),r.i&&(r.iR=n(r.i)),void 0===r.r&&(r.r=1),r.c||(r.c=[]);var l=[];r.c.forEach(function(t){t.v?t.v.forEach(function(e){l.push(a(t,e))}):l.push("self"==t?r:t)}),r.c=l,r.c.forEach(function(t){i(t,r)}),r.starts&&i(r.starts,o);var c=r.c.map(function(t){return t.bK?"\\.?("+t.b+")\\.?":t.b}).concat([r.tE,r.i]).map(e).filter(Boolean);r.t=c.length?n(c.join("|"),!0):{exec:function(){return null}}}}i(t)}function c(t,n,r,o){function a(t,e){for(var n=0;n<e.c.length;n++)if(i(e.c[n].bR,t))return e.c[n]}function s(t,e){if(i(t.eR,e)){for(;t.endsParent&&t.parent;)t=t.parent;return t}return t.eW?s(t.parent,e):void 0}function u(t,e){return!r&&i(e.iR,t)}function f(t,e){var n=y.cI?e[0].toLowerCase():e[0];return t.k.hasOwnProperty(n)&&t.k[n]}function d(t,e,n,i){var r=i?"":w.classPrefix,o='<span class="'+r,a=n?"":"</span>";return o+=t+'">',o+e+a}function p(){if(!A.k)return e(E);var t="",n=0;A.lR.lastIndex=0;for(var i=A.lR.exec(E);i;){t+=e(E.substr(n,i.index-n));var r=f(A,i);r?(S+=r[1],t+=d(r[0],e(i[0]))):t+=e(i[0]),n=A.lR.lastIndex,i=A.lR.exec(E)}return t+e(E.substr(n))}function v(){var t="string"==typeof A.sL;if(t&&!x[A.sL])return e(E);var n=t?c(A.sL,E,!0,M[A.sL]):h(E,A.sL.length?A.sL:void 0);return A.r>0&&(S+=n.r),t&&(M[A.sL]=n.top),d(n.language,n.value,!1,!0)}function g(){k+=void 0!==A.sL?v():p(),E=""}function m(t){k+=t.cN?d(t.cN,"",!0):"",A=Object.create(t,{parent:{value:A}})}function _(t,e){if(E+=t,void 0===e)return g(),0;var n=a(e,A);if(n)return n.skip?E+=e:(n.eB&&(E+=e),g(),n.rB||n.eB||(E=e)),m(n,e),n.rB?0:e.length;var i=s(A,e);if(i){var r=A;r.skip?E+=e:(r.rE||r.eE||(E+=e),g(),r.eE&&(E=e));do A.cN&&(k+="</span>"),A.skip||(S+=A.r),A=A.parent;while(A!=i.parent);return i.starts&&m(i.starts,""),r.rE?0:e.length}if(u(e,A))throw new Error('Illegal lexeme "'+e+'" for mode "'+(A.cN||"<unnamed>")+'"');return E+=e,e.length||1}var y=b(t);if(!y)throw new Error('Unknown language: "'+t+'"');l(y);var C,A=o||y,M={},k="";for(C=A;C!=y;C=C.parent)C.cN&&(k=d(C.cN,"",!0)+k);var E="",S=0;try{for(var T,F,R=0;A.t.lastIndex=R,T=A.t.exec(n),T;)F=_(n.substr(R,T.index-R),T[0]),R=T.index+F;for(_(n.substr(R)),C=A;C.parent;C=C.parent)C.cN&&(k+="</span>");return{r:S,value:k,language:t,top:A}}catch(N){if(-1!=N.message.indexOf("Illegal"))return{r:0,value:e(n)};throw N}}function h(t,n){n=n||w.languages||Object.keys(x);var i={r:0,value:e(t)},r=i;return n.forEach(function(e){if(b(e)){var n=c(e,t,!1);n.language=e,n.r>r.r&&(r=n),n.r>i.r&&(r=i,i=n)}}),r.language&&(i.second_best=r),i}function f(t){return w.tabReplace&&(t=t.replace(/^((<[^>]+>|\t)+)/gm,function(t,e){return e.replace(/\t/g,w.tabReplace)})),w.useBR&&(t=t.replace(/\n/g,"<br>")),t}function d(t,e,n){var i=e?C[e]:n,r=[t.trim()];return t.match(/\bhljs\b/)||r.push("hljs"),-1===t.indexOf(i)&&r.push(i),r.join(" ").trim()}function p(t){var e=o(t);if(!r(e)){var n;w.useBR?(n=document.createElementNS("http://www.w3.org/1999/xhtml","div"),n.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/<br[ \/]*>/g,"\n")):n=t;var i=n.textContent,a=e?c(e,i,!0):h(i),l=s(n);if(l.length){var p=document.createElementNS("http://www.w3.org/1999/xhtml","div");p.innerHTML=a.value,a.value=u(l,s(p),i)}a.value=f(a.value),t.innerHTML=a.value,t.className=d(t.className,e,a.language),t.result={language:a.language,re:a.r},a.second_best&&(t.second_best={language:a.second_best.language,re:a.second_best.r})}}function v(t){w=a(w,t)}function g(){if(!g.called){g.called=!0;var t=document.querySelectorAll("pre code");Array.prototype.forEach.call(t,p)}}function m(){addEventListener("DOMContentLoaded",g,!1),addEventListener("load",g,!1)}function _(e,n){var i=x[e]=n(t);i.aliases&&i.aliases.forEach(function(t){C[t]=e})}function y(){return Object.keys(x)}function b(t){return t=(t||"").toLowerCase(),x[t]||x[C[t]]}var w={classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:void 0},x={},C={};return t.highlight=c,t.highlightAuto=h,t.fixMarkup=f,t.highlightBlock=p,t.configure=v,t.initHighlighting=g,t.initHighlightingOnLoad=m,t.registerLanguage=_,t.listLanguages=y,t.getLanguage=b,t.inherit=a,t.IR="[a-zA-Z]\\w*",t.UIR="[a-zA-Z_]\\w*",t.NR="\\b\\d+(\\.\\d+)?",t.CNR="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",t.BNR="\\b(0b[01]+)",t.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",t.BE={b:"\\\\[\\s\\S]",r:0},t.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[t.BE]},t.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[t.BE]},t.PWM={b:/\b(a|an|the|are|I|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|like)\b/},t.C=function(e,n,i){var r=t.inherit({cN:"comment",b:e,e:n,c:[]},i||{});return r.c.push(t.PWM),r.c.push({cN:"doctag",b:"(?:TODO|FIXME|NOTE|BUG|XXX):",r:0}),r},t.CLCM=t.C("//","$"),t.CBCM=t.C("/\\*","\\*/"),t.HCM=t.C("#","$"),t.NM={cN:"number",b:t.NR,r:0},t.CNM={cN:"number",b:t.CNR,r:0},t.BNM={cN:"number",b:t.BNR,r:0},t.CSSNM={cN:"number",b:t.NR+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",r:0},t.RM={cN:"regexp",b:/\//,e:/\/[gimuy]*/,i:/\n/,c:[t.BE,{b:/\[/,e:/\]/,r:0,c:[t.BE]}]},t.TM={cN:"title",b:t.IR,r:0},t.UTM={cN:"title",b:t.UIR,r:0},t.METHOD_GUARD={b:"\\.\\s*"+t.UIR,r:0},t}),hljs.registerLanguage("scala",function(t){var e={cN:"meta",b:"@[A-Za-z]+"},n={cN:"subst",v:[{b:"\\$[A-Za-z0-9_]+"},{b:"\\${",e:"}"}]},i={cN:"string",v:[{b:'"',e:'"',i:"\\n",c:[t.BE]},{b:'"""',e:'"""',r:10},{b:'[a-z]+"',e:'"',i:"\\n",c:[t.BE,n]},{cN:"string",b:'[a-z]+"""',e:'"""',c:[n],r:10}]},r={cN:"symbol",b:"'\\w[\\w\\d_]*(?!')"},o={cN:"type",b:"\\b[A-Z][A-Za-z0-9_]*",r:0},a={cN:"title",b:/[^0-9\n\t "'(),.`{}\[\]:;][^\n\t "'(),.`{}\[\]:;]+|[^0-9\n\t "'(),.`{}\[\]:;=]/,r:0},s={cN:"class",bK:"class object trait type",e:/[:={\[\n;]/,eE:!0,c:[{bK:"extends with",r:10},{b:/\[/,e:/\]/,eB:!0,eE:!0,r:0,c:[o]},{cN:"params",b:/\(/,e:/\)/,eB:!0,eE:!0,r:0,c:[o]},a]},u={cN:"function",bK:"def",e:/[:={\[(\n;]/,eE:!0,c:[a]};return{k:{literal:"true false null",keyword:"type yield lazy override def with val var sealed abstract private trait object if forSome for while throw finally protected extends import final return else break new catch super class case package default try this match continue throws implicit"},c:[t.CLCM,t.CBCM,i,r,o,u,s,t.CNM,e]}}),function(){var t,e;e="undefined"!=typeof exports&&null!==exports?exports:this,t=function(t,e,n){return"undefined"==typeof n||0===+n?Math[t](e):(e=+e,n=+n,isNaN(e)||"number"!=typeof n||n%1!==0?NaN:(e=e.toString().split("e"),e=Math[t](+(e[0]+"e"+(e[1]?+e[1]-n:-n))),e=e.toString().split("e"),+(e[0]+"e"+(e[1]?+e[1]+n:n))))},Math.round10=function(e,n){return t("round",e,n)},e.jsontable=function(t,e){var n,i,r,o;return n=e.data,d3.select(t).append("h3").text(""+e.name),d3.select(t).append("p").text("size: "+e.rows+"x"+e.cols),d3.select(t).append("p").text("rank: "+e.rank),i=d3.select(t).append("table").attr("class","matrix"),o=i.selectAll("tr").data(n).enter().append("tr"),r=o.selectAll("td").data(function(t){return t}).enter().append("td").data(function(t){return t}).text(function(t){return Math.round10(t,-3)})}}.call(this),function(){var t;t="undefined"!=typeof exports&&null!==exports?exports:this,t.draw_whole_mol=function(t,e){var n,i,r,o;return console.log("load pv "+t),r=document.getElementById("pvrow").offsetWidth,i={width:800,height:550,antialias:!0,quality:"medium"},o=pv.Viewer(document.getElementById(t),i),n=function(){var t,n;return n=pv.io.pdb(e),o.cartoon("protein",n,{color:color.ssSuccession()}),t=n.select({rnames:["SAH","RVP"]}),o.ballsAndSticks("ligands",t),o.spin(.2),o.setZoom(100),o.centerOn(n),o.addListener("click",function(){return o.spin(!1)})},document.addEventListener("DOMContentLoaded",n)},t.draw_input_mol=function(t,e){var n,i,r,o;return console.log("load pv "+t),r=document.getElementById("pvrow").offsetWidth,i={width:800,height:500,antialias:!0,quality:"medium"},o=pv.Viewer(document.getElementById(t),i),n=function(){var t;return t=pv.io.pdb(e).select({rnumRange:[294,296]}),o.cartoon("protein1",t),o.ballsAndSticks("protein",t),o.spin(.2),o.setZoom(25),o.centerOn(t),o.addListener("click",function(){return o.spin(!1)})},document.addEventListener("DOMContentLoaded",n)},t.draw_output_mol=function(t,e){var n,i,r;return i={width:800,height:500,antialias:!0,quality:"high"},r=pv.Viewer(document.getElementById(t),i),n=function(){var t,n,i,o;for(t=r.customMesh("output"),i=0,o=e.length;o>i;i++)n=e[i],t.addSphere(n,.5,{color:rgb.hex2rgb("#4466DD")});return r.spin(.2,[0,1,0]),r.setZoom(25),r.addListener("click",function(){return console.log("click"),r.spin(!1)})},document.addEventListener("DOMContentLoaded",n)}}.call(this),function(){var t,e;e="undefined"!=typeof exports&&null!==exports?exports:this,t={nodes:[{name:"C"},{name:"A"},{name:"C"},{name:"G"},{name:"G"},{name:"U"},{name:"U"},{name:"A"},{name:"G"},{name:"A"}],links:[{source:0,target:1},{source:1,target:2},{source:2,target:3},{source:3,target:4},{source:4,target:5},{source:5,target:6},{source:6,target:7},{source:7,target:8},{source:8,target:9},{source:0,target:8,stem:!0},{source:1,target:5,stem:!0}]},e.rnafolding=function(e){var n,i,r,o,a,s,u,l,c,h;return h=960,r=500,u=10,c=function(){return s.attr("cx",function(t){return t.x=Math.max(u,Math.min(h-u,t.x))}).attr("cy",function(t){return t.y=Math.max(u,Math.min(r-u,t.y))}),a.attr("x1",function(t){return t.source.x}).attr("y1",function(t){return t.source.y}).attr("x2",function(t){return t.target.x}).attr("y2",function(t){return t.target.y})},n=d3.scale.category10(),i=d3.layout.force().gravity(.02).charge(-1e3).linkDistance(function(t){return t.stem?20:50}).linkStrength(3).size([h,r]),l=d3.select(e).append("svg").attr("width",h).attr("height",r),a=l.selectAll("line").data(t.links).enter().append("line").style("stroke",function(t){return t.stem?"tomato":"#999"}),s=l.selectAll("circle").data(t.nodes).enter().append("circle").attr("r",u).style("fill",function(t){return n(t.name)}).style("stroke",function(t){return d3.rgb(n(t.name)).darker()}).style("stroke-width","1.5px").call(i.drag),i.nodes(t.nodes).links(t.links).on("tick",c).start(),console.log(n.domain()),o=l.selectAll(".legend").data(n.domain()).enter().append("g").attr("class","legend").attr("transform",function(t,e){return"translate(0,"+20*e+")"}),o.append("rect").attr("x",0).attr("y",210).attr("width",18).attr("height",18).style("fill",n),o.append("text").attr("x",30).attr("y",220).attr("dy",".35em").style("text-anchor","start").text(function(t){return t})}}.call(this);